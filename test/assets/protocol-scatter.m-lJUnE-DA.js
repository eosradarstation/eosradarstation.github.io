import{C as qn,a as Eo,P as Ao,S as jn,b as So,T as Ro,c as To}from"./index-DN2-qCcF.js";/**
 * @wharfkit/protocol-scatter v1.3.1
 * https://github.com/wharfkit/protocol-scatter
 *
 * @license
 * Copyright (c) 2023 Greymass Inc. All Rights Reserved.
 * 
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 * 
 * 1.  Redistribution of source code must retain the above copyright notice, this
 *     list of conditions and the following disclaimer.
 * 
 * 2.  Redistribution in binary form must reproduce the above copyright notice,
 *     this list of conditions and the following disclaimer in the documentation
 *     and/or other materials provided with the distribution.
 * 
 * 3.  Neither the name of the copyright holder nor the names of its contributors
 *     may be used to endorse or promote products derived from this software without
 *     specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE
 * OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED
 * OF THE POSSIBILITY OF SUCH DAMAGE.
 * 
 * YOU ACKNOWLEDGE THAT THIS SOFTWARE IS NOT DESIGNED, LICENSED OR INTENDED FOR USE
 * IN THE DESIGN, CONSTRUCTION, OPERATION OR MAINTENANCE OF ANY MILITARY FACILITY.
 */var q=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ot(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var Je={},gn={},re={},Kt={},ko=function(){function t(e,r){var n=[],i=!0,a=!1,o=void 0;try{for(var s=e[Symbol.iterator](),u;!(i=(u=s.next()).done)&&(n.push(u.value),!(r&&n.length===r));i=!0);}catch(l){a=!0,o=l}finally{try{!i&&s.return&&s.return()}finally{if(a)throw o}}return n}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Oo=function(){function t(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();function Po(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Co=function(){function t(){Po(this,t)}return Oo(t,null,[{key:"get_n_pad_bytes",value:function(r){return 64-(r+8&63)}},{key:"pad",value:function(r){var n=r.byteLength,i=t.get_n_pad_bytes(n),a=function(P,E){return[Math.floor(P/E),P%E]},o=a(n,536870912).map(function(b,P){return P?b*8:b}),s=ko(o,2),u=s[0],l=s[1],h=new Uint8Array(n+i+8);h.set(new Uint8Array(r),0);var p=new DataView(h.buffer);return p.setUint8(n,128),p.setUint32(n+i,l,!0),p.setUint32(n+i+4,u,!0),h.buffer}},{key:"f",value:function(r,n,i,a){if(0<=r&&r<=15)return n^i^a;if(16<=r&&r<=31)return n&i|~n&a;if(32<=r&&r<=47)return(n|~i)^a;if(48<=r&&r<=63)return n&a|i&~a;if(64<=r&&r<=79)return n^(i|~a)}},{key:"K",value:function(r){if(0<=r&&r<=15)return 0;if(16<=r&&r<=31)return 1518500249;if(32<=r&&r<=47)return 1859775393;if(48<=r&&r<=63)return 2400959708;if(64<=r&&r<=79)return 2840853838}},{key:"KP",value:function(r){if(0<=r&&r<=15)return 1352829926;if(16<=r&&r<=31)return 1548603684;if(32<=r&&r<=47)return 1836072691;if(48<=r&&r<=63)return 2053994217;if(64<=r&&r<=79)return 0}},{key:"add_modulo32",value:function(){return Array.from(arguments).reduce(function(r,n){return r+n},0)|0}},{key:"rol32",value:function(r,n){return r<<n|r>>>32-n}},{key:"hash",value:function(r){for(var n=t.pad(r),i=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],a=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],o=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],s=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],u=4,l=64,h=n.byteLength/l,p=new Array(h).fill(void 0).map(function(Y,Z){return function(ne){return new DataView(n,Z*l,l).getUint32(ne*u,!0)}}),b=[1732584193,4023233417,2562383102,271733878,3285377520],P=0;P<h;++P){for(var E=b[0],T=b[1],k=b[2],d=b[3],v=b[4],B=E,F=T,N=k,W=d,A=v,_=0;_<80;++_){var w=t.add_modulo32(t.rol32(t.add_modulo32(E,t.f(_,T,k,d),p[P](i[_]),t.K(_)),o[_]),v);E=v,v=d,d=t.rol32(k,10),k=T,T=w,w=t.add_modulo32(t.rol32(t.add_modulo32(B,t.f(79-_,F,N,W),p[P](a[_]),t.KP(_)),s[_]),A),B=A,A=W,W=t.rol32(N,10),N=F,F=w}var O=t.add_modulo32(b[1],k,W);b[1]=t.add_modulo32(b[2],d,A),b[2]=t.add_modulo32(b[3],v,B),b[3]=t.add_modulo32(b[4],E,F),b[4]=t.add_modulo32(b[0],T,N),b[0]=O}var se=new ArrayBuffer(20),he=new DataView(se);return b.forEach(function(Y,Z){return he.setUint32(Z*4,Y,!0)}),se}}]),t}(),Bo={RIPEMD160:Co};(function(t){var e=q&&q.__read||function(x,M){var I=typeof Symbol=="function"&&x[Symbol.iterator];if(!I)return x;var z=I.call(x),U,$=[],K;try{for(;(M===void 0||M-- >0)&&!(U=z.next()).done;)$.push(U.value)}catch(Q){K={error:Q}}finally{try{U&&!U.done&&(I=z.return)&&I.call(z)}finally{if(K)throw K.error}}return $},r=q&&q.__spread||function(){for(var x=[],M=0;M<arguments.length;M++)x=x.concat(e(arguments[M]));return x},n=q&&q.__values||function(x){var M=typeof Symbol=="function"&&x[Symbol.iterator],I=0;return M?M.call(x):{next:function(){return x&&I>=x.length&&(x=void 0),{value:x&&x[I++],done:!x}}}};Object.defineProperty(t,"__esModule",{value:!0});var i=Bo.RIPEMD160.hash,a="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function s(){for(var x=Array(256).fill(-1),M=0;M<a.length;++M)x[a.charCodeAt(M)]=M;return x}var u=s();function l(){for(var x=Array(256).fill(-1),M=0;M<o.length;++M)x[o.charCodeAt(M)]=M;return x[61]=0,x}var h=l();function p(x){return(x[x.length-1]&128)!==0}t.isNegative=p;function b(x){for(var M=1,I=0;I<x.length;++I){var z=(~x[I]&255)+M;x[I]=z,M=z>>8}}t.negate=b;function P(x,M){for(var I=new Uint8Array(x),z=0;z<M.length;++z){var U=M.charCodeAt(z);if(U<48||U>57)throw new Error("invalid number");for(var $=U-48,K=0;K<x;++K){var Q=I[K]*10+$;I[K]=Q,$=Q>>8}if($)throw new Error("number is out of range")}return I}t.decimalToBinary=P;function E(x,M){var I=M[0]==="-";I&&(M=M.substr(1));var z=P(x,M);if(I){if(b(z),!p(z))throw new Error("number is out of range")}else if(p(z))throw new Error("number is out of range");return z}t.signedDecimalToBinary=E;function T(x,M){M===void 0&&(M=1);for(var I=Array(M).fill(48),z=x.length-1;z>=0;--z){for(var U=x[z],$=0;$<I.length;++$){var K=(I[$]-48<<8)+U;I[$]=48+K%10,U=K/10|0}for(;U;)I.push(48+U%10),U=U/10|0}return I.reverse(),String.fromCharCode.apply(String,r(I))}t.binaryToDecimal=T;function k(x,M){if(M===void 0&&(M=1),p(x)){var I=x.slice();return b(I),"-"+T(I,M)}return T(x,M)}t.signedBinaryToDecimal=k;function d(x,M){for(var I=new Uint8Array(x),z=0;z<M.length;++z){var U=u[M.charCodeAt(z)];if(U<0)throw new Error("invalid base-58 value");for(var $=0;$<x;++$){var K=I[$]*58+U;I[$]=K,U=K>>8}if(U)throw new Error("base-58 value is out of range")}return I.reverse(),I}t.base58ToBinary=d;function v(x,M){var I,z,U,$,K=[];try{for(var Q=n(x),ue=Q.next();!ue.done;ue=Q.next()){for(var de=ue.value,y=de,g=0;g<K.length;++g){var m=(u[K[g]]<<8)+y;K[g]=a.charCodeAt(m%58),y=m/58|0}for(;y;)K.push(a.charCodeAt(y%58)),y=y/58|0}}catch(f){I={error:f}}finally{try{ue&&!ue.done&&(z=Q.return)&&z.call(Q)}finally{if(I)throw I.error}}try{for(var C=n(x),L=C.next();!L.done;L=C.next()){var de=L.value;if(de)break;K.push(49)}}catch(f){U={error:f}}finally{try{L&&!L.done&&($=C.return)&&$.call(C)}finally{if(U)throw U.error}}return K.reverse(),String.fromCharCode.apply(String,r(K))}t.binaryToBase58=v;function B(x){var M=x.length;if((M&3)===1&&x[M-1]==="="&&(M-=1),M&3)throw new Error("base-64 value is not padded correctly");var I=M>>2,z=I*3;M>0&&x[M-1]==="="&&(x[M-2]==="="?z-=2:z-=1);for(var U=new Uint8Array(z),$=0;$<I;++$){var K=h[x.charCodeAt($*4+0)],Q=h[x.charCodeAt($*4+1)],ue=h[x.charCodeAt($*4+2)],de=h[x.charCodeAt($*4+3)];U[$*3+0]=K<<2|Q>>4,$*3+1<z&&(U[$*3+1]=(Q&15)<<4|ue>>2),$*3+2<z&&(U[$*3+2]=(ue&3)<<6|de)}return U}t.base64ToBinary=B;var F;(function(x){x[x.k1=0]="k1",x[x.r1=1]="r1"})(F=t.KeyType||(t.KeyType={})),t.publicKeyDataSize=33,t.privateKeyDataSize=32,t.signatureDataSize=65;function N(x,M){for(var I=new Uint8Array(x.length+M.length),z=0;z<x.length;++z)I[z]=x[z];for(var z=0;z<M.length;++z)I[x.length+z]=M.charCodeAt(z);return i(I)}function W(x,M,I,z){var U=d(I+4,x),$={type:M,data:new Uint8Array(U.buffer,0,I)},K=new Uint8Array(N($.data,z));if(K[0]!==U[I+0]||K[1]!==U[I+1]||K[2]!==U[I+2]||K[3]!==U[I+3])throw new Error("checksum doesn't match");return $}function A(x,M,I){for(var z=new Uint8Array(N(x.data,M)),U=new Uint8Array(x.data.length+4),$=0;$<x.data.length;++$)U[$]=x.data[$];for(var $=0;$<4;++$)U[$+x.data.length]=z[$];return I+v(U)}function _(x){if(typeof x!="string")throw new Error("expected string containing public key");if(x.substr(0,3)==="EOS"){for(var M=d(t.publicKeyDataSize+4,x.substr(3)),I={type:F.k1,data:new Uint8Array(t.publicKeyDataSize)},z=0;z<t.publicKeyDataSize;++z)I.data[z]=M[z];var U=new Uint8Array(i(I.data));if(U[0]!==M[t.publicKeyDataSize]||U[1]!==M[34]||U[2]!==M[35]||U[3]!==M[36])throw new Error("checksum doesn't match");return I}else{if(x.substr(0,7)==="PUB_K1_")return W(x.substr(7),F.k1,t.publicKeyDataSize,"K1");if(x.substr(0,7)==="PUB_R1_")return W(x.substr(7),F.r1,t.publicKeyDataSize,"R1");throw new Error("unrecognized public key format")}}t.stringToPublicKey=_;function w(x){if(x.type===F.k1&&x.data.length===t.publicKeyDataSize)return A(x,"K1","PUB_K1_");if(x.type===F.r1&&x.data.length===t.publicKeyDataSize)return A(x,"R1","PUB_R1_");throw new Error("unrecognized public key format")}t.publicKeyToString=w;function O(x){return x.substr(0,3)==="EOS"?w(_(x)):x}t.convertLegacyPublicKey=O;function se(x){return x.map(O)}t.convertLegacyPublicKeys=se;function he(x){if(typeof x!="string")throw new Error("expected string containing private key");if(x.substr(0,7)==="PVT_R1_")return W(x.substr(7),F.r1,t.privateKeyDataSize,"R1");throw new Error("unrecognized private key format")}t.stringToPrivateKey=he;function Y(x){if(x.type===F.r1)return A(x,"R1","PVT_R1_");throw new Error("unrecognized private key format")}t.privateKeyToString=Y;function Z(x){if(typeof x!="string")throw new Error("expected string containing signature");if(x.substr(0,7)==="SIG_K1_")return W(x.substr(7),F.k1,t.signatureDataSize,"K1");if(x.substr(0,7)==="SIG_R1_")return W(x.substr(7),F.r1,t.signatureDataSize,"R1");throw new Error("unrecognized signature format")}t.stringToSignature=Z;function ne(x){if(x.type===F.k1)return A(x,"K1","SIG_K1_");if(x.type===F.r1)return A(x,"R1","SIG_R1_");throw new Error("unrecognized signature format")}t.signatureToString=ne})(Kt);Kt.default;var an=q&&q.__assign||function(){return an=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},an.apply(this,arguments)},Ci=q&&q.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a},Kn=q&&q.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Ci(arguments[e]));return t},Ne=q&&q.__values||function(t){var e=typeof Symbol=="function"&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}};Object.defineProperty(re,"__esModule",{value:!0});var fe=Kt,vn=function(){function t(e){e===void 0&&(e={}),this.skippedBinaryExtension=!1,this.options=e}return t}();re.SerializerState=vn;var wn=function(){function t(e){var r=e===void 0?{}:e,n=r.textEncoder,i=r.textDecoder,a=r.array;this.readPos=0,this.array=a||new Uint8Array(1024),this.length=a?a.length:0,this.textEncoder=n||new TextEncoder,this.textDecoder=i||new TextDecoder("utf-8",{fatal:!0})}return t.prototype.reserve=function(e){if(!(this.length+e<=this.array.length)){for(var r=this.array.length;this.length+e>r;)r=Math.ceil(r*1.5);var n=new Uint8Array(r);n.set(this.array),this.array=n}},t.prototype.haveReadData=function(){return this.readPos<this.length},t.prototype.restartRead=function(){this.readPos=0},t.prototype.asUint8Array=function(){return new Uint8Array(this.array.buffer,this.array.byteOffset,this.length)},t.prototype.pushArray=function(e){this.reserve(e.length),this.array.set(e,this.length),this.length+=e.length},t.prototype.push=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.pushArray(e)},t.prototype.get=function(){if(this.readPos<this.length)return this.array[this.readPos++];throw new Error("Read past end of buffer")},t.prototype.pushUint8ArrayChecked=function(e,r){if(e.length!==r)throw new Error("Binary data has incorrect size");this.pushArray(e)},t.prototype.getUint8Array=function(e){if(this.readPos+e>this.length)throw new Error("Read past end of buffer");var r=new Uint8Array(this.array.buffer,this.array.byteOffset+this.readPos,e);return this.readPos+=e,r},t.prototype.pushUint16=function(e){this.push(e>>0&255,e>>8&255)},t.prototype.getUint16=function(){var e=0;return e|=this.get()<<0,e|=this.get()<<8,e},t.prototype.pushUint32=function(e){this.push(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},t.prototype.getUint32=function(){var e=0;return e|=this.get()<<0,e|=this.get()<<8,e|=this.get()<<16,e|=this.get()<<24,e>>>0},t.prototype.pushNumberAsUint64=function(e){this.pushUint32(e>>>0),this.pushUint32(Math.floor(e/4294967296)>>>0)},t.prototype.getUint64AsNumber=function(){var e=this.getUint32(),r=this.getUint32();return(r>>>0)*4294967296+(e>>>0)},t.prototype.pushVaruint32=function(e){for(;;)if(e>>>7)this.push(128|e&127),e=e>>>7;else{this.push(e);break}},t.prototype.getVaruint32=function(){for(var e=0,r=0;;){var n=this.get();if(e|=(n&127)<<r,r+=7,!(n&128))break}return e>>>0},t.prototype.pushVarint32=function(e){this.pushVaruint32(e<<1^e>>31)},t.prototype.getVarint32=function(){var e=this.getVaruint32();return e&1?~e>>1|2147483648:e>>>1},t.prototype.pushFloat32=function(e){this.pushArray(new Uint8Array(new Float32Array([e]).buffer))},t.prototype.getFloat32=function(){return new Float32Array(this.getUint8Array(4).slice().buffer)[0]},t.prototype.pushFloat64=function(e){this.pushArray(new Uint8Array(new Float64Array([e]).buffer))},t.prototype.getFloat64=function(){return new Float64Array(this.getUint8Array(8).slice().buffer)[0]},t.prototype.pushName=function(e){if(typeof e!="string")throw new Error("Expected string containing name");function r(u){return u>=97&&u<=122?u-97+6:u>=49&&u<=53?u-49+1:0}for(var n=new Uint8Array(8),i=63,a=0;a<e.length;++a){var o=r(e.charCodeAt(a));i<5&&(o=o<<1);for(var s=4;s>=0;--s)i>=0&&(n[Math.floor(i/8)]|=(o>>s&1)<<i%8,--i)}this.pushArray(n)},t.prototype.getName=function(){for(var e=this.getUint8Array(8),r="",n=63;n>=0;){for(var i=0,a=0;a<5;++a)n>=0&&(i=i<<1|e[Math.floor(n/8)]>>n%8&1,--n);i>=6?r+=String.fromCharCode(i+97-6):i>=1?r+=String.fromCharCode(i+49-1):r+="."}for(;r.endsWith(".");)r=r.substr(0,r.length-1);return r},t.prototype.pushBytes=function(e){this.pushVaruint32(e.length),this.pushArray(e)},t.prototype.getBytes=function(){return this.getUint8Array(this.getVaruint32())},t.prototype.pushString=function(e){this.pushBytes(this.textEncoder.encode(e))},t.prototype.getString=function(){return this.textDecoder.decode(this.getBytes())},t.prototype.pushSymbolCode=function(e){if(typeof e!="string")throw new Error("Expected string containing symbol_code");var r=[];for(r.push.apply(r,Kn(this.textEncoder.encode(e)));r.length<8;)r.push(0);this.pushArray(r.slice(0,8))},t.prototype.getSymbolCode=function(){var e=this.getUint8Array(8),r;for(r=0;r<e.length&&e[r];++r);var n=this.textDecoder.decode(new Uint8Array(e.buffer,e.byteOffset,r));return n},t.prototype.pushSymbol=function(e){var r=e.name,n=e.precision,i=[n&255];for(i.push.apply(i,Kn(this.textEncoder.encode(r)));i.length<8;)i.push(0);this.pushArray(i.slice(0,8))},t.prototype.getSymbol=function(){var e=this.get(),r=this.getUint8Array(7),n;for(n=0;n<r.length&&r[n];++n);var i=this.textDecoder.decode(new Uint8Array(r.buffer,r.byteOffset,n));return{name:i,precision:e}},t.prototype.pushAsset=function(e){if(typeof e!="string")throw new Error("Expected string containing asset");e=e.trim();var r=0,n="",i=0;e[r]==="-"&&(n+="-",++r);for(var a=!1;r<e.length&&e.charCodeAt(r)>=48&&e.charCodeAt(r)<=57;)a=!0,n+=e[r],++r;if(!a)throw new Error("Asset must begin with a number");if(e[r]===".")for(++r;r<e.length&&e.charCodeAt(r)>=48&&e.charCodeAt(r)<=57;)n+=e[r],++i,++r;var o=e.substr(r).trim();this.pushArray(fe.signedDecimalToBinary(8,n)),this.pushSymbol({name:o,precision:i})},t.prototype.getAsset=function(){var e=this.getUint8Array(8),r=this.getSymbol(),n=r.name,i=r.precision,a=fe.signedBinaryToDecimal(e,i+1);return i&&(a=a.substr(0,a.length-i)+"."+a.substr(a.length-i)),a+" "+n},t.prototype.pushPublicKey=function(e){var r=fe.stringToPublicKey(e);this.push(r.type),this.pushArray(r.data)},t.prototype.getPublicKey=function(){var e=this.get(),r=this.getUint8Array(fe.publicKeyDataSize);return fe.publicKeyToString({type:e,data:r})},t.prototype.pushPrivateKey=function(e){var r=fe.stringToPrivateKey(e);this.push(r.type),this.pushArray(r.data)},t.prototype.getPrivateKey=function(){var e=this.get(),r=this.getUint8Array(fe.privateKeyDataSize);return fe.privateKeyToString({type:e,data:r})},t.prototype.pushSignature=function(e){var r=fe.stringToSignature(e);this.push(r.type),this.pushArray(r.data)},t.prototype.getSignature=function(){var e=this.get(),r=this.getUint8Array(fe.signatureDataSize);return fe.signatureToString({type:e,data:r})},t}();re.SerialBuffer=wn;function Fo(t){return t.startsWith("eosio::abi/1.")}re.supportedAbiVersion=Fo;function bn(t){var e=Date.parse(t);if(Number.isNaN(e))throw new Error("Invalid time format");return e}function Bi(t){return Math.round(bn(t+"Z")*1e3)}re.dateToTimePoint=Bi;function Fi(t){var e=new Date(t/1e3).toISOString();return e.substr(0,e.length-1)}re.timePointToDate=Fi;function _n(t){return Math.round(bn(t+"Z")/1e3)}re.dateToTimePointSec=_n;function mn(t){var e=new Date(t*1e3).toISOString();return e.substr(0,e.length-1)}re.timePointSecToDate=mn;function Di(t){return Math.round((bn(t+"Z")-9466848e5)/500)}re.dateToBlockTimestamp=Di;function Mi(t){var e=new Date(t*500+9466848e5).toISOString();return e.substr(0,e.length-1)}re.blockTimestampToDate=Mi;function Ii(t){if(typeof t!="string")throw new Error("Expected string containing symbol");var e=t.match(/^([0-9]+),([A-Z]+)$/);if(!e)throw new Error("Invalid symbol");return{name:e[2],precision:+e[1]}}re.stringToSymbol=Ii;function Li(t){var e=t.name,r=t.precision;return r+","+e}re.symbolToString=Li;function Qe(t){var e,r,n="";try{for(var i=Ne(t),a=i.next();!a.done;a=i.next()){var o=a.value;n+=("00"+o.toString(16)).slice(-2)}}catch(s){e={error:s}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return n.toUpperCase()}re.arrayToHex=Qe;function et(t){if(typeof t!="string")throw new Error("Expected string containing hex digits");if(t.length%2)throw new Error("Odd number of hex digits");for(var e=t.length/2,r=new Uint8Array(e),n=0;n<e;++n){var i=parseInt(t.substr(n*2,2),16);if(Number.isNaN(i))throw new Error("Expected hex string");r[n]=i}return r}re.hexToUint8Array=et;function Do(t,e){throw new Error("Don't know how to serialize "+this.name)}function Mo(t){throw new Error("Don't know how to deserialize "+this.name)}function Ui(t,e,r,n){r===void 0&&(r=new vn),n===void 0&&(n=!0);var i,a;if(typeof e!="object")throw new Error("expected object containing data: "+JSON.stringify(e));this.base&&this.base.serialize(t,e,r,n);try{for(var o=Ne(this.fields),s=o.next();!s.done;s=o.next()){var u=s.value;if(u.name in e){if(r.skippedBinaryExtension)throw new Error("unexpected "+this.name+"."+u.name);u.type.serialize(t,e[u.name],r,n&&u===this.fields[this.fields.length-1])}else if(n&&u.type.extensionOf)r.skippedBinaryExtension=!0;else throw new Error("missing "+this.name+"."+u.name+" (type="+u.type.name+")")}}catch(l){i={error:l}}finally{try{s&&!s.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}}function zi(t,e,r){e===void 0&&(e=new vn),r===void 0&&(r=!0);var n,i,a;this.base?a=this.base.deserialize(t,e,r):a={};try{for(var o=Ne(this.fields),s=o.next();!s.done;s=o.next()){var u=s.value;r&&u.type.extensionOf&&!t.haveReadData()?e.skippedBinaryExtension=!0:a[u.name]=u.type.deserialize(t,e,r)}}catch(l){n={error:l}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return a}function Io(t,e,r,n){if(!Array.isArray(e)||e.length!==2||typeof e[0]!="string")throw new Error('expected variant: ["type", value]');var i=this.fields.findIndex(function(a){return a.name===e[0]});if(i<0)throw new Error('type "'+e[0]+'" is not valid for variant');t.pushVaruint32(i),this.fields[i].type.serialize(t,e[1],r,n)}function Lo(t,e,r){var n=t.getVaruint32();if(n>=this.fields.length)throw new Error("type index "+n+" is not valid for variant");var i=this.fields[n];return[i.name,i.type.deserialize(t,e,r)]}function Uo(t,e,r,n){var i,a;t.pushVaruint32(e.length);try{for(var o=Ne(e),s=o.next();!s.done;s=o.next()){var u=s.value;this.arrayOf.serialize(t,u,r,!1)}}catch(l){i={error:l}}finally{try{s&&!s.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}}function zo(t,e,r){for(var n=t.getVaruint32(),i=[],a=0;a<n;++a)i.push(this.arrayOf.deserialize(t,e,!1));return i}function No(t,e,r,n){e==null?t.push(0):(t.push(1),this.optionalOf.serialize(t,e,r,n))}function Wo(t,e,r){return t.get()?this.optionalOf.deserialize(t,e,r):null}function $o(t,e,r,n){this.extensionOf.serialize(t,e,r,n)}function qo(t,e,r){return this.extensionOf.deserialize(t,e,r)}function H(t){return an({name:"<missing name>",aliasOfName:"",arrayOf:null,optionalOf:null,extensionOf:null,baseName:"",base:null,fields:[],serialize:Do,deserialize:Mo},t)}function Ke(t,e){if(Number.isNaN(+t)||Number.isNaN(+e)||typeof t!="number"&&typeof t!="string")throw new Error("Expected number");if(+t!=+e)throw new Error("Number is out of range");return+t}function jo(){var t=new Map(Object.entries({bool:H({name:"bool",serialize:function(e,r){if(typeof r!="boolean")throw new Error("Expected true or false");e.push(r?1:0)},deserialize:function(e){return!!e.get()}}),uint8:H({name:"uint8",serialize:function(e,r){e.push(Ke(r,r&255))},deserialize:function(e){return e.get()}}),int8:H({name:"int8",serialize:function(e,r){e.push(Ke(r,r<<24>>24))},deserialize:function(e){return e.get()<<24>>24}}),uint16:H({name:"uint16",serialize:function(e,r){e.pushUint16(Ke(r,r&65535))},deserialize:function(e){return e.getUint16()}}),int16:H({name:"int16",serialize:function(e,r){e.pushUint16(Ke(r,r<<16>>16))},deserialize:function(e){return e.getUint16()<<16>>16}}),uint32:H({name:"uint32",serialize:function(e,r){e.pushUint32(Ke(r,r>>>0))},deserialize:function(e){return e.getUint32()}}),uint64:H({name:"uint64",serialize:function(e,r){e.pushArray(fe.decimalToBinary(8,""+r))},deserialize:function(e){return fe.binaryToDecimal(e.getUint8Array(8))}}),int64:H({name:"int64",serialize:function(e,r){e.pushArray(fe.signedDecimalToBinary(8,""+r))},deserialize:function(e){return fe.signedBinaryToDecimal(e.getUint8Array(8))}}),int32:H({name:"int32",serialize:function(e,r){e.pushUint32(Ke(r,r|0))},deserialize:function(e){return e.getUint32()|0}}),varuint32:H({name:"varuint32",serialize:function(e,r){e.pushVaruint32(Ke(r,r>>>0))},deserialize:function(e){return e.getVaruint32()}}),varint32:H({name:"varint32",serialize:function(e,r){e.pushVarint32(Ke(r,r|0))},deserialize:function(e){return e.getVarint32()}}),uint128:H({name:"uint128",serialize:function(e,r){e.pushArray(fe.decimalToBinary(16,""+r))},deserialize:function(e){return fe.binaryToDecimal(e.getUint8Array(16))}}),int128:H({name:"int128",serialize:function(e,r){e.pushArray(fe.signedDecimalToBinary(16,""+r))},deserialize:function(e){return fe.signedBinaryToDecimal(e.getUint8Array(16))}}),float32:H({name:"float32",serialize:function(e,r){e.pushFloat32(r)},deserialize:function(e){return e.getFloat32()}}),float64:H({name:"float64",serialize:function(e,r){e.pushFloat64(r)},deserialize:function(e){return e.getFloat64()}}),float128:H({name:"float128",serialize:function(e,r){e.pushUint8ArrayChecked(et(r),16)},deserialize:function(e){return Qe(e.getUint8Array(16))}}),bytes:H({name:"bytes",serialize:function(e,r){r instanceof Uint8Array||Array.isArray(r)?e.pushBytes(r):e.pushBytes(et(r))},deserialize:function(e,r){return r&&r.options.bytesAsUint8Array?e.getBytes():Qe(e.getBytes())}}),string:H({name:"string",serialize:function(e,r){e.pushString(r)},deserialize:function(e){return e.getString()}}),name:H({name:"name",serialize:function(e,r){e.pushName(r)},deserialize:function(e){return e.getName()}}),time_point:H({name:"time_point",serialize:function(e,r){e.pushNumberAsUint64(Bi(r))},deserialize:function(e){return Fi(e.getUint64AsNumber())}}),time_point_sec:H({name:"time_point_sec",serialize:function(e,r){e.pushUint32(_n(r))},deserialize:function(e){return mn(e.getUint32())}}),block_timestamp_type:H({name:"block_timestamp_type",serialize:function(e,r){e.pushUint32(Di(r))},deserialize:function(e){return Mi(e.getUint32())}}),symbol_code:H({name:"symbol_code",serialize:function(e,r){e.pushSymbolCode(r)},deserialize:function(e){return e.getSymbolCode()}}),symbol:H({name:"symbol",serialize:function(e,r){e.pushSymbol(Ii(r))},deserialize:function(e){return Li(e.getSymbol())}}),asset:H({name:"asset",serialize:function(e,r){e.pushAsset(r)},deserialize:function(e){return e.getAsset()}}),checksum160:H({name:"checksum160",serialize:function(e,r){e.pushUint8ArrayChecked(et(r),20)},deserialize:function(e){return Qe(e.getUint8Array(20))}}),checksum256:H({name:"checksum256",serialize:function(e,r){e.pushUint8ArrayChecked(et(r),32)},deserialize:function(e){return Qe(e.getUint8Array(32))}}),checksum512:H({name:"checksum512",serialize:function(e,r){e.pushUint8ArrayChecked(et(r),64)},deserialize:function(e){return Qe(e.getUint8Array(64))}}),public_key:H({name:"public_key",serialize:function(e,r){e.pushPublicKey(r)},deserialize:function(e){return e.getPublicKey()}}),private_key:H({name:"private_key",serialize:function(e,r){e.pushPrivateKey(r)},deserialize:function(e){return e.getPrivateKey()}}),signature:H({name:"signature",serialize:function(e,r){e.pushSignature(r)},deserialize:function(e){return e.getSignature()}})}));return t.set("extended_asset",H({name:"extended_asset",baseName:"",fields:[{name:"quantity",typeName:"asset",type:t.get("asset")},{name:"contract",typeName:"name",type:t.get("name")}],serialize:Ui,deserialize:zi})),t}re.createInitialTypes=jo;function tt(t,e){var r=t.get(e);if(r&&r.aliasOfName)return tt(t,r.aliasOfName);if(r)return r;if(e.endsWith("[]"))return H({name:e,arrayOf:tt(t,e.substr(0,e.length-2)),serialize:Uo,deserialize:zo});if(e.endsWith("?"))return H({name:e,optionalOf:tt(t,e.substr(0,e.length-1)),serialize:No,deserialize:Wo});if(e.endsWith("$"))return H({name:e,extensionOf:tt(t,e.substr(0,e.length-1)),serialize:$o,deserialize:qo});throw new Error("Unknown type: "+e)}re.getType=tt;function Ko(t,e){var r,n,i,a,o,s,u,l,h,p,b=new Map(t);if(e.types)try{for(var P=Ne(e.types),E=P.next();!E.done;E=P.next()){var T=E.value,k=T.new_type_name,d=T.type;b.set(k,H({name:k,aliasOfName:d}))}}catch(U){r={error:U}}finally{try{E&&!E.done&&(n=P.return)&&n.call(P)}finally{if(r)throw r.error}}if(e.structs)try{for(var v=Ne(e.structs),B=v.next();!B.done;B=v.next()){var F=B.value,N=F.name,W=F.base,A=F.fields;b.set(N,H({name:N,baseName:W,fields:A.map(function(U){var $=U.name,K=U.type;return{name:$,typeName:K,type:null}}),serialize:Ui,deserialize:zi}))}}catch(U){i={error:U}}finally{try{B&&!B.done&&(a=v.return)&&a.call(v)}finally{if(i)throw i.error}}if(e.variants)try{for(var _=Ne(e.variants),w=_.next();!w.done;w=_.next()){var O=w.value,se=O.name,he=O.types;b.set(se,H({name:se,fields:he.map(function(U){return{name:U,typeName:U,type:null}}),serialize:Io,deserialize:Lo}))}}catch(U){o={error:U}}finally{try{w&&!w.done&&(s=_.return)&&s.call(_)}finally{if(o)throw o.error}}try{for(var Y=Ne(b),Z=Y.next();!Z.done;Z=Y.next()){var ne=Ci(Z.value,2),x=ne[0],d=ne[1];d.baseName&&(d.base=tt(b,d.baseName));try{for(var M=Ne(d.fields),I=M.next();!I.done;I=M.next()){var z=I.value;z.type=tt(b,z.typeName)}}catch($){h={error:$}}finally{try{I&&!I.done&&(p=M.return)&&p.call(M)}finally{if(h)throw h.error}}}}catch(U){u={error:U}}finally{try{Z&&!Z.done&&(l=Y.return)&&l.call(Y)}finally{if(u)throw u.error}}return b}re.getTypesFromAbi=Ko;function Ho(t,e){return{expiration:mn(_n(t.timestamp)+e),ref_block_num:t.block_num&65535,ref_block_prefix:t.ref_block_prefix}}re.transactionHeader=Ho;function Ni(t,e,r,n,i,a){var o=t.actions.get(r);if(!o)throw new Error("Unknown action "+r+" in contract "+e);var s=new wn({textEncoder:i,textDecoder:a});return o.serialize(s,n),Qe(s.asUint8Array())}re.serializeActionData=Ni;function Vo(t,e,r,n,i,a,o){return{account:e,name:r,authorization:n,data:Ni(t,e,r,i,a,o)}}re.serializeAction=Vo;function Wi(t,e,r,n,i,a){var o=t.actions.get(r);if(typeof n=="string"&&(n=et(n)),!o)throw new Error("Unknown action "+r+" in contract "+e);var s=new wn({textDecoder:a,textEncoder:i});return s.pushArray(n),o.deserialize(s)}re.deserializeActionData=Wi;function Yo(t,e,r,n,i,a,o){return{account:e,name:r,authorization:n,data:Wi(t,e,r,i,a,o)}}re.deserializeAction=Yo;var Jo="eosio::abi/1.1",Xo=[{name:"extensions_entry",base:"",fields:[{name:"tag",type:"uint16"},{name:"value",type:"bytes"}]},{name:"type_def",base:"",fields:[{name:"new_type_name",type:"string"},{name:"type",type:"string"}]},{name:"field_def",base:"",fields:[{name:"name",type:"string"},{name:"type",type:"string"}]},{name:"struct_def",base:"",fields:[{name:"name",type:"string"},{name:"base",type:"string"},{name:"fields",type:"field_def[]"}]},{name:"action_def",base:"",fields:[{name:"name",type:"name"},{name:"type",type:"string"},{name:"ricardian_contract",type:"string"}]},{name:"table_def",base:"",fields:[{name:"name",type:"name"},{name:"index_type",type:"string"},{name:"key_names",type:"string[]"},{name:"key_types",type:"string[]"},{name:"type",type:"string"}]},{name:"clause_pair",base:"",fields:[{name:"id",type:"string"},{name:"body",type:"string"}]},{name:"error_message",base:"",fields:[{name:"error_code",type:"uint64"},{name:"error_msg",type:"string"}]},{name:"variant_def",base:"",fields:[{name:"name",type:"string"},{name:"types",type:"string[]"}]},{name:"abi_def",base:"",fields:[{name:"version",type:"string"},{name:"types",type:"type_def[]"},{name:"structs",type:"struct_def[]"},{name:"actions",type:"action_def[]"},{name:"tables",type:"table_def[]"},{name:"ricardian_clauses",type:"clause_pair[]"},{name:"error_messages",type:"error_message[]"},{name:"abi_extensions",type:"extensions_entry[]"},{name:"variants",type:"variant_def[]$"}]}],Go={version:Jo,structs:Xo},Zo="eosio::abi/1.0",Qo=[{new_type_name:"account_name",type:"name"},{new_type_name:"action_name",type:"name"},{new_type_name:"permission_name",type:"name"}],es=[{name:"permission_level",base:"",fields:[{name:"actor",type:"account_name"},{name:"permission",type:"permission_name"}]},{name:"action",base:"",fields:[{name:"account",type:"account_name"},{name:"name",type:"action_name"},{name:"authorization",type:"permission_level[]"},{name:"data",type:"bytes"}]},{name:"extension",base:"",fields:[{name:"type",type:"uint16"},{name:"data",type:"bytes"}]},{name:"transaction_header",base:"",fields:[{name:"expiration",type:"time_point_sec"},{name:"ref_block_num",type:"uint16"},{name:"ref_block_prefix",type:"uint32"},{name:"max_net_usage_words",type:"varuint32"},{name:"max_cpu_usage_ms",type:"uint8"},{name:"delay_sec",type:"varuint32"}]},{name:"transaction",base:"transaction_header",fields:[{name:"context_free_actions",type:"action[]"},{name:"actions",type:"action[]"},{name:"transaction_extensions",type:"extension[]"}]}],ts={version:Zo,types:Qo,structs:es},At=q&&q.__assign||function(){return At=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},At.apply(this,arguments)},Se=q&&q.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(i,a){function o(l){try{u(n.next(l))}catch(h){a(h)}}function s(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?i(l.value):new r(function(h){h(l.value)}).then(o,s)}u((n=n.apply(t,e||[])).next())})},Re=q&&q.__generator||function(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(l){return function(h){return u([l,h])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=l[0]&2?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){r.label=l[1];break}if(l[0]===6&&r.label<a[1]){r.label=a[1],a=l;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(l);break}a[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(h){l=[6,h],i=0}finally{n=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},rs=q&&q.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&(r[n[i]]=t[n[i]]);return r},ns=q&&q.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a},is=q&&q.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(ns(arguments[e]));return t},as=q&&q.__values||function(t){var e=typeof Symbol=="function"&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}};Object.defineProperty(gn,"__esModule",{value:!0});var _e=re,os=Go,ss=ts,us=function(){function t(e){this.contracts=new Map,this.cachedAbis=new Map,this.rpc=e.rpc,this.authorityProvider=e.authorityProvider||e.rpc,this.abiProvider=e.abiProvider||e.rpc,this.signatureProvider=e.signatureProvider,this.chainId=e.chainId,this.textEncoder=e.textEncoder,this.textDecoder=e.textDecoder,this.abiTypes=_e.getTypesFromAbi(_e.createInitialTypes(),os),this.transactionTypes=_e.getTypesFromAbi(_e.createInitialTypes(),ss)}return t.prototype.rawAbiToJson=function(e){var r=new _e.SerialBuffer({textEncoder:this.textEncoder,textDecoder:this.textDecoder,array:e});if(!_e.supportedAbiVersion(r.getString()))throw new Error("Unsupported abi version");return r.restartRead(),this.abiTypes.get("abi_def").deserialize(r)},t.prototype.getCachedAbi=function(e,r){return r===void 0&&(r=!1),Se(this,void 0,void 0,function(){var n,i,a,o;return Re(this,function(s){switch(s.label){case 0:if(!r&&this.cachedAbis.get(e))return[2,this.cachedAbis.get(e)];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.abiProvider.getRawAbi(e)];case 2:return i=s.sent().abi,a=this.rawAbiToJson(i),n={rawAbi:i,abi:a},[3,4];case 3:throw o=s.sent(),o.message="fetching abi for "+e+": "+o.message,o;case 4:if(!n)throw new Error("Missing abi for "+e);return this.cachedAbis.set(e,n),[2,n]}})})},t.prototype.getAbi=function(e,r){return r===void 0&&(r=!1),Se(this,void 0,void 0,function(){return Re(this,function(n){switch(n.label){case 0:return[4,this.getCachedAbi(e,r)];case 1:return[2,n.sent().abi]}})})},t.prototype.getTransactionAbis=function(e,r){return r===void 0&&(r=!1),Se(this,void 0,void 0,function(){var n,i,a,o=this;return Re(this,function(s){return n=e.actions.map(function(u){return u.account}),i=new Set(n),a=is(i).map(function(u){return Se(o,void 0,void 0,function(){var l;return Re(this,function(h){switch(h.label){case 0:return l={accountName:u},[4,this.getCachedAbi(u,r)];case 1:return[2,(l.abi=h.sent().rawAbi,l)]}})})}),[2,Promise.all(a)]})})},t.prototype.getContract=function(e,r){return r===void 0&&(r=!1),Se(this,void 0,void 0,function(){var n,i,a,o,s,u,l,h,p,b,P;return Re(this,function(E){switch(E.label){case 0:return!r&&this.contracts.get(e)?[2,this.contracts.get(e)]:[4,this.getAbi(e,r)];case 1:a=E.sent(),o=_e.getTypesFromAbi(_e.createInitialTypes(),a),s=new Map;try{for(u=as(a.actions),l=u.next();!l.done;l=u.next())h=l.value,p=h.name,b=h.type,s.set(p,_e.getType(o,b))}catch(T){n={error:T}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}return P={types:o,actions:s},this.contracts.set(e,P),[2,P]}})})},t.prototype.serialize=function(e,r,n){this.transactionTypes.get(r).serialize(e,n)},t.prototype.deserialize=function(e,r){return this.transactionTypes.get(r).deserialize(e)},t.prototype.serializeTransaction=function(e){var r=new _e.SerialBuffer({textEncoder:this.textEncoder,textDecoder:this.textDecoder});return this.serialize(r,"transaction",At({max_net_usage_words:0,max_cpu_usage_ms:0,delay_sec:0,context_free_actions:[],actions:[],transaction_extensions:[]},e)),r.asUint8Array()},t.prototype.deserializeTransaction=function(e){var r=new _e.SerialBuffer({textEncoder:this.textEncoder,textDecoder:this.textDecoder});return r.pushArray(e),this.deserialize(r,"transaction")},t.prototype.serializeActions=function(e){return Se(this,void 0,void 0,function(){var r=this;return Re(this,function(n){switch(n.label){case 0:return[4,Promise.all(e.map(function(i){var a=i.account,o=i.name,s=i.authorization,u=i.data;return Se(r,void 0,void 0,function(){var l;return Re(this,function(h){switch(h.label){case 0:return[4,this.getContract(a)];case 1:return l=h.sent(),[2,_e.serializeAction(l,a,o,s,u,this.textEncoder,this.textDecoder)]}})})}))];case 1:return[2,n.sent()]}})})},t.prototype.deserializeActions=function(e){return Se(this,void 0,void 0,function(){var r=this;return Re(this,function(n){switch(n.label){case 0:return[4,Promise.all(e.map(function(i){var a=i.account,o=i.name,s=i.authorization,u=i.data;return Se(r,void 0,void 0,function(){var l;return Re(this,function(h){switch(h.label){case 0:return[4,this.getContract(a)];case 1:return l=h.sent(),[2,_e.deserializeAction(l,a,o,s,u,this.textEncoder,this.textDecoder)]}})})}))];case 1:return[2,n.sent()]}})})},t.prototype.deserializeTransactionWithActions=function(e){return Se(this,void 0,void 0,function(){var r,n;return Re(this,function(i){switch(i.label){case 0:return typeof e=="string"&&(e=_e.hexToUint8Array(e)),r=this.deserializeTransaction(e),[4,this.deserializeActions(r.actions)];case 1:return n=i.sent(),[2,At({},r,{actions:n})]}})})},t.prototype.transact=function(e,r){var n=r===void 0?{}:r,i=n.broadcast,a=i===void 0?!0:i,o=n.sign,s=o===void 0?!0:o,u=n.blocksBehind,l=n.expireSeconds;return Se(this,void 0,void 0,function(){var h,p,b,P,E,T,k,d,v;return Re(this,function(B){switch(B.label){case 0:return this.chainId?[3,2]:[4,this.rpc.get_info()];case 1:h=B.sent(),this.chainId=h.chain_id,B.label=2;case 2:return typeof u=="number"&&l?h?[3,4]:[4,this.rpc.get_info()]:[3,6];case 3:h=B.sent(),B.label=4;case 4:return[4,this.rpc.get_block(h.head_block_num-u)];case 5:p=B.sent(),e=At({},_e.transactionHeader(p,l),e),B.label=6;case 6:if(!this.hasRequiredTaposFields(e))throw new Error("Required configuration or TAPOS fields are not present");return[4,this.getTransactionAbis(e)];case 7:return b=B.sent(),P=[{},e],E={},[4,this.serializeActions(e.actions)];case 8:return e=At.apply(void 0,P.concat([(E.actions=B.sent(),E)])),T=this.serializeTransaction(e),k={serializedTransaction:T,signatures:[]},s?[4,this.signatureProvider.getAvailableKeys()]:[3,12];case 9:return d=B.sent(),[4,this.authorityProvider.getRequiredKeys({transaction:e,availableKeys:d})];case 10:return v=B.sent(),[4,this.signatureProvider.sign({chainId:this.chainId,requiredKeys:v,serializedTransaction:T,abis:b})];case 11:k=B.sent(),B.label=12;case 12:return a?[2,this.pushSignedTransaction(k)]:[2,k]}})})},t.prototype.pushSignedTransaction=function(e){var r=e.signatures,n=e.serializedTransaction;return Se(this,void 0,void 0,function(){return Re(this,function(i){return[2,this.rpc.push_transaction({signatures:r,serializedTransaction:n})]})})},t.prototype.hasRequiredTaposFields=function(e){var r=e.expiration,n=e.ref_block_num,i=e.ref_block_prefix;return rs(e,["expiration","ref_block_num","ref_block_prefix"]),!!(r&&n&&i)},t}();gn.Api=us;var $i={};Object.defineProperty($i,"__esModule",{value:!0});var xn={},hr={},fs=q&&q.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(hr,"__esModule",{value:!0});var ls=function(t){fs(e,t);function e(r){var n=this;return r.error&&r.error.details&&r.error.details.length&&r.error.details[0].message?n=t.call(this,r.error.details[0].message)||this:r.processed&&r.processed.except&&r.processed.except.message?n=t.call(this,r.processed.except.message)||this:n=t.call(this,r.message)||this,Object.setPrototypeOf(n,e.prototype),n.json=r,n}return e}(Error);hr.RpcError=ls;var ae=q&&q.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(i,a){function o(l){try{u(n.next(l))}catch(h){a(h)}}function s(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?i(l.value):new r(function(h){h(l.value)}).then(o,s)}u((n=n.apply(t,e||[])).next())})},oe=q&&q.__generator||function(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(l){return function(h){return u([l,h])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=l[0]&2?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){r.label=l[1];break}if(l[0]===6&&r.label<a[1]){r.label=a[1],a=l;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(l);break}a[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(h){l=[6,h],i=0}finally{n=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},cs=q&&q.__values||function(t){var e=typeof Symbol=="function"&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}};Object.defineProperty(xn,"__esModule",{value:!0});var Hn=Kt,Vn=hr;function hs(t){var e,r,n="";try{for(var i=cs(t),a=i.next();!a.done;a=i.next()){var o=a.value;n+=("00"+o.toString(16)).slice(-2)}}catch(s){e={error:s}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return n}var ds=function(){function t(e,r){r===void 0&&(r={}),this.endpoint=e,r.fetch?this.fetchBuiltin=r.fetch:this.fetchBuiltin=q.fetch}return t.prototype.fetch=function(e,r){return ae(this,void 0,void 0,function(){var n,i,a,o;return oe(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),a=this.fetchBuiltin,[4,a(this.endpoint+e,{body:JSON.stringify(r),method:"POST"})];case 1:return n=s.sent(),[4,n.json()];case 2:if(i=s.sent(),i.processed&&i.processed.except)throw new Vn.RpcError(i);return[3,4];case 3:throw o=s.sent(),o.isFetchError=!0,o;case 4:if(!n.ok)throw new Vn.RpcError(i);return[2,i]}})})},t.prototype.get_abi=function(e){return ae(this,void 0,void 0,function(){return oe(this,function(r){switch(r.label){case 0:return[4,this.fetch("/v1/chain/get_abi",{account_name:e})];case 1:return[2,r.sent()]}})})},t.prototype.get_account=function(e){return ae(this,void 0,void 0,function(){return oe(this,function(r){switch(r.label){case 0:return[4,this.fetch("/v1/chain/get_account",{account_name:e})];case 1:return[2,r.sent()]}})})},t.prototype.get_block_header_state=function(e){return ae(this,void 0,void 0,function(){return oe(this,function(r){switch(r.label){case 0:return[4,this.fetch("/v1/chain/get_block_header_state",{block_num_or_id:e})];case 1:return[2,r.sent()]}})})},t.prototype.get_block=function(e){return ae(this,void 0,void 0,function(){return oe(this,function(r){switch(r.label){case 0:return[4,this.fetch("/v1/chain/get_block",{block_num_or_id:e})];case 1:return[2,r.sent()]}})})},t.prototype.get_code=function(e){return ae(this,void 0,void 0,function(){return oe(this,function(r){switch(r.label){case 0:return[4,this.fetch("/v1/chain/get_code",{account_name:e})];case 1:return[2,r.sent()]}})})},t.prototype.get_currency_balance=function(e,r,n){return n===void 0&&(n=null),ae(this,void 0,void 0,function(){return oe(this,function(i){switch(i.label){case 0:return[4,this.fetch("/v1/chain/get_currency_balance",{code:e,account:r,symbol:n})];case 1:return[2,i.sent()]}})})},t.prototype.get_currency_stats=function(e,r){return ae(this,void 0,void 0,function(){return oe(this,function(n){switch(n.label){case 0:return[4,this.fetch("/v1/chain/get_currency_stats",{code:e,symbol:r})];case 1:return[2,n.sent()]}})})},t.prototype.get_info=function(){return ae(this,void 0,void 0,function(){return oe(this,function(e){switch(e.label){case 0:return[4,this.fetch("/v1/chain/get_info",{})];case 1:return[2,e.sent()]}})})},t.prototype.get_producer_schedule=function(){return ae(this,void 0,void 0,function(){return oe(this,function(e){switch(e.label){case 0:return[4,this.fetch("/v1/chain/get_producer_schedule",{})];case 1:return[2,e.sent()]}})})},t.prototype.get_producers=function(e,r,n){return e===void 0&&(e=!0),r===void 0&&(r=""),n===void 0&&(n=50),ae(this,void 0,void 0,function(){return oe(this,function(i){switch(i.label){case 0:return[4,this.fetch("/v1/chain/get_producers",{json:e,lower_bound:r,limit:n})];case 1:return[2,i.sent()]}})})},t.prototype.get_raw_code_and_abi=function(e){return ae(this,void 0,void 0,function(){return oe(this,function(r){switch(r.label){case 0:return[4,this.fetch("/v1/chain/get_raw_code_and_abi",{account_name:e})];case 1:return[2,r.sent()]}})})},t.prototype.getRawAbi=function(e){return ae(this,void 0,void 0,function(){var r,n;return oe(this,function(i){switch(i.label){case 0:return[4,this.get_raw_code_and_abi(e)];case 1:return r=i.sent(),n=Hn.base64ToBinary(r.abi),[2,{accountName:r.account_name,abi:n}]}})})},t.prototype.get_table_rows=function(e){var r=e.json,n=r===void 0?!0:r,i=e.code,a=e.scope,o=e.table,s=e.table_key,u=s===void 0?"":s,l=e.lower_bound,h=l===void 0?"":l,p=e.upper_bound,b=p===void 0?"":p,P=e.index_position,E=P===void 0?1:P,T=e.key_type,k=T===void 0?"":T,d=e.limit,v=d===void 0?10:d,B=e.reverse,F=B===void 0?!1:B,N=e.show_payer,W=N===void 0?!1:N;return ae(this,void 0,void 0,function(){return oe(this,function(A){switch(A.label){case 0:return[4,this.fetch("/v1/chain/get_table_rows",{json:n,code:i,scope:a,table:o,table_key:u,lower_bound:h,upper_bound:b,index_position:E,key_type:k,limit:v,reverse:F,show_payer:W})];case 1:return[2,A.sent()]}})})},t.prototype.get_table_by_scope=function(e){var r=e.code,n=e.table,i=e.lower_bound,a=i===void 0?"":i,o=e.upper_bound,s=o===void 0?"":o,u=e.limit,l=u===void 0?10:u;return ae(this,void 0,void 0,function(){return oe(this,function(h){switch(h.label){case 0:return[4,this.fetch("/v1/chain/get_table_by_scope",{code:r,table:n,lower_bound:a,upper_bound:s,limit:l})];case 1:return[2,h.sent()]}})})},t.prototype.getRequiredKeys=function(e){return ae(this,void 0,void 0,function(){var r;return oe(this,function(n){switch(n.label){case 0:return r=Hn.convertLegacyPublicKeys,[4,this.fetch("/v1/chain/get_required_keys",{transaction:e.transaction,available_keys:e.availableKeys})];case 1:return[2,r.apply(void 0,[n.sent().required_keys])]}})})},t.prototype.push_transaction=function(e){var r=e.signatures,n=e.serializedTransaction;return ae(this,void 0,void 0,function(){return oe(this,function(i){switch(i.label){case 0:return[4,this.fetch("/v1/chain/push_transaction",{signatures:r,compression:0,packed_context_free_data:"",packed_trx:hs(n)})];case 1:return[2,i.sent()]}})})},t.prototype.db_size_get=function(){return ae(this,void 0,void 0,function(){return oe(this,function(e){switch(e.label){case 0:return[4,this.fetch("/v1/db_size/get",{})];case 1:return[2,e.sent()]}})})},t.prototype.history_get_actions=function(e,r,n){return r===void 0&&(r=null),n===void 0&&(n=null),ae(this,void 0,void 0,function(){return oe(this,function(i){switch(i.label){case 0:return[4,this.fetch("/v1/history/get_actions",{account_name:e,pos:r,offset:n})];case 1:return[2,i.sent()]}})})},t.prototype.history_get_transaction=function(e,r){return r===void 0&&(r=null),ae(this,void 0,void 0,function(){return oe(this,function(n){switch(n.label){case 0:return[4,this.fetch("/v1/history/get_transaction",{id:e,block_num_hint:r})];case 1:return[2,n.sent()]}})})},t.prototype.history_get_key_accounts=function(e){return ae(this,void 0,void 0,function(){return oe(this,function(r){switch(r.label){case 0:return[4,this.fetch("/v1/history/get_key_accounts",{public_key:e})];case 1:return[2,r.sent()]}})})},t.prototype.history_get_controlled_accounts=function(e){return ae(this,void 0,void 0,function(){return oe(this,function(r){switch(r.label){case 0:return[4,this.fetch("/v1/history/get_controlled_accounts",{controlling_account:e})];case 1:return[2,r.sent()]}})})},t}();xn.JsonRpc=ds;var qi={};Object.defineProperty(qi,"__esModule",{value:!0});Object.defineProperty(Je,"__esModule",{value:!0});var ps=gn,ys=Je.Api=ps.Api,gs=$i;Je.ApiInterfaces=gs;var vs=xn,ws=Je.JsonRpc=vs.JsonRpc,bs=Kt;Je.Numeric=bs;var _s=qi;Je.RpcInterfaces=_s;var ms=hr;Je.RpcError=ms.RpcError;var xs=re;Je.Serialize=xs;var Be={},xt=null;typeof WebSocket<"u"?xt=WebSocket:typeof MozWebSocket<"u"?xt=MozWebSocket:typeof q<"u"?xt=q.WebSocket||q.MozWebSocket:typeof window<"u"?xt=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(xt=self.WebSocket||self.MozWebSocket);var ji=xt;ji.default;var on;typeof Object.create=="function"?on=function(e,r){e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:on=function(e,r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e};var Es=on,As=Object.freeze({__proto__:null,default:Es}),be=ot(As),sn={exports:{}},Rt=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},Me=[],Te=[],Ss=typeof Uint8Array<"u"?Uint8Array:Array,En=!1;function Ki(){En=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,r=t.length;e<r;++e)Me[e]=t[e],Te[t.charCodeAt(e)]=e;Te[45]=62,Te[95]=63}function Rs(t){En||Ki();var e,r,n,i,a,o,s=t.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");a=t[s-2]==="="?2:t[s-1]==="="?1:0,o=new Ss(s*3/4-a),n=a>0?s-4:s;var u=0;for(e=0,r=0;e<n;e+=4,r+=3)i=Te[t.charCodeAt(e)]<<18|Te[t.charCodeAt(e+1)]<<12|Te[t.charCodeAt(e+2)]<<6|Te[t.charCodeAt(e+3)],o[u++]=i>>16&255,o[u++]=i>>8&255,o[u++]=i&255;return a===2?(i=Te[t.charCodeAt(e)]<<2|Te[t.charCodeAt(e+1)]>>4,o[u++]=i&255):a===1&&(i=Te[t.charCodeAt(e)]<<10|Te[t.charCodeAt(e+1)]<<4|Te[t.charCodeAt(e+2)]>>2,o[u++]=i>>8&255,o[u++]=i&255),o}function Ts(t){return Me[t>>18&63]+Me[t>>12&63]+Me[t>>6&63]+Me[t&63]}function ks(t,e,r){for(var n,i=[],a=e;a<r;a+=3)n=(t[a]<<16)+(t[a+1]<<8)+t[a+2],i.push(Ts(n));return i.join("")}function Yn(t){En||Ki();for(var e,r=t.length,n=r%3,i="",a=[],o=16383,s=0,u=r-n;s<u;s+=o)a.push(ks(t,s,s+o>u?u:s+o));return n===1?(e=t[r-1],i+=Me[e>>2],i+=Me[e<<4&63],i+="=="):n===2&&(e=(t[r-2]<<8)+t[r-1],i+=Me[e>>10],i+=Me[e>>4&63],i+=Me[e<<2&63],i+="="),a.push(i),a.join("")}function dr(t,e,r,n,i){var a,o,s=i*8-n-1,u=(1<<s)-1,l=u>>1,h=-7,p=r?i-1:0,b=r?-1:1,P=t[e+p];for(p+=b,a=P&(1<<-h)-1,P>>=-h,h+=s;h>0;a=a*256+t[e+p],p+=b,h-=8);for(o=a&(1<<-h)-1,a>>=-h,h+=n;h>0;o=o*256+t[e+p],p+=b,h-=8);if(a===0)a=1-l;else{if(a===u)return o?NaN:(P?-1:1)*(1/0);o=o+Math.pow(2,n),a=a-l}return(P?-1:1)*o*Math.pow(2,a-n)}function Hi(t,e,r,n,i,a){var o,s,u,l=a*8-i-1,h=(1<<l)-1,p=h>>1,b=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,P=n?0:a-1,E=n?1:-1,T=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=h):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+p>=1?e+=b/u:e+=b*Math.pow(2,1-p),e*u>=2&&(o++,u/=2),o+p>=h?(s=0,o=h):o+p>=1?(s=(e*u-1)*Math.pow(2,i),o=o+p):(s=e*Math.pow(2,p-1)*Math.pow(2,i),o=0));i>=8;t[r+P]=s&255,P+=E,s/=256,i-=8);for(o=o<<i|s,l+=i;l>0;t[r+P]=o&255,P+=E,o/=256,l-=8);t[r+P-E]|=T*128}var Os={}.toString,Vi=Array.isArray||function(t){return Os.call(t)=="[object Array]"};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var Yi=50;S.TYPED_ARRAY_SUPPORT=Rt.TYPED_ARRAY_SUPPORT!==void 0?Rt.TYPED_ARRAY_SUPPORT:!0;var Ps=ar();function ar(){return S.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function We(t,e){if(ar()<e)throw new RangeError("Invalid typed array length");return S.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=S.prototype):(t===null&&(t=new S(e)),t.length=e),t}function S(t,e,r){if(!S.TYPED_ARRAY_SUPPORT&&!(this instanceof S))return new S(t,e,r);if(typeof t=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return An(this,t)}return Ji(this,t,e,r)}S.poolSize=8192;S._augment=function(t){return t.__proto__=S.prototype,t};function Ji(t,e,r,n){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?Fs(t,e,r,n):typeof e=="string"?Bs(t,e,r):Ds(t,e)}S.from=function(t,e,r){return Ji(null,t,e,r)};S.TYPED_ARRAY_SUPPORT&&(S.prototype.__proto__=Uint8Array.prototype,S.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&S[Symbol.species]);function Xi(t){if(typeof t!="number")throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function Cs(t,e,r,n){return Xi(e),e<=0?We(t,e):r!==void 0?typeof n=="string"?We(t,e).fill(r,n):We(t,e).fill(r):We(t,e)}S.alloc=function(t,e,r){return Cs(null,t,e,r)};function An(t,e){if(Xi(e),t=We(t,e<0?0:Sn(e)|0),!S.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}S.allocUnsafe=function(t){return An(null,t)};S.allocUnsafeSlow=function(t){return An(null,t)};function Bs(t,e,r){if((typeof r!="string"||r==="")&&(r="utf8"),!S.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=Gi(e,r)|0;t=We(t,n);var i=t.write(e,r);return i!==n&&(t=t.slice(0,i)),t}function un(t,e){var r=e.length<0?0:Sn(e.length)|0;t=We(t,r);for(var n=0;n<r;n+=1)t[n]=e[n]&255;return t}function Fs(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return r===void 0&&n===void 0?e=new Uint8Array(e):n===void 0?e=new Uint8Array(e,r):e=new Uint8Array(e,r,n),S.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=S.prototype):t=un(t,e),t}function Ds(t,e){if(Ue(e)){var r=Sn(e.length)|0;return t=We(t,r),t.length===0||e.copy(t,0,0,r),t}if(e){if(typeof ArrayBuffer<"u"&&e.buffer instanceof ArrayBuffer||"length"in e)return typeof e.length!="number"||eu(e.length)?We(t,0):un(t,e);if(e.type==="Buffer"&&Vi(e.data))return un(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function Sn(t){if(t>=ar())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+ar().toString(16)+" bytes");return t|0}function Ms(t){return+t!=t&&(t=0),S.alloc(+t)}S.isBuffer=aa;function Ue(t){return!!(t!=null&&t._isBuffer)}S.compare=function(e,r){if(!Ue(e)||!Ue(r))throw new TypeError("Arguments must be Buffers");if(e===r)return 0;for(var n=e.length,i=r.length,a=0,o=Math.min(n,i);a<o;++a)if(e[a]!==r[a]){n=e[a],i=r[a];break}return n<i?-1:i<n?1:0};S.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};S.concat=function(e,r){if(!Vi(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return S.alloc(0);var n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;var i=S.allocUnsafe(r),a=0;for(n=0;n<e.length;++n){var o=e[n];if(!Ue(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,a),a+=o.length}return i};function Gi(t,e){if(Ue(t))return t.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;typeof t!="string"&&(t=""+t);var r=t.length;if(r===0)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return or(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return ia(t).length;default:if(n)return or(t).length;e=(""+e).toLowerCase(),n=!0}}S.byteLength=Gi;function Is(t,e,r){var n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return Hs(this,e,r);case"utf8":case"utf-8":return ea(this,e,r);case"ascii":return js(this,e,r);case"latin1":case"binary":return Ks(this,e,r);case"base64":return $s(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Vs(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}S.prototype._isBuffer=!0;function rt(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}S.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<e;r+=2)rt(this,r,r+1);return this};S.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<e;r+=4)rt(this,r,r+3),rt(this,r+1,r+2);return this};S.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<e;r+=8)rt(this,r,r+7),rt(this,r+1,r+6),rt(this,r+2,r+5),rt(this,r+3,r+4);return this};S.prototype.toString=function(){var e=this.length|0;return e===0?"":arguments.length===0?ea(this,0,e):Is.apply(this,arguments)};S.prototype.equals=function(e){if(!Ue(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:S.compare(this,e)===0};S.prototype.inspect=function(){var e="",r=Yi;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"};S.prototype.compare=function(e,r,n,i,a){if(!Ue(e))throw new TypeError("Argument must be a Buffer");if(r===void 0&&(r=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),a===void 0&&(a=this.length),r<0||n>e.length||i<0||a>this.length)throw new RangeError("out of range index");if(i>=a&&r>=n)return 0;if(i>=a)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,i>>>=0,a>>>=0,this===e)return 0;for(var o=a-i,s=n-r,u=Math.min(o,s),l=this.slice(i,a),h=e.slice(r,n),p=0;p<u;++p)if(l[p]!==h[p]){o=l[p],s=h[p];break}return o<s?-1:s<o?1:0};function Zi(t,e,r,n,i){if(t.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0)if(i)r=0;else return-1;if(typeof e=="string"&&(e=S.from(e,n)),Ue(e))return e.length===0?-1:Jn(t,e,r,n,i);if(typeof e=="number")return e=e&255,S.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):Jn(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function Jn(t,e,r,n,i){var a=1,o=t.length,s=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(t.length<2||e.length<2)return-1;a=2,o/=2,s/=2,r/=2}function u(P,E){return a===1?P[E]:P.readUInt16BE(E*a)}var l;if(i){var h=-1;for(l=r;l<o;l++)if(u(t,l)===u(e,h===-1?0:l-h)){if(h===-1&&(h=l),l-h+1===s)return h*a}else h!==-1&&(l-=l-h),h=-1}else for(r+s>o&&(r=o-s),l=r;l>=0;l--){for(var p=!0,b=0;b<s;b++)if(u(t,l+b)!==u(e,b)){p=!1;break}if(p)return l}return-1}S.prototype.includes=function(e,r,n){return this.indexOf(e,r,n)!==-1};S.prototype.indexOf=function(e,r,n){return Zi(this,e,r,n,!0)};S.prototype.lastIndexOf=function(e,r,n){return Zi(this,e,r,n,!1)};function Ls(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var a=e.length;if(a%2!==0)throw new TypeError("Invalid hex string");n>a/2&&(n=a/2);for(var o=0;o<n;++o){var s=parseInt(e.substr(o*2,2),16);if(isNaN(s))return o;t[r+o]=s}return o}function Us(t,e,r,n){return gr(or(e,t.length-r),t,r,n)}function Qi(t,e,r,n){return gr(Zs(e),t,r,n)}function zs(t,e,r,n){return Qi(t,e,r,n)}function Ns(t,e,r,n){return gr(ia(e),t,r,n)}function Ws(t,e,r,n){return gr(Qs(e,t.length-r),t,r,n)}S.prototype.write=function(e,r,n,i){if(r===void 0)i="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")i=r,n=this.length,r=0;else if(isFinite(r))r=r|0,isFinite(n)?(n=n|0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var a=this.length-r;if((n===void 0||n>a)&&(n=a),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return Ls(this,e,r,n);case"utf8":case"utf-8":return Us(this,e,r,n);case"ascii":return Qi(this,e,r,n);case"latin1":case"binary":return zs(this,e,r,n);case"base64":return Ns(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ws(this,e,r,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}};S.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function $s(t,e,r){return e===0&&r===t.length?Yn(t):Yn(t.slice(e,r))}function ea(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var a=t[i],o=null,s=a>239?4:a>223?3:a>191?2:1;if(i+s<=r){var u,l,h,p;switch(s){case 1:a<128&&(o=a);break;case 2:u=t[i+1],(u&192)===128&&(p=(a&31)<<6|u&63,p>127&&(o=p));break;case 3:u=t[i+1],l=t[i+2],(u&192)===128&&(l&192)===128&&(p=(a&15)<<12|(u&63)<<6|l&63,p>2047&&(p<55296||p>57343)&&(o=p));break;case 4:u=t[i+1],l=t[i+2],h=t[i+3],(u&192)===128&&(l&192)===128&&(h&192)===128&&(p=(a&15)<<18|(u&63)<<12|(l&63)<<6|h&63,p>65535&&p<1114112&&(o=p))}}o===null?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),i+=s}return qs(n)}var Xn=4096;function qs(t){var e=t.length;if(e<=Xn)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=Xn));return r}function js(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]&127);return n}function Ks(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function Hs(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",a=e;a<r;++a)i+=Gs(t[a]);return i}function Vs(t,e,r){for(var n=t.slice(e,r),i="",a=0;a<n.length;a+=2)i+=String.fromCharCode(n[a]+n[a+1]*256);return i}S.prototype.slice=function(e,r){var n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);var i;if(S.TYPED_ARRAY_SUPPORT)i=this.subarray(e,r),i.__proto__=S.prototype;else{var a=r-e;i=new S(a,void 0);for(var o=0;o<a;++o)i[o]=this[o+e]}return i};function ce(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}S.prototype.readUIntLE=function(e,r,n){e=e|0,r=r|0,n||ce(e,r,this.length);for(var i=this[e],a=1,o=0;++o<r&&(a*=256);)i+=this[e+o]*a;return i};S.prototype.readUIntBE=function(e,r,n){e=e|0,r=r|0,n||ce(e,r,this.length);for(var i=this[e+--r],a=1;r>0&&(a*=256);)i+=this[e+--r]*a;return i};S.prototype.readUInt8=function(e,r){return r||ce(e,1,this.length),this[e]};S.prototype.readUInt16LE=function(e,r){return r||ce(e,2,this.length),this[e]|this[e+1]<<8};S.prototype.readUInt16BE=function(e,r){return r||ce(e,2,this.length),this[e]<<8|this[e+1]};S.prototype.readUInt32LE=function(e,r){return r||ce(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};S.prototype.readUInt32BE=function(e,r){return r||ce(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};S.prototype.readIntLE=function(e,r,n){e=e|0,r=r|0,n||ce(e,r,this.length);for(var i=this[e],a=1,o=0;++o<r&&(a*=256);)i+=this[e+o]*a;return a*=128,i>=a&&(i-=Math.pow(2,8*r)),i};S.prototype.readIntBE=function(e,r,n){e=e|0,r=r|0,n||ce(e,r,this.length);for(var i=r,a=1,o=this[e+--i];i>0&&(a*=256);)o+=this[e+--i]*a;return a*=128,o>=a&&(o-=Math.pow(2,8*r)),o};S.prototype.readInt8=function(e,r){return r||ce(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};S.prototype.readInt16LE=function(e,r){r||ce(e,2,this.length);var n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};S.prototype.readInt16BE=function(e,r){r||ce(e,2,this.length);var n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};S.prototype.readInt32LE=function(e,r){return r||ce(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};S.prototype.readInt32BE=function(e,r){return r||ce(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};S.prototype.readFloatLE=function(e,r){return r||ce(e,4,this.length),dr(this,e,!0,23,4)};S.prototype.readFloatBE=function(e,r){return r||ce(e,4,this.length),dr(this,e,!1,23,4)};S.prototype.readDoubleLE=function(e,r){return r||ce(e,8,this.length),dr(this,e,!0,52,8)};S.prototype.readDoubleBE=function(e,r){return r||ce(e,8,this.length),dr(this,e,!1,52,8)};function me(t,e,r,n,i,a){if(!Ue(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<a)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}S.prototype.writeUIntLE=function(e,r,n,i){if(e=+e,r=r|0,n=n|0,!i){var a=Math.pow(2,8*n)-1;me(this,e,r,n,a,0)}var o=1,s=0;for(this[r]=e&255;++s<n&&(o*=256);)this[r+s]=e/o&255;return r+n};S.prototype.writeUIntBE=function(e,r,n,i){if(e=+e,r=r|0,n=n|0,!i){var a=Math.pow(2,8*n)-1;me(this,e,r,n,a,0)}var o=n-1,s=1;for(this[r+o]=e&255;--o>=0&&(s*=256);)this[r+o]=e/s&255;return r+n};S.prototype.writeUInt8=function(e,r,n){return e=+e,r=r|0,n||me(this,e,r,1,255,0),S.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[r]=e&255,r+1};function pr(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,a=Math.min(t.length-r,2);i<a;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>(n?i:1-i)*8}S.prototype.writeUInt16LE=function(e,r,n){return e=+e,r=r|0,n||me(this,e,r,2,65535,0),S.TYPED_ARRAY_SUPPORT?(this[r]=e&255,this[r+1]=e>>>8):pr(this,e,r,!0),r+2};S.prototype.writeUInt16BE=function(e,r,n){return e=+e,r=r|0,n||me(this,e,r,2,65535,0),S.TYPED_ARRAY_SUPPORT?(this[r]=e>>>8,this[r+1]=e&255):pr(this,e,r,!1),r+2};function yr(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,a=Math.min(t.length-r,4);i<a;++i)t[r+i]=e>>>(n?i:3-i)*8&255}S.prototype.writeUInt32LE=function(e,r,n){return e=+e,r=r|0,n||me(this,e,r,4,4294967295,0),S.TYPED_ARRAY_SUPPORT?(this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255):yr(this,e,r,!0),r+4};S.prototype.writeUInt32BE=function(e,r,n){return e=+e,r=r|0,n||me(this,e,r,4,4294967295,0),S.TYPED_ARRAY_SUPPORT?(this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255):yr(this,e,r,!1),r+4};S.prototype.writeIntLE=function(e,r,n,i){if(e=+e,r=r|0,!i){var a=Math.pow(2,8*n-1);me(this,e,r,n,a-1,-a)}var o=0,s=1,u=0;for(this[r]=e&255;++o<n&&(s*=256);)e<0&&u===0&&this[r+o-1]!==0&&(u=1),this[r+o]=(e/s>>0)-u&255;return r+n};S.prototype.writeIntBE=function(e,r,n,i){if(e=+e,r=r|0,!i){var a=Math.pow(2,8*n-1);me(this,e,r,n,a-1,-a)}var o=n-1,s=1,u=0;for(this[r+o]=e&255;--o>=0&&(s*=256);)e<0&&u===0&&this[r+o+1]!==0&&(u=1),this[r+o]=(e/s>>0)-u&255;return r+n};S.prototype.writeInt8=function(e,r,n){return e=+e,r=r|0,n||me(this,e,r,1,127,-128),S.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[r]=e&255,r+1};S.prototype.writeInt16LE=function(e,r,n){return e=+e,r=r|0,n||me(this,e,r,2,32767,-32768),S.TYPED_ARRAY_SUPPORT?(this[r]=e&255,this[r+1]=e>>>8):pr(this,e,r,!0),r+2};S.prototype.writeInt16BE=function(e,r,n){return e=+e,r=r|0,n||me(this,e,r,2,32767,-32768),S.TYPED_ARRAY_SUPPORT?(this[r]=e>>>8,this[r+1]=e&255):pr(this,e,r,!1),r+2};S.prototype.writeInt32LE=function(e,r,n){return e=+e,r=r|0,n||me(this,e,r,4,2147483647,-2147483648),S.TYPED_ARRAY_SUPPORT?(this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24):yr(this,e,r,!0),r+4};S.prototype.writeInt32BE=function(e,r,n){return e=+e,r=r|0,n||me(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),S.TYPED_ARRAY_SUPPORT?(this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255):yr(this,e,r,!1),r+4};function ta(t,e,r,n,i,a){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function ra(t,e,r,n,i){return i||ta(t,e,r,4),Hi(t,e,r,n,23,4),r+4}S.prototype.writeFloatLE=function(e,r,n){return ra(this,e,r,!0,n)};S.prototype.writeFloatBE=function(e,r,n){return ra(this,e,r,!1,n)};function na(t,e,r,n,i){return i||ta(t,e,r,8),Hi(t,e,r,n,52,8),r+8}S.prototype.writeDoubleLE=function(e,r,n){return na(this,e,r,!0,n)};S.prototype.writeDoubleBE=function(e,r,n){return na(this,e,r,!1,n)};S.prototype.copy=function(e,r,n,i){if(n||(n=0),!i&&i!==0&&(i=this.length),r>=e.length&&(r=e.length),r||(r=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-r<i-n&&(i=e.length-r+n);var a=i-n,o;if(this===e&&n<r&&r<i)for(o=a-1;o>=0;--o)e[o+r]=this[o+n];else if(a<1e3||!S.TYPED_ARRAY_SUPPORT)for(o=0;o<a;++o)e[o+r]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),r);return a};S.prototype.fill=function(e,r,n,i){if(typeof e=="string"){if(typeof r=="string"?(i=r,r=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),e.length===1){var a=e.charCodeAt(0);a<256&&(e=a)}if(i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!S.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else typeof e=="number"&&(e=e&255);if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);var o;if(typeof e=="number")for(o=r;o<n;++o)this[o]=e;else{var s=Ue(e)?e:or(new S(e,i).toString()),u=s.length;for(o=0;o<n-r;++o)this[o+r]=s[o%u]}return this};var Ys=/[^+\/0-9A-Za-z-_]/g;function Js(t){if(t=Xs(t).replace(Ys,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function Xs(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Gs(t){return t<16?"0"+t.toString(16):t.toString(16)}function or(t,e){e=e||1/0;for(var r,n=t.length,i=null,a=[],o=0;o<n;++o){if(r=t.charCodeAt(o),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&a.push(239,191,189);continue}else if(o+1===n){(e-=3)>-1&&a.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&a.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&a.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;a.push(r)}else if(r<2048){if((e-=2)<0)break;a.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;a.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return a}function Zs(t){for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function Qs(t,e){for(var r,n,i,a=[],o=0;o<t.length&&!((e-=2)<0);++o)r=t.charCodeAt(o),n=r>>8,i=r%256,a.push(i),a.push(n);return a}function ia(t){return Rs(Js(t))}function gr(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function eu(t){return t!==t}function aa(t){return t!=null&&(!!t._isBuffer||oa(t)||tu(t))}function oa(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function tu(t){return typeof t.readFloatLE=="function"&&typeof t.slice=="function"&&oa(t.slice(0,0))}var ru=Object.freeze({__proto__:null,Buffer:S,INSPECT_MAX_BYTES:Yi,SlowBuffer:Ms,isBuffer:aa,kMaxLength:Ps}),Pt=ot(ru);/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var r=Pt,n=r.Buffer;function i(o,s){for(var u in o)s[u]=o[u]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=a);function a(o,s,u){return n(o,s,u)}a.prototype=Object.create(n.prototype),i(n,a),a.from=function(o,s,u){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,s,u)},a.alloc=function(o,s,u){if(typeof o!="number")throw new TypeError("Argument must be a number");var l=n(o);return s!==void 0?typeof u=="string"?l.fill(s,u):l.fill(s):l.fill(0),l},a.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},a.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(o)}})(sn,sn.exports);var Fe=sn.exports;Fe.default;var fn={exports:{}};function sa(){throw new Error("setTimeout has not been defined")}function ua(){throw new Error("clearTimeout has not been defined")}var He=sa,Ve=ua;typeof Rt.setTimeout=="function"&&(He=setTimeout);typeof Rt.clearTimeout=="function"&&(Ve=clearTimeout);function fa(t){if(He===setTimeout)return setTimeout(t,0);if((He===sa||!He)&&setTimeout)return He=setTimeout,setTimeout(t,0);try{return He(t,0)}catch{try{return He.call(null,t,0)}catch{return He.call(this,t,0)}}}function nu(t){if(Ve===clearTimeout)return clearTimeout(t);if((Ve===ua||!Ve)&&clearTimeout)return Ve=clearTimeout,clearTimeout(t);try{return Ve(t)}catch{try{return Ve.call(null,t)}catch{return Ve.call(this,t)}}}var $e=[],St=!1,nt,ir=-1;function iu(){!St||!nt||(St=!1,nt.length?$e=nt.concat($e):ir=-1,$e.length&&la())}function la(){if(!St){var t=fa(iu);St=!0;for(var e=$e.length;e;){for(nt=$e,$e=[];++ir<e;)nt&&nt[ir].run();ir=-1,e=$e.length}nt=null,St=!1,nu(t)}}function Ee(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];$e.push(new ca(t,e)),$e.length===1&&!St&&fa(la)}function ca(t,e){this.fun=t,this.array=e}ca.prototype.run=function(){this.fun.apply(null,this.array)};var au="browser",ou="browser",su=!0,uu={},fu=[],lu="",cu={},hu={},du={};function st(){}var pu=st,yu=st,gu=st,vu=st,wu=st,bu=st,_u=st;function mu(t){throw new Error("process.binding is not supported")}function xu(){return"/"}function Eu(t){throw new Error("process.chdir is not supported")}function Au(){return 0}var Et=Rt.performance||{},Su=Et.now||Et.mozNow||Et.msNow||Et.oNow||Et.webkitNow||function(){return new Date().getTime()};function Ru(t){var e=Su.call(Et)*.001,r=Math.floor(e),n=Math.floor(e%1*1e9);return t&&(r=r-t[0],n=n-t[1],n<0&&(r--,n+=1e9)),[r,n]}var Tu=new Date;function ku(){var t=new Date,e=t-Tu;return e/1e3}var J={nextTick:Ee,title:au,browser:su,env:uu,argv:fu,version:lu,versions:cu,on:pu,addListener:yu,once:gu,off:vu,removeListener:wu,removeAllListeners:bu,emit:_u,binding:mu,cwd:xu,chdir:Eu,umask:Au,hrtime:Ru,platform:ou,release:hu,config:du,uptime:ku},Ou;function Ye(){}Ye.prototype=Object.create(null);function V(){V.init.call(this)}V.EventEmitter=V;V.usingDomains=!1;V.prototype.domain=void 0;V.prototype._events=void 0;V.prototype._maxListeners=void 0;V.defaultMaxListeners=10;V.init=function(){this.domain=null,V.usingDomains&&Ou.active,(!this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=new Ye,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};V.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this};function ha(t){return t._maxListeners===void 0?V.defaultMaxListeners:t._maxListeners}V.prototype.getMaxListeners=function(){return ha(this)};function Pu(t,e,r){if(e)t.call(r);else for(var n=t.length,i=Ht(t,n),a=0;a<n;++a)i[a].call(r)}function Cu(t,e,r,n){if(e)t.call(r,n);else for(var i=t.length,a=Ht(t,i),o=0;o<i;++o)a[o].call(r,n)}function Bu(t,e,r,n,i){if(e)t.call(r,n,i);else for(var a=t.length,o=Ht(t,a),s=0;s<a;++s)o[s].call(r,n,i)}function Fu(t,e,r,n,i,a){if(e)t.call(r,n,i,a);else for(var o=t.length,s=Ht(t,o),u=0;u<o;++u)s[u].call(r,n,i,a)}function Du(t,e,r,n){if(e)t.apply(r,n);else for(var i=t.length,a=Ht(t,i),o=0;o<i;++o)a[o].apply(r,n)}V.prototype.emit=function(e){var r,n,i,a,o,s,u,l=e==="error";if(s=this._events,s)l=l&&s.error==null;else if(!l)return!1;if(u=this.domain,l){if(r=arguments[1],u)r||(r=new Error('Uncaught, unspecified "error" event')),r.domainEmitter=this,r.domain=u,r.domainThrown=!1,u.emit("error",r);else{if(r instanceof Error)throw r;var h=new Error('Uncaught, unspecified "error" event. ('+r+")");throw h.context=r,h}return!1}if(n=s[e],!n)return!1;var p=typeof n=="function";switch(i=arguments.length,i){case 1:Pu(n,p,this);break;case 2:Cu(n,p,this,arguments[1]);break;case 3:Bu(n,p,this,arguments[1],arguments[2]);break;case 4:Fu(n,p,this,arguments[1],arguments[2],arguments[3]);break;default:for(a=new Array(i-1),o=1;o<i;o++)a[o-1]=arguments[o];Du(n,p,this,a)}return!0};function da(t,e,r,n){var i,a,o;if(typeof r!="function")throw new TypeError('"listener" argument must be a function');if(a=t._events,a?(a.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),a=t._events),o=a[e]):(a=t._events=new Ye,t._eventsCount=0),!o)o=a[e]=r,++t._eventsCount;else if(typeof o=="function"?o=a[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),!o.warned&&(i=ha(t),i&&i>0&&o.length>i)){o.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=t,s.type=e,s.count=o.length,Mu(s)}return t}function Mu(t){typeof console.warn=="function"?console.warn(t):console.log(t)}V.prototype.addListener=function(e,r){return da(this,e,r,!1)};V.prototype.on=V.prototype.addListener;V.prototype.prependListener=function(e,r){return da(this,e,r,!0)};function pa(t,e,r){var n=!1;function i(){t.removeListener(e,i),n||(n=!0,r.apply(t,arguments))}return i.listener=r,i}V.prototype.once=function(e,r){if(typeof r!="function")throw new TypeError('"listener" argument must be a function');return this.on(e,pa(this,e,r)),this};V.prototype.prependOnceListener=function(e,r){if(typeof r!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(e,pa(this,e,r)),this};V.prototype.removeListener=function(e,r){var n,i,a,o,s;if(typeof r!="function")throw new TypeError('"listener" argument must be a function');if(i=this._events,!i)return this;if(n=i[e],!n)return this;if(n===r||n.listener&&n.listener===r)--this._eventsCount===0?this._events=new Ye:(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(a=-1,o=n.length;o-- >0;)if(n[o]===r||n[o].listener&&n[o].listener===r){s=n[o].listener,a=o;break}if(a<0)return this;if(n.length===1){if(n[0]=void 0,--this._eventsCount===0)return this._events=new Ye,this;delete i[e]}else Iu(n,a);i.removeListener&&this.emit("removeListener",e,s||r)}return this};V.prototype.off=function(t,e){return this.removeListener(t,e)};V.prototype.removeAllListeners=function(e){var r,n;if(n=this._events,!n)return this;if(!n.removeListener)return arguments.length===0?(this._events=new Ye,this._eventsCount=0):n[e]&&(--this._eventsCount===0?this._events=new Ye:delete n[e]),this;if(arguments.length===0){for(var i=Object.keys(n),a=0,o;a<i.length;++a)o=i[a],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=new Ye,this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r)do this.removeListener(e,r[r.length-1]);while(r[0]);return this};V.prototype.listeners=function(e){var r,n,i=this._events;return i?(r=i[e],r?typeof r=="function"?n=[r.listener||r]:n=Lu(r):n=[]):n=[],n};V.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):ya.call(t,e)};V.prototype.listenerCount=ya;function ya(t){var e=this._events;if(e){var r=e[t];if(typeof r=="function")return 1;if(r)return r.length}return 0}V.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function Iu(t,e){for(var r=e,n=r+1,i=t.length;n<i;r+=1,n+=1)t[r]=t[n];t.pop()}function Ht(t,e){for(var r=new Array(e);e--;)r[e]=t[e];return r}function Lu(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}var Uu=Object.freeze({__proto__:null,EventEmitter:V,default:V}),ga=ot(Uu),Mr,Gn;function va(){return Gn||(Gn=1,Mr=ga.EventEmitter),Mr}var ln;typeof Object.create=="function"?ln=function(e,r){e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:ln=function(e,r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e};var Xe=ln,wa=Object.getOwnPropertyDescriptors||function(e){for(var r=Object.keys(e),n={},i=0;i<r.length;i++)n[r[i]]=Object.getOwnPropertyDescriptor(e,r[i]);return n},zu=/%[sdj%]/g;function vr(t){if(!Yt(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(Le(arguments[r]));return e.join(" ")}for(var r=1,n=arguments,i=n.length,a=String(t).replace(zu,function(s){if(s==="%%")return"%";if(r>=i)return s;switch(s){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch{return"[Circular]"}default:return s}}),o=n[r];r<i;o=n[++r])Vt(o)||!ut(o)?a+=" "+o:a+=" "+Le(o);return a}function wr(t,e){if(Ie(Rt.process))return function(){return wr(t,e).apply(this,arguments)};if(J.noDeprecation===!0)return t;var r=!1;function n(){if(!r){if(J.throwDeprecation)throw new Error(e);J.traceDeprecation?console.trace(e):console.error(e),r=!0}return t.apply(this,arguments)}return n}var tr={},Ir;function Rn(t){if(Ie(Ir)&&(Ir=J.env.NODE_DEBUG||""),t=t.toUpperCase(),!tr[t])if(new RegExp("\\b"+t+"\\b","i").test(Ir)){var e=0;tr[t]=function(){var r=vr.apply(null,arguments);console.error("%s %d: %s",t,e,r)}}else tr[t]=function(){};return tr[t]}function Le(t,e){var r={seen:[],stylize:Wu};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),br(e)?r.showHidden=e:e&&Pn(r,e),Ie(r.showHidden)&&(r.showHidden=!1),Ie(r.depth)&&(r.depth=2),Ie(r.colors)&&(r.colors=!1),Ie(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=Nu),sr(r,t,r.depth)}Le.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};Le.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function Nu(t,e){var r=Le.styles[e];return r?"\x1B["+Le.colors[r][0]+"m"+t+"\x1B["+Le.colors[r][1]+"m":t}function Wu(t,e){return t}function $u(t){var e={};return t.forEach(function(r,n){e[r]=!0}),e}function sr(t,e,r){if(t.customInspect&&e&&qt(e.inspect)&&e.inspect!==Le&&!(e.constructor&&e.constructor.prototype===e)){var n=e.inspect(r,t);return Yt(n)||(n=sr(t,n,r)),n}var i=qu(t,e);if(i)return i;var a=Object.keys(e),o=$u(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(e)),$t(e)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return Lr(e);if(a.length===0){if(qt(e)){var s=e.name?": "+e.name:"";return t.stylize("[Function"+s+"]","special")}if(Wt(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(ur(e))return t.stylize(Date.prototype.toString.call(e),"date");if($t(e))return Lr(e)}var u="",l=!1,h=["{","}"];if(Tn(e)&&(l=!0,h=["[","]"]),qt(e)){var p=e.name?": "+e.name:"";u=" [Function"+p+"]"}if(Wt(e)&&(u=" "+RegExp.prototype.toString.call(e)),ur(e)&&(u=" "+Date.prototype.toUTCString.call(e)),$t(e)&&(u=" "+Lr(e)),a.length===0&&(!l||e.length==0))return h[0]+u+h[1];if(r<0)return Wt(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var b;return l?b=ju(t,e,r,o,a):b=a.map(function(P){return cn(t,e,r,o,P,l)}),t.seen.pop(),Ku(b,u,h)}function qu(t,e){if(Ie(e))return t.stylize("undefined","undefined");if(Yt(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}if(kn(e))return t.stylize(""+e,"number");if(br(e))return t.stylize(""+e,"boolean");if(Vt(e))return t.stylize("null","null")}function Lr(t){return"["+Error.prototype.toString.call(t)+"]"}function ju(t,e,r,n,i){for(var a=[],o=0,s=e.length;o<s;++o)Aa(e,String(o))?a.push(cn(t,e,r,n,String(o),!0)):a.push("");return i.forEach(function(u){u.match(/^\d+$/)||a.push(cn(t,e,r,n,u,!0))}),a}function cn(t,e,r,n,i,a){var o,s,u;if(u=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},u.get?u.set?s=t.stylize("[Getter/Setter]","special"):s=t.stylize("[Getter]","special"):u.set&&(s=t.stylize("[Setter]","special")),Aa(n,i)||(o="["+i+"]"),s||(t.seen.indexOf(u.value)<0?(Vt(r)?s=sr(t,u.value,null):s=sr(t,u.value,r-1),s.indexOf(`
`)>-1&&(a?s=s.split(`
`).map(function(l){return"  "+l}).join(`
`).substr(2):s=`
`+s.split(`
`).map(function(l){return"   "+l}).join(`
`))):s=t.stylize("[Circular]","special")),Ie(o)){if(a&&i.match(/^\d+$/))return s;o=JSON.stringify(""+i),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=t.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=t.stylize(o,"string"))}return o+": "+s}function Ku(t,e,r){var n=t.reduce(function(i,a){return a.indexOf(`
`)>=0,i+a.replace(/\u001b\[\d\d?m/g,"").length+1},0);return n>60?r[0]+(e===""?"":e+`
 `)+" "+t.join(`,
  `)+" "+r[1]:r[0]+e+" "+t.join(", ")+" "+r[1]}function Tn(t){return Array.isArray(t)}function br(t){return typeof t=="boolean"}function Vt(t){return t===null}function ba(t){return t==null}function kn(t){return typeof t=="number"}function Yt(t){return typeof t=="string"}function _a(t){return typeof t=="symbol"}function Ie(t){return t===void 0}function Wt(t){return ut(t)&&On(t)==="[object RegExp]"}function ut(t){return typeof t=="object"&&t!==null}function ur(t){return ut(t)&&On(t)==="[object Date]"}function $t(t){return ut(t)&&(On(t)==="[object Error]"||t instanceof Error)}function qt(t){return typeof t=="function"}function ma(t){return t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||typeof t=="symbol"||typeof t>"u"}function xa(t){return S.isBuffer(t)}function On(t){return Object.prototype.toString.call(t)}function Ur(t){return t<10?"0"+t.toString(10):t.toString(10)}var Hu=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Vu(){var t=new Date,e=[Ur(t.getHours()),Ur(t.getMinutes()),Ur(t.getSeconds())].join(":");return[t.getDate(),Hu[t.getMonth()],e].join(" ")}function Ea(){console.log("%s - %s",Vu(),vr.apply(null,arguments))}function Pn(t,e){if(!e||!ut(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t}function Aa(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var Ze=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function Cn(t){if(typeof t!="function")throw new TypeError('The "original" argument must be of type Function');if(Ze&&t[Ze]){var e=t[Ze];if(typeof e!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,Ze,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var r,n,i=new Promise(function(s,u){r=s,n=u}),a=[],o=0;o<arguments.length;o++)a.push(arguments[o]);a.push(function(s,u){s?n(s):r(u)});try{t.apply(this,a)}catch(s){n(s)}return i}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),Ze&&Object.defineProperty(e,Ze,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,wa(t))}Cn.custom=Ze;function Yu(t,e){if(!t){var r=new Error("Promise was rejected with a falsy value");r.reason=t,t=r}return e(t)}function Sa(t){if(typeof t!="function")throw new TypeError('The "original" argument must be of type Function');function e(){for(var r=[],n=0;n<arguments.length;n++)r.push(arguments[n]);var i=r.pop();if(typeof i!="function")throw new TypeError("The last argument must be of type Function");var a=this,o=function(){return i.apply(a,arguments)};t.apply(this,r).then(function(s){J.nextTick(o.bind(null,null,s))},function(s){J.nextTick(Yu.bind(null,s,o))})}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),Object.defineProperties(e,wa(t)),e}var Ju={inherits:Xe,_extend:Pn,log:Ea,isBuffer:xa,isPrimitive:ma,isFunction:qt,isError:$t,isDate:ur,isObject:ut,isRegExp:Wt,isUndefined:Ie,isSymbol:_a,isString:Yt,isNumber:kn,isNullOrUndefined:ba,isNull:Vt,isBoolean:br,isArray:Tn,inspect:Le,deprecate:wr,format:vr,debuglog:Rn,promisify:Cn,callbackify:Sa},Xu=Object.freeze({__proto__:null,_extend:Pn,callbackify:Sa,debuglog:Rn,default:Ju,deprecate:wr,format:vr,inherits:Xe,inspect:Le,isArray:Tn,isBoolean:br,isBuffer:xa,isDate:ur,isError:$t,isFunction:qt,isNull:Vt,isNullOrUndefined:ba,isNumber:kn,isObject:ut,isPrimitive:ma,isRegExp:Wt,isString:Yt,isSymbol:_a,isUndefined:Ie,log:Ea,promisify:Cn}),Ra=ot(Xu),zr,Zn;function Gu(){if(Zn)return zr;Zn=1;function t(E,T){var k=Object.keys(E);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(E);T&&(d=d.filter(function(v){return Object.getOwnPropertyDescriptor(E,v).enumerable})),k.push.apply(k,d)}return k}function e(E){for(var T=1;T<arguments.length;T++){var k=arguments[T]!=null?arguments[T]:{};T%2?t(Object(k),!0).forEach(function(d){r(E,d,k[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(E,Object.getOwnPropertyDescriptors(k)):t(Object(k)).forEach(function(d){Object.defineProperty(E,d,Object.getOwnPropertyDescriptor(k,d))})}return E}function r(E,T,k){return T=o(T),T in E?Object.defineProperty(E,T,{value:k,enumerable:!0,configurable:!0,writable:!0}):E[T]=k,E}function n(E,T){if(!(E instanceof T))throw new TypeError("Cannot call a class as a function")}function i(E,T){for(var k=0;k<T.length;k++){var d=T[k];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(E,o(d.key),d)}}function a(E,T,k){return T&&i(E.prototype,T),Object.defineProperty(E,"prototype",{writable:!1}),E}function o(E){var T=s(E,"string");return typeof T=="symbol"?T:String(T)}function s(E,T){if(typeof E!="object"||E===null)return E;var k=E[Symbol.toPrimitive];if(k!==void 0){var d=k.call(E,T||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(T==="string"?String:Number)(E)}var u=Pt,l=u.Buffer,h=Ra,p=h.inspect,b=p&&p.custom||"inspect";function P(E,T,k){l.prototype.copy.call(E,T,k)}return zr=function(){function E(){n(this,E),this.head=null,this.tail=null,this.length=0}return a(E,[{key:"push",value:function(k){var d={data:k,next:null};this.length>0?this.tail.next=d:this.head=d,this.tail=d,++this.length}},{key:"unshift",value:function(k){var d={data:k,next:this.head};this.length===0&&(this.tail=d),this.head=d,++this.length}},{key:"shift",value:function(){if(this.length!==0){var k=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,k}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(k){if(this.length===0)return"";for(var d=this.head,v=""+d.data;d=d.next;)v+=k+d.data;return v}},{key:"concat",value:function(k){if(this.length===0)return l.alloc(0);for(var d=l.allocUnsafe(k>>>0),v=this.head,B=0;v;)P(v.data,d,B),B+=v.data.length,v=v.next;return d}},{key:"consume",value:function(k,d){var v;return k<this.head.data.length?(v=this.head.data.slice(0,k),this.head.data=this.head.data.slice(k)):k===this.head.data.length?v=this.shift():v=d?this._getString(k):this._getBuffer(k),v}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(k){var d=this.head,v=1,B=d.data;for(k-=B.length;d=d.next;){var F=d.data,N=k>F.length?F.length:k;if(N===F.length?B+=F:B+=F.slice(0,k),k-=N,k===0){N===F.length?(++v,d.next?this.head=d.next:this.head=this.tail=null):(this.head=d,d.data=F.slice(N));break}++v}return this.length-=v,B}},{key:"_getBuffer",value:function(k){var d=l.allocUnsafe(k),v=this.head,B=1;for(v.data.copy(d),k-=v.data.length;v=v.next;){var F=v.data,N=k>F.length?F.length:k;if(F.copy(d,d.length-k,0,N),k-=N,k===0){N===F.length?(++B,v.next?this.head=v.next:this.head=this.tail=null):(this.head=v,v.data=F.slice(N));break}++B}return this.length-=B,d}},{key:b,value:function(k,d){return p(this,e(e({},d),{},{depth:0,customInspect:!1}))}}]),E}(),zr}var Nr,Qn;function Ta(){if(Qn)return Nr;Qn=1;function t(o,s){var u=this,l=this._readableState&&this._readableState.destroyed,h=this._writableState&&this._writableState.destroyed;return l||h?(s?s(o):o&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,J.nextTick(i,this,o)):J.nextTick(i,this,o)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(o||null,function(p){!s&&p?u._writableState?u._writableState.errorEmitted?J.nextTick(r,u):(u._writableState.errorEmitted=!0,J.nextTick(e,u,p)):J.nextTick(e,u,p):s?(J.nextTick(r,u),s(p)):J.nextTick(r,u)}),this)}function e(o,s){i(o,s),r(o)}function r(o){o._writableState&&!o._writableState.emitClose||o._readableState&&!o._readableState.emitClose||o.emit("close")}function n(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function i(o,s){o.emit("error",s)}function a(o,s){var u=o._readableState,l=o._writableState;u&&u.autoDestroy||l&&l.autoDestroy?o.destroy(s):o.emit("error",s)}return Nr={destroy:t,undestroy:n,errorOrDestroy:a},Nr}var ft={};function Zu(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var ka={};function ke(t,e,r){r||(r=Error);function n(a,o,s){return typeof e=="string"?e:e(a,o,s)}var i=function(a){Zu(o,a);function o(s,u,l){return a.call(this,n(s,u,l))||this}return o}(r);i.prototype.name=r.name,i.prototype.code=t,ka[t]=i}function ei(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map(function(n){return String(n)}),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:r===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}else return"of ".concat(e," ").concat(String(t))}function Qu(t,e,r){return t.substr(0,e.length)===e}function ef(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function tf(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}ke("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);ke("ERR_INVALID_ARG_TYPE",function(t,e,r){var n;typeof e=="string"&&Qu(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";var i;if(ef(t," argument"))i="The ".concat(t," ").concat(n," ").concat(ei(e,"type"));else{var a=tf(t,".")?"property":"argument";i='The "'.concat(t,'" ').concat(a," ").concat(n," ").concat(ei(e,"type"))}return i+=". Received type ".concat(typeof r),i},TypeError);ke("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");ke("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});ke("ERR_STREAM_PREMATURE_CLOSE","Premature close");ke("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});ke("ERR_MULTIPLE_CALLBACK","Callback called multiple times");ke("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");ke("ERR_STREAM_WRITE_AFTER_END","write after end");ke("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);ke("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);ke("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");ft.codes=ka;var Wr,ti;function Oa(){if(ti)return Wr;ti=1;var t=ft.codes.ERR_INVALID_OPT_VALUE;function e(n,i,a){return n.highWaterMark!=null?n.highWaterMark:i?n[a]:null}function r(n,i,a,o){var s=e(i,o,a);if(s!=null){if(!(isFinite(s)&&Math.floor(s)===s)||s<0){var u=o?a:"highWaterMark";throw new t(u,s)}return Math.floor(s)}return n.objectMode?16:16*1024}return Wr={getHighWaterMark:r},Wr}var $r,ri;function rf(){if(ri)return $r;ri=1,$r=t;function t(r,n){if(e("noDeprecation"))return r;var i=!1;function a(){if(!i){if(e("throwDeprecation"))throw new Error(n);e("traceDeprecation")?console.trace(n):console.warn(n),i=!0}return r.apply(this,arguments)}return a}function e(r){try{if(!q.localStorage)return!1}catch{return!1}var n=q.localStorage[r];return n==null?!1:String(n).toLowerCase()==="true"}return $r}var qr,ni;function Pa(){if(ni)return qr;ni=1,qr=_;function t(y){var g=this;this.next=null,this.entry=null,this.finish=function(){de(g,y)}}var e;_.WritableState=W;var r={deprecate:rf()},n=va(),i=Pt.Buffer,a=(typeof q<"u"?q:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function o(y){return i.from(y)}function s(y){return i.isBuffer(y)||y instanceof a}var u=Ta(),l=Oa(),h=l.getHighWaterMark,p=ft.codes,b=p.ERR_INVALID_ARG_TYPE,P=p.ERR_METHOD_NOT_IMPLEMENTED,E=p.ERR_MULTIPLE_CALLBACK,T=p.ERR_STREAM_CANNOT_PIPE,k=p.ERR_STREAM_DESTROYED,d=p.ERR_STREAM_NULL_VALUES,v=p.ERR_STREAM_WRITE_AFTER_END,B=p.ERR_UNKNOWN_ENCODING,F=u.errorOrDestroy;be(_,n);function N(){}function W(y,g,m){e=e||Tt(),y=y||{},typeof m!="boolean"&&(m=g instanceof e),this.objectMode=!!y.objectMode,m&&(this.objectMode=this.objectMode||!!y.writableObjectMode),this.highWaterMark=h(this,y,"writableHighWaterMark",m),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var C=y.decodeStrings===!1;this.decodeStrings=!C,this.defaultEncoding=y.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(L){x(g,L)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=y.emitClose!==!1,this.autoDestroy=!!y.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}W.prototype.getBuffer=function(){for(var g=this.bufferedRequest,m=[];g;)m.push(g),g=g.next;return m},function(){try{Object.defineProperty(W.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var A;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(A=Function.prototype[Symbol.hasInstance],Object.defineProperty(_,Symbol.hasInstance,{value:function(g){return A.call(this,g)?!0:this!==_?!1:g&&g._writableState instanceof W}})):A=function(g){return g instanceof this};function _(y){e=e||Tt();var g=this instanceof e;if(!g&&!A.call(_,this))return new _(y);this._writableState=new W(y,this,g),this.writable=!0,y&&(typeof y.write=="function"&&(this._write=y.write),typeof y.writev=="function"&&(this._writev=y.writev),typeof y.destroy=="function"&&(this._destroy=y.destroy),typeof y.final=="function"&&(this._final=y.final)),n.call(this)}_.prototype.pipe=function(){F(this,new T)};function w(y,g){var m=new v;F(y,m),J.nextTick(g,m)}function O(y,g,m,C){var L;return m===null?L=new d:typeof m!="string"&&!g.objectMode&&(L=new b("chunk",["string","Buffer"],m)),L?(F(y,L),J.nextTick(C,L),!1):!0}_.prototype.write=function(y,g,m){var C=this._writableState,L=!1,f=!C.objectMode&&s(y);return f&&!i.isBuffer(y)&&(y=o(y)),typeof g=="function"&&(m=g,g=null),f?g="buffer":g||(g=C.defaultEncoding),typeof m!="function"&&(m=N),C.ending?w(this,m):(f||O(this,C,y,m))&&(C.pendingcb++,L=he(this,C,f,y,g,m)),L},_.prototype.cork=function(){this._writableState.corked++},_.prototype.uncork=function(){var y=this._writableState;y.corked&&(y.corked--,!y.writing&&!y.corked&&!y.bufferProcessing&&y.bufferedRequest&&z(this,y))},_.prototype.setDefaultEncoding=function(g){if(typeof g=="string"&&(g=g.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((g+"").toLowerCase())>-1))throw new B(g);return this._writableState.defaultEncoding=g,this},Object.defineProperty(_.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function se(y,g,m){return!y.objectMode&&y.decodeStrings!==!1&&typeof g=="string"&&(g=i.from(g,m)),g}Object.defineProperty(_.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function he(y,g,m,C,L,f){if(!m){var c=se(g,C,L);C!==c&&(m=!0,L="buffer",C=c)}var R=g.objectMode?1:C.length;g.length+=R;var D=g.length<g.highWaterMark;if(D||(g.needDrain=!0),g.writing||g.corked){var ee=g.lastBufferedRequest;g.lastBufferedRequest={chunk:C,encoding:L,isBuf:m,callback:f,next:null},ee?ee.next=g.lastBufferedRequest:g.bufferedRequest=g.lastBufferedRequest,g.bufferedRequestCount+=1}else Y(y,g,!1,R,C,L,f);return D}function Y(y,g,m,C,L,f,c){g.writelen=C,g.writecb=c,g.writing=!0,g.sync=!0,g.destroyed?g.onwrite(new k("write")):m?y._writev(L,g.onwrite):y._write(L,f,g.onwrite),g.sync=!1}function Z(y,g,m,C,L){--g.pendingcb,m?(J.nextTick(L,C),J.nextTick(Q,y,g),y._writableState.errorEmitted=!0,F(y,C)):(L(C),y._writableState.errorEmitted=!0,F(y,C),Q(y,g))}function ne(y){y.writing=!1,y.writecb=null,y.length-=y.writelen,y.writelen=0}function x(y,g){var m=y._writableState,C=m.sync,L=m.writecb;if(typeof L!="function")throw new E;if(ne(m),g)Z(y,m,C,g,L);else{var f=U(m)||y.destroyed;!f&&!m.corked&&!m.bufferProcessing&&m.bufferedRequest&&z(y,m),C?J.nextTick(M,y,m,f,L):M(y,m,f,L)}}function M(y,g,m,C){m||I(y,g),g.pendingcb--,C(),Q(y,g)}function I(y,g){g.length===0&&g.needDrain&&(g.needDrain=!1,y.emit("drain"))}function z(y,g){g.bufferProcessing=!0;var m=g.bufferedRequest;if(y._writev&&m&&m.next){var C=g.bufferedRequestCount,L=new Array(C),f=g.corkedRequestsFree;f.entry=m;for(var c=0,R=!0;m;)L[c]=m,m.isBuf||(R=!1),m=m.next,c+=1;L.allBuffers=R,Y(y,g,!0,g.length,L,"",f.finish),g.pendingcb++,g.lastBufferedRequest=null,f.next?(g.corkedRequestsFree=f.next,f.next=null):g.corkedRequestsFree=new t(g),g.bufferedRequestCount=0}else{for(;m;){var D=m.chunk,ee=m.encoding,j=m.callback,te=g.objectMode?1:D.length;if(Y(y,g,!1,te,D,ee,j),m=m.next,g.bufferedRequestCount--,g.writing)break}m===null&&(g.lastBufferedRequest=null)}g.bufferedRequest=m,g.bufferProcessing=!1}_.prototype._write=function(y,g,m){m(new P("_write()"))},_.prototype._writev=null,_.prototype.end=function(y,g,m){var C=this._writableState;return typeof y=="function"?(m=y,y=null,g=null):typeof g=="function"&&(m=g,g=null),y!=null&&this.write(y,g),C.corked&&(C.corked=1,this.uncork()),C.ending||ue(this,C,m),this},Object.defineProperty(_.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function U(y){return y.ending&&y.length===0&&y.bufferedRequest===null&&!y.finished&&!y.writing}function $(y,g){y._final(function(m){g.pendingcb--,m&&F(y,m),g.prefinished=!0,y.emit("prefinish"),Q(y,g)})}function K(y,g){!g.prefinished&&!g.finalCalled&&(typeof y._final=="function"&&!g.destroyed?(g.pendingcb++,g.finalCalled=!0,J.nextTick($,y,g)):(g.prefinished=!0,y.emit("prefinish")))}function Q(y,g){var m=U(g);if(m&&(K(y,g),g.pendingcb===0&&(g.finished=!0,y.emit("finish"),g.autoDestroy))){var C=y._readableState;(!C||C.autoDestroy&&C.endEmitted)&&y.destroy()}return m}function ue(y,g,m){g.ending=!0,Q(y,g),m&&(g.finished?J.nextTick(m):y.once("finish",m)),g.ended=!0,y.writable=!1}function de(y,g,m){var C=y.entry;for(y.entry=null;C;){var L=C.callback;g.pendingcb--,L(m),C=C.next}g.corkedRequestsFree.next=y}return Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(g){this._writableState&&(this._writableState.destroyed=g)}}),_.prototype.destroy=u.destroy,_.prototype._undestroy=u.undestroy,_.prototype._destroy=function(y,g){g(y)},qr}var jr,ii;function Tt(){if(ii)return jr;ii=1;var t=Object.keys||function(l){var h=[];for(var p in l)h.push(p);return h};jr=o;var e=Ba(),r=Pa();be(o,e);for(var n=t(r.prototype),i=0;i<n.length;i++){var a=n[i];o.prototype[a]||(o.prototype[a]=r.prototype[a])}function o(l){if(!(this instanceof o))return new o(l);e.call(this,l),r.call(this,l),this.allowHalfOpen=!0,l&&(l.readable===!1&&(this.readable=!1),l.writable===!1&&(this.writable=!1),l.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",s)))}Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(o.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function s(){this._writableState.ended||J.nextTick(u,this)}function u(l){l.end()}return Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(h){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=h,this._writableState.destroyed=h)}}),jr}var nf=S.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function af(t){if(t&&!nf(t))throw new Error("Unknown encoding: "+t)}function Ct(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),af(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=sf;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=uf;break;default:this.write=of;return}this.charBuffer=new S(6),this.charReceived=0,this.charLength=0}Ct.prototype.write=function(t){for(var e="";this.charLength;){var r=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";t=t.slice(r,t.length),e=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var i=e.charCodeAt(e.length-1);if(i>=55296&&i<=56319){this.charLength+=this.surrogateSize,e="";continue}if(this.charReceived=this.charLength=0,t.length===0)return e;break}this.detectIncompleteChar(t);var n=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,n),n-=this.charReceived),e+=t.toString(this.encoding,0,n);var n=e.length-1,i=e.charCodeAt(n);if(i>=55296&&i<=56319){var a=this.surrogateSize;return this.charLength+=a,this.charReceived+=a,this.charBuffer.copy(this.charBuffer,a,0,a),t.copy(this.charBuffer,0,0,a),e.substring(0,n)}return e};Ct.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var r=t[t.length-e];if(e==1&&r>>5==6){this.charLength=2;break}if(e<=2&&r>>4==14){this.charLength=3;break}if(e<=3&&r>>3==30){this.charLength=4;break}}this.charReceived=e};Ct.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var r=this.charReceived,n=this.charBuffer,i=this.encoding;e+=n.slice(0,r).toString(i)}return e};function of(t){return t.toString(this.encoding)}function sf(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function uf(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}var ff=Object.freeze({__proto__:null,StringDecoder:Ct}),hn=ot(ff),ai=ft.codes.ERR_STREAM_PREMATURE_CLOSE;function lf(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}function cf(){}function hf(t){return t.setHeader&&typeof t.abort=="function"}function Ca(t,e,r){if(typeof e=="function")return Ca(t,null,e);e||(e={}),r=lf(r||cf);var n=e.readable||e.readable!==!1&&t.readable,i=e.writable||e.writable!==!1&&t.writable,a=function(){t.writable||s()},o=t._writableState&&t._writableState.finished,s=function(){i=!1,o=!0,n||r.call(t)},u=t._readableState&&t._readableState.endEmitted,l=function(){n=!1,u=!0,i||r.call(t)},h=function(E){r.call(t,E)},p=function(){var E;if(n&&!u)return(!t._readableState||!t._readableState.ended)&&(E=new ai),r.call(t,E);if(i&&!o)return(!t._writableState||!t._writableState.ended)&&(E=new ai),r.call(t,E)},b=function(){t.req.on("finish",s)};return hf(t)?(t.on("complete",s),t.on("abort",p),t.req?b():t.on("request",b)):i&&!t._writableState&&(t.on("end",a),t.on("close",a)),t.on("end",l),t.on("finish",s),e.error!==!1&&t.on("error",h),t.on("close",p),function(){t.removeListener("complete",s),t.removeListener("abort",p),t.removeListener("request",b),t.req&&t.req.removeListener("finish",s),t.removeListener("end",a),t.removeListener("close",a),t.removeListener("finish",s),t.removeListener("end",l),t.removeListener("error",h),t.removeListener("close",p)}}var _r=Ca;_r.default;var Kr,oi;function df(){if(oi)return Kr;oi=1;var t;function e(B,F,N){return F=r(F),F in B?Object.defineProperty(B,F,{value:N,enumerable:!0,configurable:!0,writable:!0}):B[F]=N,B}function r(B){var F=n(B,"string");return typeof F=="symbol"?F:String(F)}function n(B,F){if(typeof B!="object"||B===null)return B;var N=B[Symbol.toPrimitive];if(N!==void 0){var W=N.call(B,F||"default");if(typeof W!="object")return W;throw new TypeError("@@toPrimitive must return a primitive value.")}return(F==="string"?String:Number)(B)}var i=_r,a=Symbol("lastResolve"),o=Symbol("lastReject"),s=Symbol("error"),u=Symbol("ended"),l=Symbol("lastPromise"),h=Symbol("handlePromise"),p=Symbol("stream");function b(B,F){return{value:B,done:F}}function P(B){var F=B[a];if(F!==null){var N=B[p].read();N!==null&&(B[l]=null,B[a]=null,B[o]=null,F(b(N,!1)))}}function E(B){J.nextTick(P,B)}function T(B,F){return function(N,W){B.then(function(){if(F[u]){N(b(void 0,!0));return}F[h](N,W)},W)}}var k=Object.getPrototypeOf(function(){}),d=Object.setPrototypeOf((t={get stream(){return this[p]},next:function(){var F=this,N=this[s];if(N!==null)return Promise.reject(N);if(this[u])return Promise.resolve(b(void 0,!0));if(this[p].destroyed)return new Promise(function(w,O){J.nextTick(function(){F[s]?O(F[s]):w(b(void 0,!0))})});var W=this[l],A;if(W)A=new Promise(T(W,this));else{var _=this[p].read();if(_!==null)return Promise.resolve(b(_,!1));A=new Promise(this[h])}return this[l]=A,A}},e(t,Symbol.asyncIterator,function(){return this}),e(t,"return",function(){var F=this;return new Promise(function(N,W){F[p].destroy(null,function(A){if(A){W(A);return}N(b(void 0,!0))})})}),t),k),v=function(F){var N,W=Object.create(d,(N={},e(N,p,{value:F,writable:!0}),e(N,a,{value:null,writable:!0}),e(N,o,{value:null,writable:!0}),e(N,s,{value:null,writable:!0}),e(N,u,{value:F._readableState.endEmitted,writable:!0}),e(N,h,{value:function(_,w){var O=W[p].read();O?(W[l]=null,W[a]=null,W[o]=null,_(b(O,!1))):(W[a]=_,W[o]=w)},writable:!0}),N));return W[l]=null,i(F,function(A){if(A&&A.code!=="ERR_STREAM_PREMATURE_CLOSE"){var _=W[o];_!==null&&(W[l]=null,W[a]=null,W[o]=null,_(A)),W[s]=A;return}var w=W[a];w!==null&&(W[l]=null,W[a]=null,W[o]=null,w(b(void 0,!0))),W[u]=!0}),F.on("readable",E.bind(null,W)),W};return Kr=v,Kr}var Hr,si;function pf(){return si||(si=1,Hr=function(){throw new Error("Readable.from is not available in the browser")}),Hr}var Vr,ui;function Ba(){if(ui)return Vr;ui=1,Vr=w;var t;w.ReadableState=_,ga.EventEmitter;var e=function(c,R){return c.listeners(R).length},r=va(),n=Pt.Buffer,i=(typeof q<"u"?q:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function a(f){return n.from(f)}function o(f){return n.isBuffer(f)||f instanceof i}var s=Ra,u;s&&s.debuglog?u=s.debuglog("stream"):u=function(){};var l=Gu(),h=Ta(),p=Oa(),b=p.getHighWaterMark,P=ft.codes,E=P.ERR_INVALID_ARG_TYPE,T=P.ERR_STREAM_PUSH_AFTER_EOF,k=P.ERR_METHOD_NOT_IMPLEMENTED,d=P.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,v,B,F;be(w,r);var N=h.errorOrDestroy,W=["error","close","destroy","pause","resume"];function A(f,c,R){if(typeof f.prependListener=="function")return f.prependListener(c,R);!f._events||!f._events[c]?f.on(c,R):Array.isArray(f._events[c])?f._events[c].unshift(R):f._events[c]=[R,f._events[c]]}function _(f,c,R){t=t||Tt(),f=f||{},typeof R!="boolean"&&(R=c instanceof t),this.objectMode=!!f.objectMode,R&&(this.objectMode=this.objectMode||!!f.readableObjectMode),this.highWaterMark=b(this,f,"readableHighWaterMark",R),this.buffer=new l,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=f.emitClose!==!1,this.autoDestroy=!!f.autoDestroy,this.destroyed=!1,this.defaultEncoding=f.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,f.encoding&&(v||(v=hn.StringDecoder),this.decoder=new v(f.encoding),this.encoding=f.encoding)}function w(f){if(t=t||Tt(),!(this instanceof w))return new w(f);var c=this instanceof t;this._readableState=new _(f,this,c),this.readable=!0,f&&(typeof f.read=="function"&&(this._read=f.read),typeof f.destroy=="function"&&(this._destroy=f.destroy)),r.call(this)}Object.defineProperty(w.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(c){this._readableState&&(this._readableState.destroyed=c)}}),w.prototype.destroy=h.destroy,w.prototype._undestroy=h.undestroy,w.prototype._destroy=function(f,c){c(f)},w.prototype.push=function(f,c){var R=this._readableState,D;return R.objectMode?D=!0:typeof f=="string"&&(c=c||R.defaultEncoding,c!==R.encoding&&(f=n.from(f,c),c=""),D=!0),O(this,f,c,!1,D)},w.prototype.unshift=function(f){return O(this,f,null,!0,!1)};function O(f,c,R,D,ee){u("readableAddChunk",c);var j=f._readableState;if(c===null)j.reading=!1,x(f,j);else{var te;if(ee||(te=he(j,c)),te)N(f,te);else if(j.objectMode||c&&c.length>0)if(typeof c!="string"&&!j.objectMode&&Object.getPrototypeOf(c)!==n.prototype&&(c=a(c)),D)j.endEmitted?N(f,new d):se(f,j,c,!0);else if(j.ended)N(f,new T);else{if(j.destroyed)return!1;j.reading=!1,j.decoder&&!R?(c=j.decoder.write(c),j.objectMode||c.length!==0?se(f,j,c,!1):z(f,j)):se(f,j,c,!1)}else D||(j.reading=!1,z(f,j))}return!j.ended&&(j.length<j.highWaterMark||j.length===0)}function se(f,c,R,D){c.flowing&&c.length===0&&!c.sync?(c.awaitDrain=0,f.emit("data",R)):(c.length+=c.objectMode?1:R.length,D?c.buffer.unshift(R):c.buffer.push(R),c.needReadable&&M(f)),z(f,c)}function he(f,c){var R;return!o(c)&&typeof c!="string"&&c!==void 0&&!f.objectMode&&(R=new E("chunk",["string","Buffer","Uint8Array"],c)),R}w.prototype.isPaused=function(){return this._readableState.flowing===!1},w.prototype.setEncoding=function(f){v||(v=hn.StringDecoder);var c=new v(f);this._readableState.decoder=c,this._readableState.encoding=this._readableState.decoder.encoding;for(var R=this._readableState.buffer.head,D="";R!==null;)D+=c.write(R.data),R=R.next;return this._readableState.buffer.clear(),D!==""&&this._readableState.buffer.push(D),this._readableState.length=D.length,this};var Y=1073741824;function Z(f){return f>=Y?f=Y:(f--,f|=f>>>1,f|=f>>>2,f|=f>>>4,f|=f>>>8,f|=f>>>16,f++),f}function ne(f,c){return f<=0||c.length===0&&c.ended?0:c.objectMode?1:f!==f?c.flowing&&c.length?c.buffer.head.data.length:c.length:(f>c.highWaterMark&&(c.highWaterMark=Z(f)),f<=c.length?f:c.ended?c.length:(c.needReadable=!0,0))}w.prototype.read=function(f){u("read",f),f=parseInt(f,10);var c=this._readableState,R=f;if(f!==0&&(c.emittedReadable=!1),f===0&&c.needReadable&&((c.highWaterMark!==0?c.length>=c.highWaterMark:c.length>0)||c.ended))return u("read: emitReadable",c.length,c.ended),c.length===0&&c.ended?m(this):M(this),null;if(f=ne(f,c),f===0&&c.ended)return c.length===0&&m(this),null;var D=c.needReadable;u("need readable",D),(c.length===0||c.length-f<c.highWaterMark)&&(D=!0,u("length less than watermark",D)),c.ended||c.reading?(D=!1,u("reading or ended",D)):D&&(u("do read"),c.reading=!0,c.sync=!0,c.length===0&&(c.needReadable=!0),this._read(c.highWaterMark),c.sync=!1,c.reading||(f=ne(R,c)));var ee;return f>0?ee=g(f,c):ee=null,ee===null?(c.needReadable=c.length<=c.highWaterMark,f=0):(c.length-=f,c.awaitDrain=0),c.length===0&&(c.ended||(c.needReadable=!0),R!==f&&c.ended&&m(this)),ee!==null&&this.emit("data",ee),ee};function x(f,c){if(u("onEofChunk"),!c.ended){if(c.decoder){var R=c.decoder.end();R&&R.length&&(c.buffer.push(R),c.length+=c.objectMode?1:R.length)}c.ended=!0,c.sync?M(f):(c.needReadable=!1,c.emittedReadable||(c.emittedReadable=!0,I(f)))}}function M(f){var c=f._readableState;u("emitReadable",c.needReadable,c.emittedReadable),c.needReadable=!1,c.emittedReadable||(u("emitReadable",c.flowing),c.emittedReadable=!0,J.nextTick(I,f))}function I(f){var c=f._readableState;u("emitReadable_",c.destroyed,c.length,c.ended),!c.destroyed&&(c.length||c.ended)&&(f.emit("readable"),c.emittedReadable=!1),c.needReadable=!c.flowing&&!c.ended&&c.length<=c.highWaterMark,y(f)}function z(f,c){c.readingMore||(c.readingMore=!0,J.nextTick(U,f,c))}function U(f,c){for(;!c.reading&&!c.ended&&(c.length<c.highWaterMark||c.flowing&&c.length===0);){var R=c.length;if(u("maybeReadMore read 0"),f.read(0),R===c.length)break}c.readingMore=!1}w.prototype._read=function(f){N(this,new k("_read()"))},w.prototype.pipe=function(f,c){var R=this,D=this._readableState;switch(D.pipesCount){case 0:D.pipes=f;break;case 1:D.pipes=[D.pipes,f];break;default:D.pipes.push(f);break}D.pipesCount+=1,u("pipe count=%d opts=%j",D.pipesCount,c);var ee=(!c||c.end!==!1)&&f!==J.stdout&&f!==J.stderr,j=ee?yt:Bt;D.endEmitted?J.nextTick(j):R.once("end",j),f.on("unpipe",te);function te(gt,vt){u("onunpipe"),gt===R&&vt&&vt.hasUnpiped===!1&&(vt.hasUnpiped=!0,xo())}function yt(){u("onend"),f.end()}var er=$(R);f.on("drain",er);var Wn=!1;function xo(){u("cleanup"),f.removeListener("close",Fr),f.removeListener("finish",Dr),f.removeListener("drain",er),f.removeListener("error",Br),f.removeListener("unpipe",te),R.removeListener("end",yt),R.removeListener("end",Bt),R.removeListener("data",$n),Wn=!0,D.awaitDrain&&(!f._writableState||f._writableState.needDrain)&&er()}R.on("data",$n);function $n(gt){u("ondata");var vt=f.write(gt);u("dest.write",vt),vt===!1&&((D.pipesCount===1&&D.pipes===f||D.pipesCount>1&&L(D.pipes,f)!==-1)&&!Wn&&(u("false write response, pause",D.awaitDrain),D.awaitDrain++),R.pause())}function Br(gt){u("onerror",gt),Bt(),f.removeListener("error",Br),e(f,"error")===0&&N(f,gt)}A(f,"error",Br);function Fr(){f.removeListener("finish",Dr),Bt()}f.once("close",Fr);function Dr(){u("onfinish"),f.removeListener("close",Fr),Bt()}f.once("finish",Dr);function Bt(){u("unpipe"),R.unpipe(f)}return f.emit("pipe",R),D.flowing||(u("pipe resume"),R.resume()),f};function $(f){return function(){var R=f._readableState;u("pipeOnDrain",R.awaitDrain),R.awaitDrain&&R.awaitDrain--,R.awaitDrain===0&&e(f,"data")&&(R.flowing=!0,y(f))}}w.prototype.unpipe=function(f){var c=this._readableState,R={hasUnpiped:!1};if(c.pipesCount===0)return this;if(c.pipesCount===1)return f&&f!==c.pipes?this:(f||(f=c.pipes),c.pipes=null,c.pipesCount=0,c.flowing=!1,f&&f.emit("unpipe",this,R),this);if(!f){var D=c.pipes,ee=c.pipesCount;c.pipes=null,c.pipesCount=0,c.flowing=!1;for(var j=0;j<ee;j++)D[j].emit("unpipe",this,{hasUnpiped:!1});return this}var te=L(c.pipes,f);return te===-1?this:(c.pipes.splice(te,1),c.pipesCount-=1,c.pipesCount===1&&(c.pipes=c.pipes[0]),f.emit("unpipe",this,R),this)},w.prototype.on=function(f,c){var R=r.prototype.on.call(this,f,c),D=this._readableState;return f==="data"?(D.readableListening=this.listenerCount("readable")>0,D.flowing!==!1&&this.resume()):f==="readable"&&!D.endEmitted&&!D.readableListening&&(D.readableListening=D.needReadable=!0,D.flowing=!1,D.emittedReadable=!1,u("on readable",D.length,D.reading),D.length?M(this):D.reading||J.nextTick(Q,this)),R},w.prototype.addListener=w.prototype.on,w.prototype.removeListener=function(f,c){var R=r.prototype.removeListener.call(this,f,c);return f==="readable"&&J.nextTick(K,this),R},w.prototype.removeAllListeners=function(f){var c=r.prototype.removeAllListeners.apply(this,arguments);return(f==="readable"||f===void 0)&&J.nextTick(K,this),c};function K(f){var c=f._readableState;c.readableListening=f.listenerCount("readable")>0,c.resumeScheduled&&!c.paused?c.flowing=!0:f.listenerCount("data")>0&&f.resume()}function Q(f){u("readable nexttick read 0"),f.read(0)}w.prototype.resume=function(){var f=this._readableState;return f.flowing||(u("resume"),f.flowing=!f.readableListening,ue(this,f)),f.paused=!1,this};function ue(f,c){c.resumeScheduled||(c.resumeScheduled=!0,J.nextTick(de,f,c))}function de(f,c){u("resume",c.reading),c.reading||f.read(0),c.resumeScheduled=!1,f.emit("resume"),y(f),c.flowing&&!c.reading&&f.read(0)}w.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function y(f){var c=f._readableState;for(u("flow",c.flowing);c.flowing&&f.read()!==null;);}w.prototype.wrap=function(f){var c=this,R=this._readableState,D=!1;f.on("end",function(){if(u("wrapped end"),R.decoder&&!R.ended){var te=R.decoder.end();te&&te.length&&c.push(te)}c.push(null)}),f.on("data",function(te){if(u("wrapped data"),R.decoder&&(te=R.decoder.write(te)),!(R.objectMode&&te==null)&&!(!R.objectMode&&(!te||!te.length))){var yt=c.push(te);yt||(D=!0,f.pause())}});for(var ee in f)this[ee]===void 0&&typeof f[ee]=="function"&&(this[ee]=function(yt){return function(){return f[yt].apply(f,arguments)}}(ee));for(var j=0;j<W.length;j++)f.on(W[j],this.emit.bind(this,W[j]));return this._read=function(te){u("wrapped _read",te),D&&(D=!1,f.resume())},this},typeof Symbol=="function"&&(w.prototype[Symbol.asyncIterator]=function(){return B===void 0&&(B=df()),B(this)}),Object.defineProperty(w.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(w.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(w.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(c){this._readableState&&(this._readableState.flowing=c)}}),w._fromList=g,Object.defineProperty(w.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function g(f,c){if(c.length===0)return null;var R;return c.objectMode?R=c.buffer.shift():!f||f>=c.length?(c.decoder?R=c.buffer.join(""):c.buffer.length===1?R=c.buffer.first():R=c.buffer.concat(c.length),c.buffer.clear()):R=c.buffer.consume(f,c.decoder),R}function m(f){var c=f._readableState;u("endReadable",c.endEmitted),c.endEmitted||(c.ended=!0,J.nextTick(C,c,f))}function C(f,c){if(u("endReadableNT",f.endEmitted,f.length),!f.endEmitted&&f.length===0&&(f.endEmitted=!0,c.readable=!1,c.emit("end"),f.autoDestroy)){var R=c._writableState;(!R||R.autoDestroy&&R.finished)&&c.destroy()}}typeof Symbol=="function"&&(w.from=function(f,c){return F===void 0&&(F=pf()),F(w,f,c)});function L(f,c){for(var R=0,D=f.length;R<D;R++)if(f[R]===c)return R;return-1}return Vr}var Bn=je,mr=ft.codes,yf=mr.ERR_METHOD_NOT_IMPLEMENTED,gf=mr.ERR_MULTIPLE_CALLBACK,vf=mr.ERR_TRANSFORM_ALREADY_TRANSFORMING,wf=mr.ERR_TRANSFORM_WITH_LENGTH_0,xr=Tt();be(je,xr);function bf(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new gf);r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function je(t){if(!(this instanceof je))return new je(t);xr.call(this,t),this._transformState={afterTransform:bf.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",_f)}function _f(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,r){fi(t,e,r)}):fi(this,null,null)}je.prototype.push=function(t,e){return this._transformState.needTransform=!1,xr.prototype.push.call(this,t,e)};je.prototype._transform=function(t,e,r){r(new yf("_transform()"))};je.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};je.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};je.prototype._destroy=function(t,e){xr.prototype._destroy.call(this,t,function(r){e(r)})};function fi(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new wf;if(t._transformState.transforming)throw new vf;return t.push(null)}Bn.default;var Fa=jt,Da=Bn;be(jt,Da);function jt(t){if(!(this instanceof jt))return new jt(t);Da.call(this,t)}jt.prototype._transform=function(t,e,r){r(null,t)};Fa.default;var Yr;function mf(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var Ma=ft.codes,xf=Ma.ERR_MISSING_ARGS,Ef=Ma.ERR_STREAM_DESTROYED;function li(t){if(t)throw t}function Af(t){return t.setHeader&&typeof t.abort=="function"}function Sf(t,e,r,n){n=mf(n);var i=!1;t.on("close",function(){i=!0}),Yr===void 0&&(Yr=_r),Yr(t,{readable:e,writable:r},function(o){if(o)return n(o);i=!0,n()});var a=!1;return function(o){if(!i&&!a){if(a=!0,Af(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();n(o||new Ef("pipe"))}}}function ci(t){t()}function Rf(t,e){return t.pipe(e)}function Tf(t){return!t.length||typeof t[t.length-1]!="function"?li:t.pop()}function kf(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=Tf(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new xf("streams");var i,a=e.map(function(o,s){var u=s<e.length-1,l=s>0;return Sf(o,u,l,function(h){i||(i=h),h&&a.forEach(ci),!u&&(a.forEach(ci),n(i))})});return e.reduce(Rf)}var Ia=kf;Ia.default;(function(t,e){e=t.exports=Ba(),e.Stream=e,e.Readable=e,e.Writable=Pa(),e.Duplex=Tt(),e.Transform=Bn,e.PassThrough=Fa,e.finished=_r,e.pipeline=Ia})(fn,fn.exports);var La=fn.exports;La.default;var fr=Fe.Buffer,Ua=La.Transform,Of=be;function Pf(t,e){if(!fr.isBuffer(t)&&typeof t!="string")throw new TypeError(e+" must be a string or a buffer")}function Ge(t){Ua.call(this),this._block=fr.allocUnsafe(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}Of(Ge,Ua);Ge.prototype._transform=function(t,e,r){var n=null;try{this.update(t,e)}catch(i){n=i}r(n)};Ge.prototype._flush=function(t){var e=null;try{this.push(this.digest())}catch(r){e=r}t(e)};Ge.prototype.update=function(t,e){if(Pf(t,"Data"),this._finalized)throw new Error("Digest already called");fr.isBuffer(t)||(t=fr.from(t,e));for(var r=this._block,n=0;this._blockOffset+t.length-n>=this._blockSize;){for(var i=this._blockOffset;i<this._blockSize;)r[i++]=t[n++];this._update(),this._blockOffset=0}for(;n<t.length;)r[this._blockOffset++]=t[n++];for(var a=0,o=t.length*8;o>0;++a)this._length[a]+=o,o=this._length[a]/4294967296|0,o>0&&(this._length[a]-=4294967296*o);return this};Ge.prototype._update=function(){throw new Error("_update is not implemented")};Ge.prototype.digest=function(t){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var e=this._digest();t!==void 0&&(e=e.toString(t)),this._block.fill(0),this._blockOffset=0;for(var r=0;r<4;++r)this._length[r]=0;return e};Ge.prototype._digest=function(){throw new Error("_digest is not implemented")};var Fn=Ge;Fn.default;var Cf=be,za=Fn,Bf=Fe.Buffer,Ff=new Array(16);function Er(){za.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}Cf(Er,za);Er.prototype._update=function(){for(var t=Ff,e=0;e<16;++e)t[e]=this._block.readInt32LE(e*4);var r=this._a,n=this._b,i=this._c,a=this._d;r=ye(r,n,i,a,t[0],3614090360,7),a=ye(a,r,n,i,t[1],3905402710,12),i=ye(i,a,r,n,t[2],606105819,17),n=ye(n,i,a,r,t[3],3250441966,22),r=ye(r,n,i,a,t[4],4118548399,7),a=ye(a,r,n,i,t[5],1200080426,12),i=ye(i,a,r,n,t[6],2821735955,17),n=ye(n,i,a,r,t[7],4249261313,22),r=ye(r,n,i,a,t[8],1770035416,7),a=ye(a,r,n,i,t[9],2336552879,12),i=ye(i,a,r,n,t[10],4294925233,17),n=ye(n,i,a,r,t[11],2304563134,22),r=ye(r,n,i,a,t[12],1804603682,7),a=ye(a,r,n,i,t[13],4254626195,12),i=ye(i,a,r,n,t[14],2792965006,17),n=ye(n,i,a,r,t[15],1236535329,22),r=ge(r,n,i,a,t[1],4129170786,5),a=ge(a,r,n,i,t[6],3225465664,9),i=ge(i,a,r,n,t[11],643717713,14),n=ge(n,i,a,r,t[0],3921069994,20),r=ge(r,n,i,a,t[5],3593408605,5),a=ge(a,r,n,i,t[10],38016083,9),i=ge(i,a,r,n,t[15],3634488961,14),n=ge(n,i,a,r,t[4],3889429448,20),r=ge(r,n,i,a,t[9],568446438,5),a=ge(a,r,n,i,t[14],3275163606,9),i=ge(i,a,r,n,t[3],4107603335,14),n=ge(n,i,a,r,t[8],1163531501,20),r=ge(r,n,i,a,t[13],2850285829,5),a=ge(a,r,n,i,t[2],4243563512,9),i=ge(i,a,r,n,t[7],1735328473,14),n=ge(n,i,a,r,t[12],2368359562,20),r=ve(r,n,i,a,t[5],4294588738,4),a=ve(a,r,n,i,t[8],2272392833,11),i=ve(i,a,r,n,t[11],1839030562,16),n=ve(n,i,a,r,t[14],4259657740,23),r=ve(r,n,i,a,t[1],2763975236,4),a=ve(a,r,n,i,t[4],1272893353,11),i=ve(i,a,r,n,t[7],4139469664,16),n=ve(n,i,a,r,t[10],3200236656,23),r=ve(r,n,i,a,t[13],681279174,4),a=ve(a,r,n,i,t[0],3936430074,11),i=ve(i,a,r,n,t[3],3572445317,16),n=ve(n,i,a,r,t[6],76029189,23),r=ve(r,n,i,a,t[9],3654602809,4),a=ve(a,r,n,i,t[12],3873151461,11),i=ve(i,a,r,n,t[15],530742520,16),n=ve(n,i,a,r,t[2],3299628645,23),r=we(r,n,i,a,t[0],4096336452,6),a=we(a,r,n,i,t[7],1126891415,10),i=we(i,a,r,n,t[14],2878612391,15),n=we(n,i,a,r,t[5],4237533241,21),r=we(r,n,i,a,t[12],1700485571,6),a=we(a,r,n,i,t[3],2399980690,10),i=we(i,a,r,n,t[10],4293915773,15),n=we(n,i,a,r,t[1],2240044497,21),r=we(r,n,i,a,t[8],1873313359,6),a=we(a,r,n,i,t[15],4264355552,10),i=we(i,a,r,n,t[6],2734768916,15),n=we(n,i,a,r,t[13],1309151649,21),r=we(r,n,i,a,t[4],4149444226,6),a=we(a,r,n,i,t[11],3174756917,10),i=we(i,a,r,n,t[2],718787259,15),n=we(n,i,a,r,t[9],3951481745,21),this._a=this._a+r|0,this._b=this._b+n|0,this._c=this._c+i|0,this._d=this._d+a|0};Er.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=Bf.allocUnsafe(16);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t};function Ar(t,e){return t<<e|t>>>32-e}function ye(t,e,r,n,i,a,o){return Ar(t+(e&r|~e&n)+i+a|0,o)+e|0}function ge(t,e,r,n,i,a,o){return Ar(t+(e&n|r&~n)+i+a|0,o)+e|0}function ve(t,e,r,n,i,a,o){return Ar(t+(e^r^n)+i+a|0,o)+e|0}function we(t,e,r,n,i,a,o){return Ar(t+(r^(e|~n))+i+a|0,o)+e|0}var Na=Er;Na.default;var Jr=Pt.Buffer,Df=be,Wa=Fn,Mf=new Array(16),Ft=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],Dt=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Mt=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],It=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],Lt=[0,1518500249,1859775393,2400959708,2840853838],Ut=[1352829926,1548603684,1836072691,2053994217,0];function Sr(){Wa.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}Df(Sr,Wa);Sr.prototype._update=function(){for(var t=Mf,e=0;e<16;++e)t[e]=this._block.readInt32LE(e*4);for(var r=this._a|0,n=this._b|0,i=this._c|0,a=this._d|0,o=this._e|0,s=this._a|0,u=this._b|0,l=this._c|0,h=this._d|0,p=this._e|0,b=0;b<80;b+=1){var P,E;b<16?(P=hi(r,n,i,a,o,t[Ft[b]],Lt[0],Mt[b]),E=gi(s,u,l,h,p,t[Dt[b]],Ut[0],It[b])):b<32?(P=di(r,n,i,a,o,t[Ft[b]],Lt[1],Mt[b]),E=yi(s,u,l,h,p,t[Dt[b]],Ut[1],It[b])):b<48?(P=pi(r,n,i,a,o,t[Ft[b]],Lt[2],Mt[b]),E=pi(s,u,l,h,p,t[Dt[b]],Ut[2],It[b])):b<64?(P=yi(r,n,i,a,o,t[Ft[b]],Lt[3],Mt[b]),E=di(s,u,l,h,p,t[Dt[b]],Ut[3],It[b])):(P=gi(r,n,i,a,o,t[Ft[b]],Lt[4],Mt[b]),E=hi(s,u,l,h,p,t[Dt[b]],Ut[4],It[b])),r=o,o=a,a=it(i,10),i=n,n=P,s=p,p=h,h=it(l,10),l=u,u=E}var T=this._b+i+h|0;this._b=this._c+a+p|0,this._c=this._d+o+s|0,this._d=this._e+r+u|0,this._e=this._a+n+l|0,this._a=T};Sr.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=Jr.alloc?Jr.alloc(20):new Jr(20);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t.writeInt32LE(this._e,16),t};function it(t,e){return t<<e|t>>>32-e}function hi(t,e,r,n,i,a,o,s){return it(t+(e^r^n)+a+o|0,s)+i|0}function di(t,e,r,n,i,a,o,s){return it(t+(e&r|~e&n)+a+o|0,s)+i|0}function pi(t,e,r,n,i,a,o,s){return it(t+((e|~r)^n)+a+o|0,s)+i|0}function yi(t,e,r,n,i,a,o,s){return it(t+(e&n|r&~n)+a+o|0,s)+i|0}function gi(t,e,r,n,i,a,o,s){return it(t+(e^(r|~n))+a+o|0,s)+i|0}var $a=Sr;$a.default;var qa={exports:{}},ja=Fe.Buffer;function Rr(t,e){this._block=ja.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}Rr.prototype.update=function(t,e){typeof t=="string"&&(e=e||"utf8",t=ja.from(t,e));for(var r=this._block,n=this._blockSize,i=t.length,a=this._len,o=0;o<i;){for(var s=a%n,u=Math.min(i-o,n-s),l=0;l<u;l++)r[s+l]=t[o+l];a+=u,o+=u,a%n===0&&this._update(r)}return this._len+=i,this};Rr.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=this._len*8;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(r&4294967295)>>>0,i=(r-n)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var a=this._hash();return t?a.toString(t):a};Rr.prototype._update=function(){throw new Error("_update must be implemented by subclass")};var lt=Rr;lt.default;var If=be,Ka=lt,Lf=Fe.Buffer,Uf=[1518500249,1859775393,-1894007588,-899497514],zf=new Array(80);function Jt(){this.init(),this._w=zf,Ka.call(this,64,56)}If(Jt,Ka);Jt.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function Nf(t){return t<<5|t>>>27}function Wf(t){return t<<30|t>>>2}function $f(t,e,r,n){return t===0?e&r|~e&n:t===2?e&r|e&n|r&n:e^r^n}Jt.prototype._update=function(t){for(var e=this._w,r=this._a|0,n=this._b|0,i=this._c|0,a=this._d|0,o=this._e|0,s=0;s<16;++s)e[s]=t.readInt32BE(s*4);for(;s<80;++s)e[s]=e[s-3]^e[s-8]^e[s-14]^e[s-16];for(var u=0;u<80;++u){var l=~~(u/20),h=Nf(r)+$f(l,n,i,a)+o+e[u]+Uf[l]|0;o=a,a=i,i=Wf(n),n=r,r=h}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=a+this._d|0,this._e=o+this._e|0};Jt.prototype._hash=function(){var t=Lf.allocUnsafe(20);return t.writeInt32BE(this._a|0,0),t.writeInt32BE(this._b|0,4),t.writeInt32BE(this._c|0,8),t.writeInt32BE(this._d|0,12),t.writeInt32BE(this._e|0,16),t};var Ha=Jt;Ha.default;var qf=be,Va=lt,jf=Fe.Buffer,Kf=[1518500249,1859775393,-1894007588,-899497514],Hf=new Array(80);function Xt(){this.init(),this._w=Hf,Va.call(this,64,56)}qf(Xt,Va);Xt.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function Vf(t){return t<<1|t>>>31}function Yf(t){return t<<5|t>>>27}function Jf(t){return t<<30|t>>>2}function Xf(t,e,r,n){return t===0?e&r|~e&n:t===2?e&r|e&n|r&n:e^r^n}Xt.prototype._update=function(t){for(var e=this._w,r=this._a|0,n=this._b|0,i=this._c|0,a=this._d|0,o=this._e|0,s=0;s<16;++s)e[s]=t.readInt32BE(s*4);for(;s<80;++s)e[s]=Vf(e[s-3]^e[s-8]^e[s-14]^e[s-16]);for(var u=0;u<80;++u){var l=~~(u/20),h=Yf(r)+Xf(l,n,i,a)+o+e[u]+Kf[l]|0;o=a,a=i,i=Jf(n),n=r,r=h}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=a+this._d|0,this._e=o+this._e|0};Xt.prototype._hash=function(){var t=jf.allocUnsafe(20);return t.writeInt32BE(this._a|0,0),t.writeInt32BE(this._b|0,4),t.writeInt32BE(this._c|0,8),t.writeInt32BE(this._d|0,12),t.writeInt32BE(this._e|0,16),t};var Ya=Xt;Ya.default;var Gf=be,Ja=lt,Zf=Fe.Buffer,Qf=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],el=new Array(64);function Gt(){this.init(),this._w=el,Ja.call(this,64,56)}Gf(Gt,Ja);Gt.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function tl(t,e,r){return r^t&(e^r)}function rl(t,e,r){return t&e|r&(t|e)}function nl(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function il(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function al(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}function ol(t){return(t>>>17|t<<15)^(t>>>19|t<<13)^t>>>10}Gt.prototype._update=function(t){for(var e=this._w,r=this._a|0,n=this._b|0,i=this._c|0,a=this._d|0,o=this._e|0,s=this._f|0,u=this._g|0,l=this._h|0,h=0;h<16;++h)e[h]=t.readInt32BE(h*4);for(;h<64;++h)e[h]=ol(e[h-2])+e[h-7]+al(e[h-15])+e[h-16]|0;for(var p=0;p<64;++p){var b=l+il(o)+tl(o,s,u)+Qf[p]+e[p]|0,P=nl(r)+rl(r,n,i)|0;l=u,u=s,s=o,o=a+b|0,a=i,i=n,n=r,r=b+P|0}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=a+this._d|0,this._e=o+this._e|0,this._f=s+this._f|0,this._g=u+this._g|0,this._h=l+this._h|0};Gt.prototype._hash=function(){var t=Zf.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t};var Dn=Gt;Dn.default;var sl=be,ul=Dn,fl=lt,ll=Fe.Buffer,cl=new Array(64);function Tr(){this.init(),this._w=cl,fl.call(this,64,56)}sl(Tr,ul);Tr.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this};Tr.prototype._hash=function(){var t=ll.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t};var Xa=Tr;Xa.default;var hl=be,Ga=lt,dl=Fe.Buffer,vi=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],pl=new Array(160);function Zt(){this.init(),this._w=pl,Ga.call(this,128,112)}hl(Zt,Ga);Zt.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function wi(t,e,r){return r^t&(e^r)}function bi(t,e,r){return t&e|r&(t|e)}function _i(t,e){return(t>>>28|e<<4)^(e>>>2|t<<30)^(e>>>7|t<<25)}function mi(t,e){return(t>>>14|e<<18)^(t>>>18|e<<14)^(e>>>9|t<<23)}function yl(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^t>>>7}function gl(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)}function vl(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^t>>>6}function wl(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^(t>>>6|e<<26)}function le(t,e){return t>>>0<e>>>0?1:0}Zt.prototype._update=function(t){for(var e=this._w,r=this._ah|0,n=this._bh|0,i=this._ch|0,a=this._dh|0,o=this._eh|0,s=this._fh|0,u=this._gh|0,l=this._hh|0,h=this._al|0,p=this._bl|0,b=this._cl|0,P=this._dl|0,E=this._el|0,T=this._fl|0,k=this._gl|0,d=this._hl|0,v=0;v<32;v+=2)e[v]=t.readInt32BE(v*4),e[v+1]=t.readInt32BE(v*4+4);for(;v<160;v+=2){var B=e[v-30],F=e[v-15*2+1],N=yl(B,F),W=gl(F,B);B=e[v-2*2],F=e[v-2*2+1];var A=vl(B,F),_=wl(F,B),w=e[v-7*2],O=e[v-7*2+1],se=e[v-16*2],he=e[v-16*2+1],Y=W+O|0,Z=N+w+le(Y,W)|0;Y=Y+_|0,Z=Z+A+le(Y,_)|0,Y=Y+he|0,Z=Z+se+le(Y,he)|0,e[v]=Z,e[v+1]=Y}for(var ne=0;ne<160;ne+=2){Z=e[ne],Y=e[ne+1];var x=bi(r,n,i),M=bi(h,p,b),I=_i(r,h),z=_i(h,r),U=mi(o,E),$=mi(E,o),K=vi[ne],Q=vi[ne+1],ue=wi(o,s,u),de=wi(E,T,k),y=d+$|0,g=l+U+le(y,d)|0;y=y+de|0,g=g+ue+le(y,de)|0,y=y+Q|0,g=g+K+le(y,Q)|0,y=y+Y|0,g=g+Z+le(y,Y)|0;var m=z+M|0,C=I+x+le(m,z)|0;l=u,d=k,u=s,k=T,s=o,T=E,E=P+y|0,o=a+g+le(E,P)|0,a=i,P=b,i=n,b=p,n=r,p=h,h=y+m|0,r=g+C+le(h,y)|0}this._al=this._al+h|0,this._bl=this._bl+p|0,this._cl=this._cl+b|0,this._dl=this._dl+P|0,this._el=this._el+E|0,this._fl=this._fl+T|0,this._gl=this._gl+k|0,this._hl=this._hl+d|0,this._ah=this._ah+r+le(this._al,h)|0,this._bh=this._bh+n+le(this._bl,p)|0,this._ch=this._ch+i+le(this._cl,b)|0,this._dh=this._dh+a+le(this._dl,P)|0,this._eh=this._eh+o+le(this._el,E)|0,this._fh=this._fh+s+le(this._fl,T)|0,this._gh=this._gh+u+le(this._gl,k)|0,this._hh=this._hh+l+le(this._hl,d)|0};Zt.prototype._hash=function(){var t=dl.allocUnsafe(64);function e(r,n,i){t.writeInt32BE(r,i),t.writeInt32BE(n,i+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),t};var Mn=Zt;Mn.default;var bl=be,_l=Mn,ml=lt,xl=Fe.Buffer,El=new Array(160);function kr(){this.init(),this._w=El,ml.call(this,128,112)}bl(kr,_l);kr.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this};kr.prototype._hash=function(){var t=xl.allocUnsafe(48);function e(r,n,i){t.writeInt32BE(r,i),t.writeInt32BE(n,i+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),t};var Za=kr;Za.default;var ct=qa.exports=function(e){e=e.toLowerCase();var r=ct[e];if(!r)throw new Error(e+" is not supported (we accept pull requests)");return new r};ct.sha=Ha;ct.sha1=Ya;ct.sha224=Xa;ct.sha256=Dn;ct.sha384=Za;ct.sha512=Mn;var Al=qa.exports;function ht(){this.head=null,this.tail=null,this.length=0}ht.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length};ht.prototype.unshift=function(t){var e={data:t,next:this.head};this.length===0&&(this.tail=e),this.head=e,++this.length};ht.prototype.shift=function(){if(this.length!==0){var t=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,t}};ht.prototype.clear=function(){this.head=this.tail=null,this.length=0};ht.prototype.join=function(t){if(this.length===0)return"";for(var e=this.head,r=""+e.data;e=e.next;)r+=t+e.data;return r};ht.prototype.concat=function(t){if(this.length===0)return S.alloc(0);if(this.length===1)return this.head.data;for(var e=S.allocUnsafe(t>>>0),r=this.head,n=0;r;)r.data.copy(e,n),n+=r.data.length,r=r.next;return e};ie.ReadableState=Qa;var G=Rn("stream");Xe(ie,V);function Sl(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function Rl(t,e){return t.listeners(e).length}function Qa(t,e){t=t||{},this.objectMode=!!t.objectMode,e instanceof xe&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var r=t.highWaterMark,n=this.objectMode?16:16*1024;this.highWaterMark=r||r===0?r:n,this.highWaterMark=~~this.highWaterMark,this.buffer=new ht,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(this.decoder=new Ct(t.encoding),this.encoding=t.encoding)}function ie(t){if(!(this instanceof ie))return new ie(t);this._readableState=new Qa(t,this),this.readable=!0,t&&typeof t.read=="function"&&(this._read=t.read),V.call(this)}ie.prototype.push=function(t,e){var r=this._readableState;return!r.objectMode&&typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=S.from(t,e),e="")),eo(this,r,t,e,!1)};ie.prototype.unshift=function(t){var e=this._readableState;return eo(this,e,t,"",!0)};ie.prototype.isPaused=function(){return this._readableState.flowing===!1};function eo(t,e,r,n,i){var a=Ol(e,r);if(a)t.emit("error",a);else if(r===null)e.reading=!1,Pl(t,e);else if(e.objectMode||r&&r.length>0)if(e.ended&&!i){var o=new Error("stream.push() after EOF");t.emit("error",o)}else if(e.endEmitted&&i){var s=new Error("stream.unshift() after end event");t.emit("error",s)}else{var u;e.decoder&&!i&&!n&&(r=e.decoder.write(r),u=!e.objectMode&&r.length===0),i||(e.reading=!1),u||(e.flowing&&e.length===0&&!e.sync?(t.emit("data",r),t.read(0)):(e.length+=e.objectMode?1:r.length,i?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&Or(t))),Cl(t,e)}else i||(e.reading=!1);return Tl(e)}function Tl(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||t.length===0)}ie.prototype.setEncoding=function(t){return this._readableState.decoder=new Ct(t),this._readableState.encoding=t,this};var xi=8388608;function kl(t){return t>=xi?t=xi:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function Ei(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=kl(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}ie.prototype.read=function(t){G("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return G("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?Xr(this):Or(this),null;if(t=Ei(t,e),t===0&&e.ended)return e.length===0&&Xr(this),null;var n=e.needReadable;G("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,G("length less than watermark",n)),e.ended||e.reading?(n=!1,G("reading or ended",n)):n&&(G("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=Ei(r,e)));var i;return t>0?i=to(t,e):i=null,i===null?(e.needReadable=!0,t=0):e.length-=t,e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&Xr(this)),i!==null&&this.emit("data",i),i};function Ol(t,e){var r=null;return!S.isBuffer(e)&&typeof e!="string"&&e!==null&&e!==void 0&&!t.objectMode&&(r=new TypeError("Invalid non-string/buffer chunk")),r}function Pl(t,e){if(!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,Or(t)}}function Or(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(G("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?Ee(Ai,t):Ai(t))}function Ai(t){G("emit readable"),t.emit("readable"),In(t)}function Cl(t,e){e.readingMore||(e.readingMore=!0,Ee(Bl,t,e))}function Bl(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(G("maybeReadMore read 0"),t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}ie.prototype._read=function(t){this.emit("error",new Error("not implemented"))};ie.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,G("pipe count=%d opts=%j",n.pipesCount,e);var i=!e||e.end!==!1,a=i?s:h;n.endEmitted?Ee(a):r.once("end",a),t.on("unpipe",o);function o(d){G("onunpipe"),d===r&&h()}function s(){G("onend"),t.end()}var u=Fl(r);t.on("drain",u);var l=!1;function h(){G("cleanup"),t.removeListener("close",E),t.removeListener("finish",T),t.removeListener("drain",u),t.removeListener("error",P),t.removeListener("unpipe",o),r.removeListener("end",s),r.removeListener("end",h),r.removeListener("data",b),l=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&u()}var p=!1;r.on("data",b);function b(d){G("ondata"),p=!1;var v=t.write(d);v===!1&&!p&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&ro(n.pipes,t)!==-1)&&!l&&(G("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,p=!0),r.pause())}function P(d){G("onerror",d),k(),t.removeListener("error",P),Rl(t,"error")===0&&t.emit("error",d)}Sl(t,"error",P);function E(){t.removeListener("finish",T),k()}t.once("close",E);function T(){G("onfinish"),t.removeListener("close",E),k()}t.once("finish",T);function k(){G("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(G("pipe resume"),r.resume()),t};function Fl(t){return function(){var e=t._readableState;G("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,e.awaitDrain===0&&t.listeners("data").length&&(e.flowing=!0,In(t))}}ie.prototype.unpipe=function(t){var e=this._readableState;if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var r=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var i=0;i<n;i++)r[i].emit("unpipe",this);return this}var a=ro(e.pipes,t);return a===-1?this:(e.pipes.splice(a,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)};ie.prototype.on=function(t,e){var r=V.prototype.on.call(this,t,e);if(t==="data")this._readableState.flowing!==!1&&this.resume();else if(t==="readable"){var n=this._readableState;!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&Or(this):Ee(Dl,this))}return r};ie.prototype.addListener=ie.prototype.on;function Dl(t){G("readable nexttick read 0"),t.read(0)}ie.prototype.resume=function(){var t=this._readableState;return t.flowing||(G("resume"),t.flowing=!0,Ml(this,t)),this};function Ml(t,e){e.resumeScheduled||(e.resumeScheduled=!0,Ee(Il,t,e))}function Il(t,e){e.reading||(G("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),In(t),e.flowing&&!e.reading&&t.read(0)}ie.prototype.pause=function(){return G("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(G("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function In(t){var e=t._readableState;for(G("flow",e.flowing);e.flowing&&t.read()!==null;);}ie.prototype.wrap=function(t){var e=this._readableState,r=!1,n=this;t.on("end",function(){if(G("wrapped end"),e.decoder&&!e.ended){var o=e.decoder.end();o&&o.length&&n.push(o)}n.push(null)}),t.on("data",function(o){if(G("wrapped data"),e.decoder&&(o=e.decoder.write(o)),!(e.objectMode&&o==null)&&!(!e.objectMode&&(!o||!o.length))){var s=n.push(o);s||(r=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=function(o){return function(){return t[o].apply(t,arguments)}}(i));var a=["error","close","destroy","pause","resume"];return Wl(a,function(o){t.on(o,n.emit.bind(n,o))}),n._read=function(o){G("wrapped _read",o),r&&(r=!1,t.resume())},n};ie._fromList=to;function to(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.head.data:r=e.buffer.concat(e.length),e.buffer.clear()):r=Ll(t,e.buffer,e.decoder),r}function Ll(t,e,r){var n;return t<e.head.data.length?(n=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):t===e.head.data.length?n=e.shift():n=r?Ul(t,e):zl(t,e),n}function Ul(t,e){var r=e.head,n=1,i=r.data;for(t-=i.length;r=r.next;){var a=r.data,o=t>a.length?a.length:t;if(o===a.length?i+=a:i+=a.slice(0,t),t-=o,t===0){o===a.length?(++n,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=a.slice(o));break}++n}return e.length-=n,i}function zl(t,e){var r=S.allocUnsafe(t),n=e.head,i=1;for(n.data.copy(r),t-=n.data.length;n=n.next;){var a=n.data,o=t>a.length?a.length:t;if(a.copy(r,r.length-t,0,o),t-=o,t===0){o===a.length?(++i,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=a.slice(o));break}++i}return e.length-=i,r}function Xr(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,Ee(Nl,e,t))}function Nl(t,e){!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function Wl(t,e){for(var r=0,n=t.length;r<n;r++)e(t[r],r)}function ro(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}pe.WritableState=Ln;Xe(pe,V);function $l(){}function ql(t,e,r){this.chunk=t,this.encoding=e,this.callback=r,this.next=null}function Ln(t,e){Object.defineProperty(this,"buffer",{get:wr(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),t=t||{},this.objectMode=!!t.objectMode,e instanceof xe&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var r=t.highWaterMark,n=this.objectMode?16:16*1024;this.highWaterMark=r||r===0?r:n,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var i=t.decodeStrings===!1;this.decodeStrings=!i,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(a){Xl(e,a)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new oo(this)}Ln.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};function pe(t){if(!(this instanceof pe)&&!(this instanceof xe))return new pe(t);this._writableState=new Ln(t,this),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev)),V.call(this)}pe.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function jl(t,e){var r=new Error("write after end");t.emit("error",r),Ee(e,r)}function Kl(t,e,r,n){var i=!0,a=!1;return r===null?a=new TypeError("May not write null values to stream"):!S.isBuffer(r)&&typeof r!="string"&&r!==void 0&&!e.objectMode&&(a=new TypeError("Invalid non-string/buffer chunk")),a&&(t.emit("error",a),Ee(n,a),i=!1),i}pe.prototype.write=function(t,e,r){var n=this._writableState,i=!1;return typeof e=="function"&&(r=e,e=null),S.isBuffer(t)?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=$l),n.ended?jl(this,r):Kl(this,n,t,r)&&(n.pendingcb++,i=Vl(this,n,t,e,r)),i};pe.prototype.cork=function(){var t=this._writableState;t.corked++};pe.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.finished&&!t.bufferProcessing&&t.bufferedRequest&&no(this,t))};pe.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this};function Hl(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=S.from(e,r)),e}function Vl(t,e,r,n,i){r=Hl(e,r,n),S.isBuffer(r)&&(n="buffer");var a=e.objectMode?1:r.length;e.length+=a;var o=e.length<e.highWaterMark;if(o||(e.needDrain=!0),e.writing||e.corked){var s=e.lastBufferedRequest;e.lastBufferedRequest=new ql(r,n,i),s?s.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else dn(t,e,!1,a,r,n,i);return o}function dn(t,e,r,n,i,a,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,r?t._writev(i,e.onwrite):t._write(i,a,e.onwrite),e.sync=!1}function Yl(t,e,r,n,i){--e.pendingcb,r?Ee(i,n):i(n),t._writableState.errorEmitted=!0,t.emit("error",n)}function Jl(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function Xl(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(Jl(r),e)Yl(t,r,n,e,i);else{var a=io(r);!a&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&no(t,r),n?Ee(Si,t,r,a,i):Si(t,r,a,i)}}function Si(t,e,r,n){r||Gl(t,e),e.pendingcb--,n(),ao(t,e)}function Gl(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function no(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),a=e.corkedRequestsFree;a.entry=r;for(var o=0;r;)i[o]=r,r=r.next,o+=1;dn(t,e,!0,e.length,i,"",a.finish),e.pendingcb++,e.lastBufferedRequest=null,a.next?(e.corkedRequestsFree=a.next,a.next=null):e.corkedRequestsFree=new oo(e)}else{for(;r;){var s=r.chunk,u=r.encoding,l=r.callback,h=e.objectMode?1:s.length;if(dn(t,e,!1,h,s,u,l),r=r.next,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=r,e.bufferProcessing=!1}pe.prototype._write=function(t,e,r){r(new Error("not implemented"))};pe.prototype._writev=null;pe.prototype.end=function(t,e,r){var n=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),!n.ending&&!n.finished&&Zl(this,n,r)};function io(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function Ri(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"))}function ao(t,e){var r=io(e);return r&&(e.pendingcb===0?(Ri(t,e),e.finished=!0,t.emit("finish")):Ri(t,e)),r}function Zl(t,e,r){e.ending=!0,ao(t,e),r&&(e.finished?Ee(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function oo(t){var e=this;this.next=null,this.entry=null,this.finish=function(r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}}Xe(xe,ie);var Ti=Object.keys(pe.prototype);for(var Gr=0;Gr<Ti.length;Gr++){var Zr=Ti[Gr];xe.prototype[Zr]||(xe.prototype[Zr]=pe.prototype[Zr])}function xe(t){if(!(this instanceof xe))return new xe(t);ie.call(this,t),pe.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",Ql)}function Ql(){this.allowHalfOpen||this._writableState.ended||Ee(ec,this)}function ec(t){t.end()}Xe(Pe,xe);function tc(t){this.afterTransform=function(e,r){return rc(t,e,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function rc(t,e,r){var n=t._transformState;n.transforming=!1;var i=n.writecb;if(!i)return t.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,r!=null&&t.push(r),i(e);var a=t._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&t._read(a.highWaterMark)}function Pe(t){if(!(this instanceof Pe))return new Pe(t);xe.call(this,t),this._transformState=new tc(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(r){ki(e,r)}):ki(e)})}Pe.prototype.push=function(t,e){return this._transformState.needTransform=!1,xe.prototype.push.call(this,t,e)};Pe.prototype._transform=function(t,e,r){throw new Error("Not implemented")};Pe.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};Pe.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};function ki(t,e){if(e)return t.emit("error",e);var r=t._writableState,n=t._transformState;if(r.length)throw new Error("Calling transform done when ws.length != 0");if(n.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}Xe(kt,Pe);function kt(t){if(!(this instanceof kt))return new kt(t);Pe.call(this,t)}kt.prototype._transform=function(t,e,r){r(null,t)};Xe(Ce,V);Ce.Readable=ie;Ce.Writable=pe;Ce.Duplex=xe;Ce.Transform=Pe;Ce.PassThrough=kt;Ce.Stream=Ce;function Ce(){V.call(this)}Ce.prototype.pipe=function(t,e){var r=this;function n(h){t.writable&&t.write(h)===!1&&r.pause&&r.pause()}r.on("data",n);function i(){r.readable&&r.resume&&r.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",o),r.on("close",s));var a=!1;function o(){a||(a=!0,t.end())}function s(){a||(a=!0,typeof t.destroy=="function"&&t.destroy())}function u(h){if(l(),V.listenerCount(this,"error")===0)throw h}r.on("error",u),t.on("error",u);function l(){r.removeListener("data",n),t.removeListener("drain",i),r.removeListener("end",o),r.removeListener("close",s),r.removeListener("error",u),t.removeListener("error",u),r.removeListener("end",l),r.removeListener("close",l),t.removeListener("close",l)}return r.on("end",l),r.on("close",l),t.on("close",l),t.emit("pipe",r),t};var nc=Object.freeze({__proto__:null,Duplex:xe,PassThrough:kt,Readable:ie,Stream:Ce,Transform:Pe,Writable:pe,default:Ce}),ic=ot(nc),so=Fe.Buffer,uo=ic.Transform,ac=hn.StringDecoder,oc=be;function De(t){uo.call(this),this.hashMode=typeof t=="string",this.hashMode?this[t]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}oc(De,uo);De.prototype.update=function(t,e,r){typeof t=="string"&&(t=so.from(t,e));var n=this._update(t);return this.hashMode?this:(r&&(n=this._toString(n,r)),n)};De.prototype.setAutoPadding=function(){};De.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")};De.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")};De.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")};De.prototype._transform=function(t,e,r){var n;try{this.hashMode?this._update(t):this.push(this._update(t))}catch(i){n=i}finally{r(n)}};De.prototype._flush=function(t){var e;try{this.push(this.__final())}catch(r){e=r}t(e)};De.prototype._finalOrDigest=function(t){var e=this.__final()||so.alloc(0);return t&&(e=this._toString(e,t,!0)),e};De.prototype._toString=function(t,e,r){if(this._decoder||(this._decoder=new ac(e),this._encoding=e),this._encoding!==e)throw new Error("can't switch encodings");var n=this._decoder.write(t);return r&&(n+=this._decoder.end()),n};var fo=De;fo.default;var sc=be,uc=Na,fc=$a,lc=Al,lo=fo;function Pr(t){lo.call(this,"digest"),this._hash=t}sc(Pr,lo);Pr.prototype._update=function(t){this._hash.update(t)};Pr.prototype._final=function(){return this._hash.digest()};var co=function(e){return e=e.toLowerCase(),e==="md5"?new uc:e==="rmd160"||e==="ripemd160"?new fc:new Pr(lc(e))};co.default;var Nt;typeof window<"u"?Nt=window:typeof q<"u"?Nt=q:typeof self<"u"?Nt=self:Nt={};var ho=Nt;ho.default;var cc={},hc=Object.freeze({__proto__:null,default:cc}),dc=ot(hc),wt=ho,Oi=dc;function pc(t){if(wt.crypto&&wt.crypto.getRandomValues)return wt.crypto.getRandomValues(t);if(typeof wt.msCrypto=="object"&&typeof wt.msCrypto.getRandomValues=="function")return wt.msCrypto.getRandomValues(t);if(Oi.randomBytes){if(!(t instanceof Uint8Array))throw new TypeError("expected Uint8Array");if(t.length>65536){var e=new Error;throw e.code=22,e.message="Failed to execute 'getRandomValues' on 'Crypto': The ArrayBufferView's byte length ("+t.length+") exceeds the number of bytes of entropy available via this API (65536).",e.name="QuotaExceededError",e}var r=Oi.randomBytes(t.length);return t.set(r),t}else throw new Error("No secure random number generator available.")}var po=pc;po.default;Object.defineProperty(Be,"__esModule",{value:!0});var yc=ji,gc=co,vc=po,Qr=Pt;function Un(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var wc=Un(yc),bc=Un(gc),_c=Un(vc);const qe={EOS:"eos",ETH:"eth",TRX:"trx"};Object.keys(qe).map(t=>({key:t,value:qe[t]}));class Cr{constructor(e=qe.EOS,r="",n="",i=null,a=null){this.blockchain=e,this.contract=r,this.symbol=n,this.name=i||n,this.decimals=a}static placeholder(){return new Cr}static fromJson(e){return Object.assign(this.placeholder(),e)}}const Qt="blockchain_support",dt="wallet_support";var lr=Object.freeze({__proto__:null,BLOCKCHAIN_SUPPORT:Qt,WALLET_SUPPORT:dt});class ze{constructor(e="",r=""){this.name=e,this.type=r}static placeholder(){return new ze}static fromJson(e){return Object.assign(ze.placeholder(),e)}isSignatureProvider(){return this.type===Qt}isValid(){return Object.keys(lr).map(e=>lr[e]).includes(this.type)}}const X={disconnect:"disconnect",isConnected:"isConnected",isPaired:"isPaired",addEventHandler:"addEventHandler",removeEventHandler:"removeEventHandler",listen:"listen",getVersion:"getVersion",getIdentity:"getIdentity",getAllAccountsFor:"getAllAccountsFor",getIdentityFromPermissions:"getIdentityFromPermissions",forgetIdentity:"forgetIdentity",updateIdentity:"updateIdentity",authenticate:"authenticate",getArbitrarySignature:"getArbitrarySignature",getPublicKey:"getPublicKey",linkAccount:"linkAccount",hasAccountFor:"hasAccountFor",suggestNetwork:"suggestNetwork",requestTransfer:"requestTransfer",getAvatar:"getAvatar",requestSignature:"requestSignature",createTransaction:"createTransaction",addToken:"addToken",createEncryptionKey:"createEncryptionKey"},en={[X.getIdentity]:"login",[X.getAllAccountsFor]:"loginAll",[X.forgetIdentity]:"logout",[X.getIdentityFromPermissions]:"checkLogin"};class cr{constructor(e,r,n){const i=o=>()=>{throw console.error(`${e} does not support the ${o} method.`),new Error(`${e} does not support the ${o} method.`)},a=(o,s)=>{typeof n[s]>"u"&&(n[s]=o||i(s)),en[s]&&typeof n[en[s]]>"u"&&(n[en[s]]=n[s]?n[s]:i(s))};Object.keys(X).map(o=>a(r[o],o))}static bindBasics(e){e.account=r=>{if(e.identity&&e.identity.accounts)return e.identity.accounts.find(n=>n.blockchain===r)}}}class yo{static getMethods(e,r){const n=(i,a)=>((i||a)&&(e.holderFns.get().identity=i),a||i);return{[X.disconnect]:()=>r().disconnect(),[X.isConnected]:()=>r().isConnected(),[X.isPaired]:()=>r().isPaired(),[X.addEventHandler]:(i,a=null)=>r().addEventHandler(i,a),[X.removeEventHandler]:(i=null)=>r().removeEventHandler(i),[X.listen]:i=>r().addEventHandler(i),[X.getVersion]:()=>r().sendApiRequest({type:"getVersion",payload:{}}),[X.getIdentity]:i=>r().sendApiRequest({type:"getOrRequestIdentity",payload:{fields:i||{accounts:[e.holderFns.get().network]}}}).then(n),[X.getAllAccountsFor]:i=>r().sendApiRequest({type:"getAllAccountsFor",payload:{fields:i||{accounts:[e.holderFns.get().network]}}}).then(n),[X.getIdentityFromPermissions]:()=>r().sendApiRequest({type:"identityFromPermissions",payload:{}}).then(n),[X.forgetIdentity]:()=>r().sendApiRequest({type:"forgetIdentity",payload:{}}).then(i=>n(null,i)),[X.updateIdentity]:({name:i,kyc:a})=>r().sendApiRequest({type:"updateIdentity",payload:{name:i,kyc:a}}).then(o=>o?n(o):null),[X.authenticate]:(i,a=null,o=null)=>r().sendApiRequest({type:"authenticate",payload:{nonce:i,data:a,publicKey:o}}),[X.getArbitrarySignature]:(i,a)=>r().sendApiRequest({type:"requestArbitrarySignature",payload:{publicKey:i,data:a}}),[X.getPublicKey]:i=>r().sendApiRequest({type:"getPublicKey",payload:{blockchain:i}}),[X.linkAccount]:(i,a)=>r().sendApiRequest({type:"linkAccount",payload:{account:i,network:a||e.holderFns.get().network}}),[X.hasAccountFor]:i=>r().sendApiRequest({type:"hasAccountFor",payload:{network:i||e.holderFns.get().network}}),[X.suggestNetwork]:i=>r().sendApiRequest({type:"requestAddNetwork",payload:{network:i||e.holderFns.get().network}}),[X.requestTransfer]:(i,a,o,s={})=>r().sendApiRequest({type:"requestTransfer",payload:{network:i||e.holderFns.get().network,to:a,amount:o,options:s}}),[X.getAvatar]:()=>r().sendApiRequest({type:"getAvatar",payload:{}}),[X.requestSignature]:i=>r().sendApiRequest({type:"requestSignature",payload:i}),[X.createTransaction]:(i,a,o,s)=>r().sendApiRequest({type:"createTransaction",payload:{blockchain:i,actions:a,account:o,network:s||e.holderFns.get().network}}),[X.addToken]:(i,a)=>r().sendApiRequest({type:"addToken",payload:{token:i,network:a||e.holderFns.get().network}}),[X.createEncryptionKey]:(i,a,o=null)=>r().sendApiRequest({type:"createEncryptionKey",payload:{scatterPublicKey:i,otherPublicKey:a,nonce:o}})}}}let zn=!1;typeof document<"u"&&document.addEventListener("walletLoaded",()=>zn=!0);const mc=()=>typeof window<"u"&&typeof window.wallet<"u"?(zn=!0,!0):!1,go=async(t=null,e=0)=>new Promise(r=>{if(t||(t=r),zn||mc())return t(!0);if(e>5)return t(!1);setTimeout(()=>go(t,e+1),100)});class xc extends ze{constructor(e,r){super("InjectedWalletV2",dt),this.name="InjectedWalletV2",this.context=e,this.holderFns=r}async connect(){return new Promise(async e=>{await go()&&(this.holderFns&&!this.holderFns.get().wallet&&(this.holderFns.get().wallet=this.name),e({disconnect:()=>{},sendApiRequest:window.wallet.sendApiRequest}))})}async runAfterInterfacing(){return this.holderFns.get().identity=await this.holderFns.get().getIdentityFromPermissions(),!0}methods(){return yo.getMethods(this,()=>window.wallet)}}class at{constructor(e="",r="https",n="",i=0,a=qe.EOS,o=""){this.name=e,this.protocol=r,this.host=n,this.port=i,this.blockchain=a,this.chainId=o.toString(),this.token=null}static placeholder(){return new at}static fromJson(e){const r=Object.assign(at.placeholder(),e);return r.chainId=r.chainId?r.chainId.toString():"",r.token=e.hasOwnProperty("token")&&e.token?Cr.fromJson(e.token):null,r}fullhost(){return`${this.protocol}://${this.host}${this.port?":":""}${this.port}`}unique(){return(`${this.blockchain}:`+(this.chainId.length?`chain:${this.chainId}`:`${this.host}:${this.port}`)).toLowerCase()}}let tn={};const bt=()=>typeof window<"u"?window:{localStorage:{setItem:(t,e)=>tn[t]=e,getItem:t=>tn[t]||null,removeItem:t=>delete tn[t]}};class _t{constructor(){}static setAppKey(e){bt().localStorage.setItem("appkey",e)}static getAppKey(){return bt().localStorage.getItem("appkey")}static removeAppKey(){return bt().localStorage.removeItem("appkey")}static setNonce(e){bt().localStorage.setItem("nonce",e)}static getNonce(){return bt().localStorage.getItem("nonce")}static removeNonce(){return bt().localStorage.removeItem("nonce")}}/*!
* device-uuid.js v1.0.4 (https://github.com/biggora/device-uuid/)
* Copyright 2016-2017 Alexey Gordeyev
* Licensed under MIT (https://github.com/biggora/device-uuid/blob/master/LICENSE)
*/var Ec=["\\+https:\\/\\/developers.google.com\\/\\+\\/web\\/snippet\\/","googlebot","baiduspider","gurujibot","yandexbot","slurp","msnbot","bingbot","facebookexternalhit","linkedinbot","twitterbot","slackbot","telegrambot","applebot","pingdom","tumblr ","Embedly","spbot"],Ac=new RegExp("^.*("+Ec.join("|")+").*$"),vo=function(t){t=t||{};var e={version:!1,language:!1,platform:!0,os:!0,pixelDepth:!0,colorDepth:!0,resolution:!1,isAuthoritative:!0,silkAccelerated:!0,isKindleFire:!0,isDesktop:!0,isMobile:!0,isTablet:!0,isWindows:!0,isLinux:!0,isLinux64:!0,isChromeOS:!0,isMac:!0,isiPad:!0,isiPhone:!0,isiPod:!0,isAndroid:!0,isSamsung:!0,isSmartTV:!0,isRaspberry:!0,isBlackberry:!0,isTouchScreen:!0,isOpera:!1,isIE:!1,isEdge:!1,isIECompatibilityMode:!1,isSafari:!1,isFirefox:!1,isWebkit:!1,isChrome:!1,isKonqueror:!1,isOmniWeb:!1,isSeaMonkey:!1,isFlock:!1,isAmaya:!1,isPhantomJS:!1,isEpiphany:!1,source:!1,cpuCores:!1};for(var r in t)t.hasOwnProperty(r)&&typeof e[r]<"u"&&(e[r]=t[r]);return this.options=e,this.version="1.0.0",this._Versions={Edge:/Edge\/([\d\w\.\-]+)/i,Firefox:/firefox\/([\d\w\.\-]+)/i,IE:/msie\s([\d\.]+[\d])|trident\/\d+\.\d+;.*[rv:]+(\d+\.\d)/i,Chrome:/chrome\/([\d\w\.\-]+)/i,Chromium:/(?:chromium|crios)\/([\d\w\.\-]+)/i,Safari:/version\/([\d\w\.\-]+)/i,Opera:/version\/([\d\w\.\-]+)|OPR\/([\d\w\.\-]+)/i,Ps3:/([\d\w\.\-]+)\)\s*$/i,Psp:/([\d\w\.\-]+)\)?\s*$/i,Amaya:/amaya\/([\d\w\.\-]+)/i,SeaMonkey:/seamonkey\/([\d\w\.\-]+)/i,OmniWeb:/omniweb\/v([\d\w\.\-]+)/i,Flock:/flock\/([\d\w\.\-]+)/i,Epiphany:/epiphany\/([\d\w\.\-]+)/i,WinJs:/msapphost\/([\d\w\.\-]+)/i,PhantomJS:/phantomjs\/([\d\w\.\-]+)/i,UC:/UCBrowser\/([\d\w\.]+)/i},this._Browsers={Edge:/edge/i,Amaya:/amaya/i,Konqueror:/konqueror/i,Epiphany:/epiphany/i,SeaMonkey:/seamonkey/i,Flock:/flock/i,OmniWeb:/omniweb/i,Chromium:/chromium|crios/i,Chrome:/chrome/i,Safari:/safari/i,IE:/msie|trident/i,Opera:/opera|OPR/i,PS3:/playstation 3/i,PSP:/playstation portable/i,Firefox:/firefox/i,WinJs:/msapphost/i,PhantomJS:/phantomjs/i,UC:/UCBrowser/i},this._OS={Windows10:/windows nt 10\.0/i,Windows81:/windows nt 6\.3/i,Windows8:/windows nt 6\.2/i,Windows7:/windows nt 6\.1/i,UnknownWindows:/windows nt 6\.\d+/i,WindowsVista:/windows nt 6\.0/i,Windows2003:/windows nt 5\.2/i,WindowsXP:/windows nt 5\.1/i,Windows2000:/windows nt 5\.0/i,WindowsPhone8:/windows phone 8\./,OSXCheetah:/os x 10[._]0/i,OSXPuma:/os x 10[._]1(\D|$)/i,OSXJaguar:/os x 10[._]2/i,OSXPanther:/os x 10[._]3/i,OSXTiger:/os x 10[._]4/i,OSXLeopard:/os x 10[._]5/i,OSXSnowLeopard:/os x 10[._]6/i,OSXLion:/os x 10[._]7/i,OSXMountainLion:/os x 10[._]8/i,OSXMavericks:/os x 10[._]9/i,OSXYosemite:/os x 10[._]10/i,OSXElCapitan:/os x 10[._]11/i,OSXSierra:/os x 10[._]12/i,Mac:/os x/i,Linux:/linux/i,Linux64:/linux x86_64/i,ChromeOS:/cros/i,Wii:/wii/i,PS3:/playstation 3/i,PSP:/playstation portable/i,iPad:/\(iPad.*os (\d+)[._](\d+)/i,iPhone:/\(iPhone.*os (\d+)[._](\d+)/i,Bada:/Bada\/(\d+)\.(\d+)/i,Curl:/curl\/(\d+)\.(\d+)\.(\d+)/i},this._Platform={Windows:/windows nt/i,WindowsPhone:/windows phone/i,Mac:/macintosh/i,Linux:/linux/i,Wii:/wii/i,Playstation:/playstation/i,iPad:/ipad/i,iPod:/ipod/i,iPhone:/iphone/i,Android:/android/i,Blackberry:/blackberry/i,Samsung:/samsung/i,Curl:/curl/i},this.DefaultAgent={isAuthoritative:!0,isMobile:!1,isTablet:!1,isiPad:!1,isiPod:!1,isiPhone:!1,isAndroid:!1,isBlackberry:!1,isOpera:!1,isIE:!1,isEdge:!1,isIECompatibilityMode:!1,isSafari:!1,isFirefox:!1,isWebkit:!1,isChrome:!1,isKonqueror:!1,isOmniWeb:!1,isSeaMonkey:!1,isFlock:!1,isAmaya:!1,isPhantomJS:!1,isEpiphany:!1,isDesktop:!1,isWindows:!1,isLinux:!1,isLinux64:!1,isMac:!1,isChromeOS:!1,isBada:!1,isSamsung:!1,isRaspberry:!1,isBot:!1,isCurl:!1,isAndroidTablet:!1,isWinJs:!1,isKindleFire:!1,isSilk:!1,isCaptive:!1,isSmartTV:!1,isUC:!1,isTouchScreen:!1,silkAccelerated:!1,colorDepth:-1,pixelDepth:-1,resolution:[],cpuCores:-1,language:"unknown",browser:"unknown",version:"unknown",os:"unknown",platform:"unknown",geoIp:{},source:"",hashInt:function(n){var i=0,a,o,s;if(n.length===0)return i;for(a=0,s=n.length;a<s;a++)o=n.charCodeAt(a),i=(i<<5)-i+o,i|=0;return i},hashMD5:function(n){function i(m,C){return m<<C|m>>>32-C}function a(m,C){var L,f,c,R,D;return c=m&2147483648,R=C&2147483648,L=m&1073741824,f=C&1073741824,D=(m&1073741823)+(C&1073741823),L&f?D^2147483648^c^R:L|f?D&1073741824?D^3221225472^c^R:D^1073741824^c^R:D^c^R}function o(m,C,L){return m&C|~m&L}function s(m,C,L){return m&L|C&~L}function u(m,C,L){return m^C^L}function l(m,C,L){return C^(m|~L)}function h(m,C,L,f,c,R,D){return m=a(m,a(a(o(C,L,f),c),D)),a(i(m,R),C)}function p(m,C,L,f,c,R,D){return m=a(m,a(a(s(C,L,f),c),D)),a(i(m,R),C)}function b(m,C,L,f,c,R,D){return m=a(m,a(a(u(C,L,f),c),D)),a(i(m,R),C)}function P(m,C,L,f,c,R,D){return m=a(m,a(a(l(C,L,f),c),D)),a(i(m,R),C)}function E(m){for(var C,L=m.length,f=L+8,c=(f-f%64)/64,R=(c+1)*16,D=new Array(R-1),ee=0,j=0;j<L;)C=(j-j%4)/4,ee=j%4*8,D[C]=D[C]|m.charCodeAt(j)<<ee,j++;return C=(j-j%4)/4,ee=j%4*8,D[C]=D[C]|128<<ee,D[R-2]=L<<3,D[R-1]=L>>>29,D}function T(m){var C="",L="",f,c;for(c=0;c<=3;c++)f=m>>>c*8&255,L="0"+f.toString(16),C=C+L.substr(L.length-2,2);return C}function k(m){m=m.replace(/\r\n/g,`
`);for(var C="",L=0;L<m.length;L++){var f=m.charCodeAt(L);f<128?C+=String.fromCharCode(f):f>127&&f<2048?(C+=String.fromCharCode(f>>6|192),C+=String.fromCharCode(f&63|128)):(C+=String.fromCharCode(f>>12|224),C+=String.fromCharCode(f>>6&63|128),C+=String.fromCharCode(f&63|128))}return C}var d=[],v,B,F,N,W,A,_,w,O,se=7,he=12,Y=17,Z=22,ne=5,x=9,M=14,I=20,z=4,U=11,$=16,K=23,Q=6,ue=10,de=15,y=21;for(n=k(n),d=E(n),A=1732584193,_=4023233417,w=2562383102,O=271733878,v=0;v<d.length;v+=16)B=A,F=_,N=w,W=O,A=h(A,_,w,O,d[v+0],se,3614090360),O=h(O,A,_,w,d[v+1],he,3905402710),w=h(w,O,A,_,d[v+2],Y,606105819),_=h(_,w,O,A,d[v+3],Z,3250441966),A=h(A,_,w,O,d[v+4],se,4118548399),O=h(O,A,_,w,d[v+5],he,1200080426),w=h(w,O,A,_,d[v+6],Y,2821735955),_=h(_,w,O,A,d[v+7],Z,4249261313),A=h(A,_,w,O,d[v+8],se,1770035416),O=h(O,A,_,w,d[v+9],he,2336552879),w=h(w,O,A,_,d[v+10],Y,4294925233),_=h(_,w,O,A,d[v+11],Z,2304563134),A=h(A,_,w,O,d[v+12],se,1804603682),O=h(O,A,_,w,d[v+13],he,4254626195),w=h(w,O,A,_,d[v+14],Y,2792965006),_=h(_,w,O,A,d[v+15],Z,1236535329),A=p(A,_,w,O,d[v+1],ne,4129170786),O=p(O,A,_,w,d[v+6],x,3225465664),w=p(w,O,A,_,d[v+11],M,643717713),_=p(_,w,O,A,d[v+0],I,3921069994),A=p(A,_,w,O,d[v+5],ne,3593408605),O=p(O,A,_,w,d[v+10],x,38016083),w=p(w,O,A,_,d[v+15],M,3634488961),_=p(_,w,O,A,d[v+4],I,3889429448),A=p(A,_,w,O,d[v+9],ne,568446438),O=p(O,A,_,w,d[v+14],x,3275163606),w=p(w,O,A,_,d[v+3],M,4107603335),_=p(_,w,O,A,d[v+8],I,1163531501),A=p(A,_,w,O,d[v+13],ne,2850285829),O=p(O,A,_,w,d[v+2],x,4243563512),w=p(w,O,A,_,d[v+7],M,1735328473),_=p(_,w,O,A,d[v+12],I,2368359562),A=b(A,_,w,O,d[v+5],z,4294588738),O=b(O,A,_,w,d[v+8],U,2272392833),w=b(w,O,A,_,d[v+11],$,1839030562),_=b(_,w,O,A,d[v+14],K,4259657740),A=b(A,_,w,O,d[v+1],z,2763975236),O=b(O,A,_,w,d[v+4],U,1272893353),w=b(w,O,A,_,d[v+7],$,4139469664),_=b(_,w,O,A,d[v+10],K,3200236656),A=b(A,_,w,O,d[v+13],z,681279174),O=b(O,A,_,w,d[v+0],U,3936430074),w=b(w,O,A,_,d[v+3],$,3572445317),_=b(_,w,O,A,d[v+6],K,76029189),A=b(A,_,w,O,d[v+9],z,3654602809),O=b(O,A,_,w,d[v+12],U,3873151461),w=b(w,O,A,_,d[v+15],$,530742520),_=b(_,w,O,A,d[v+2],K,3299628645),A=P(A,_,w,O,d[v+0],Q,4096336452),O=P(O,A,_,w,d[v+7],ue,1126891415),w=P(w,O,A,_,d[v+14],de,2878612391),_=P(_,w,O,A,d[v+5],y,4237533241),A=P(A,_,w,O,d[v+12],Q,1700485571),O=P(O,A,_,w,d[v+3],ue,2399980690),w=P(w,O,A,_,d[v+10],de,4293915773),_=P(_,w,O,A,d[v+1],y,2240044497),A=P(A,_,w,O,d[v+8],Q,1873313359),O=P(O,A,_,w,d[v+15],ue,4264355552),w=P(w,O,A,_,d[v+6],de,2734768916),_=P(_,w,O,A,d[v+13],y,1309151649),A=P(A,_,w,O,d[v+4],Q,4149444226),O=P(O,A,_,w,d[v+11],ue,3174756917),w=P(w,O,A,_,d[v+2],de,718787259),_=P(_,w,O,A,d[v+9],y,3951481745),A=a(A,B),_=a(_,F),w=a(w,N),O=a(O,W);var g=T(A)+T(_)+T(w)+T(O);return g.toLowerCase()}},this.Agent={},this.getBrowser=function(n){switch(!0){case this._Browsers.Edge.test(n):return this.Agent.isEdge=!0,"Edge";case this._Browsers.PhantomJS.test(n):return this.Agent.isPhantomJS=!0,"PhantomJS";case this._Browsers.Konqueror.test(n):return this.Agent.isKonqueror=!0,"Konqueror";case this._Browsers.Amaya.test(n):return this.Agent.isAmaya=!0,"Amaya";case this._Browsers.Epiphany.test(n):return this.Agent.isEpiphany=!0,"Epiphany";case this._Browsers.SeaMonkey.test(n):return this.Agent.isSeaMonkey=!0,"SeaMonkey";case this._Browsers.Flock.test(n):return this.Agent.isFlock=!0,"Flock";case this._Browsers.OmniWeb.test(n):return this.Agent.isOmniWeb=!0,"OmniWeb";case this._Browsers.Opera.test(n):return this.Agent.isOpera=!0,"Opera";case this._Browsers.Chromium.test(n):return this.Agent.isChrome=!0,"Chromium";case this._Browsers.Chrome.test(n):return this.Agent.isChrome=!0,"Chrome";case this._Browsers.Safari.test(n):return this.Agent.isSafari=!0,"Safari";case this._Browsers.WinJs.test(n):return this.Agent.isWinJs=!0,"WinJs";case this._Browsers.IE.test(n):return this.Agent.isIE=!0,"IE";case this._Browsers.PS3.test(n):return"ps3";case this._Browsers.PSP.test(n):return"psp";case this._Browsers.Firefox.test(n):return this.Agent.isFirefox=!0,"Firefox";case this._Browsers.UC.test(n):return this.Agent.isUC=!0,"UCBrowser";default:return n.indexOf("Mozilla")!==0&&/^([\d\w\-\.]+)\/[\d\w\.\-]+/i.test(n)?(this.Agent.isAuthoritative=!1,RegExp.$1):"unknown"}},this.getBrowserVersion=function(n){var i;switch(this.Agent.browser){case"Edge":if(this._Versions.Edge.test(n))return RegExp.$1;break;case"PhantomJS":if(this._Versions.PhantomJS.test(n))return RegExp.$1;break;case"Chrome":if(this._Versions.Chrome.test(n))return RegExp.$1;break;case"Chromium":if(this._Versions.Chromium.test(n))return RegExp.$1;break;case"Safari":if(this._Versions.Safari.test(n))return RegExp.$1;break;case"Opera":if(this._Versions.Opera.test(n))return RegExp.$1?RegExp.$1:RegExp.$2;break;case"Firefox":if(this._Versions.Firefox.test(n))return RegExp.$1;break;case"WinJs":if(this._Versions.WinJs.test(n))return RegExp.$1;break;case"IE":if(this._Versions.IE.test(n))return RegExp.$2?RegExp.$2:RegExp.$1;break;case"ps3":if(this._Versions.Ps3.test(n))return RegExp.$1;break;case"psp":if(this._Versions.Psp.test(n))return RegExp.$1;break;case"Amaya":if(this._Versions.Amaya.test(n))return RegExp.$1;break;case"Epiphany":if(this._Versions.Epiphany.test(n))return RegExp.$1;break;case"SeaMonkey":if(this._Versions.SeaMonkey.test(n))return RegExp.$1;break;case"Flock":if(this._Versions.Flock.test(n))return RegExp.$1;break;case"OmniWeb":if(this._Versions.OmniWeb.test(n))return RegExp.$1;break;case"UCBrowser":if(this._Versions.UC.test(n))return RegExp.$1;break;default:if(this.Agent.browser!=="unknown"&&(i=new RegExp(this.Agent.browser+"[\\/ ]([\\d\\w\\.\\-]+)","i"),i.test(n)))return RegExp.$1}},this.getOS=function(n){switch(!0){case this._OS.WindowsVista.test(n):return this.Agent.isWindows=!0,"Windows Vista";case this._OS.Windows7.test(n):return this.Agent.isWindows=!0,"Windows 7";case this._OS.Windows8.test(n):return this.Agent.isWindows=!0,"Windows 8";case this._OS.Windows81.test(n):return this.Agent.isWindows=!0,"Windows 8.1";case this._OS.Windows10.test(n):return this.Agent.isWindows=!0,"Windows 10.0";case this._OS.Windows2003.test(n):return this.Agent.isWindows=!0,"Windows 2003";case this._OS.WindowsXP.test(n):return this.Agent.isWindows=!0,"Windows XP";case this._OS.Windows2000.test(n):return this.Agent.isWindows=!0,"Windows 2000";case this._OS.WindowsPhone8.test(n):return"Windows Phone 8";case this._OS.Linux64.test(n):return this.Agent.isLinux=!0,this.Agent.isLinux64=!0,"Linux 64";case this._OS.Linux.test(n):return this.Agent.isLinux=!0,"Linux";case this._OS.ChromeOS.test(n):return this.Agent.isChromeOS=!0,"Chrome OS";case this._OS.Wii.test(n):return"Wii";case this._OS.PS3.test(n):return"Playstation";case this._OS.PSP.test(n):return"Playstation";case this._OS.OSXCheetah.test(n):return this.Agent.isMac=!0,"OS X Cheetah";case this._OS.OSXPuma.test(n):return this.Agent.isMac=!0,"OS X Puma";case this._OS.OSXJaguar.test(n):return this.Agent.isMac=!0,"OS X Jaguar";case this._OS.OSXPanther.test(n):return this.Agent.isMac=!0,"OS X Panther";case this._OS.OSXTiger.test(n):return this.Agent.isMac=!0,"OS X Tiger";case this._OS.OSXLeopard.test(n):return this.Agent.isMac=!0,"OS X Leopard";case this._OS.OSXSnowLeopard.test(n):return this.Agent.isMac=!0,"OS X Snow Leopard";case this._OS.OSXLion.test(n):return this.Agent.isMac=!0,"OS X Lion";case this._OS.OSXMountainLion.test(n):return this.Agent.isMac=!0,"OS X Mountain Lion";case this._OS.OSXMavericks.test(n):return this.Agent.isMac=!0,"OS X Mavericks";case this._OS.OSXYosemite.test(n):return this.Agent.isMac=!0,"OS X Yosemite";case this._OS.OSXElCapitan.test(n):return this.Agent.isMac=!0,"OS X El Capitan";case this._OS.OSXSierra.test(n):return this.Agent.isMac=!0,"macOS Sierra";case this._OS.Mac.test(n):return this.Agent.isMac=!0,"OS X";case this._OS.iPad.test(n):return this.Agent.isiPad=!0,n.match(this._OS.iPad)[0].replace("_",".");case this._OS.iPhone.test(n):return this.Agent.isiPhone=!0,n.match(this._OS.iPhone)[0].replace("_",".");case this._OS.Bada.test(n):return this.Agent.isBada=!0,"Bada";case this._OS.Curl.test(n):return this.Agent.isCurl=!0,"Curl";default:return"unknown"}},this.getPlatform=function(n){switch(!0){case this._Platform.Windows.test(n):return"Microsoft Windows";case this._Platform.WindowsPhone.test(n):return this.Agent.isWindowsPhone=!0,"Microsoft Windows Phone";case this._Platform.Mac.test(n):return"Apple Mac";case this._Platform.Curl.test(n):return"Curl";case this._Platform.Android.test(n):return this.Agent.isAndroid=!0,"Android";case this._Platform.Blackberry.test(n):return this.Agent.isBlackberry=!0,"Blackberry";case this._Platform.Linux.test(n):return"Linux";case this._Platform.Wii.test(n):return"Wii";case this._Platform.Playstation.test(n):return"Playstation";case this._Platform.iPad.test(n):return this.Agent.isiPad=!0,"iPad";case this._Platform.iPod.test(n):return this.Agent.isiPod=!0,"iPod";case this._Platform.iPhone.test(n):return this.Agent.isiPhone=!0,"iPhone";case this._Platform.Samsung.test(n):return this.Agent.isiSamsung=!0,"Samsung";default:return"unknown"}},this.testCompatibilityMode=function(){var n=this;if(this.Agent.isIE&&/Trident\/(\d)\.0/i.test(n.Agent.source)){var i=parseInt(RegExp.$1,10),a=parseInt(n.Agent.version,10);a===7&&i===7&&(n.Agent.isIECompatibilityMode=!0,n.Agent.version=11),a===7&&i===6&&(n.Agent.isIECompatibilityMode=!0,n.Agent.version=10),a===7&&i===5&&(n.Agent.isIECompatibilityMode=!0,n.Agent.version=9),a===7&&i===4&&(n.Agent.isIECompatibilityMode=!0,n.Agent.version=8)}},this.testSilk=function(){var n=this;switch(!0){case new RegExp("silk","gi").test(n.Agent.source):this.Agent.isSilk=!0;break}return/Silk-Accelerated=true/gi.test(n.Agent.source)&&(this.Agent.SilkAccelerated=!0),this.Agent.isSilk?"Silk":!1},this.testKindleFire=function(){var n=this;switch(!0){case/KFOT/gi.test(n.Agent.source):return this.Agent.isKindleFire=!0,"Kindle Fire";case/KFTT/gi.test(n.Agent.source):return this.Agent.isKindleFire=!0,"Kindle Fire HD";case/KFJWI/gi.test(n.Agent.source):return this.Agent.isKindleFire=!0,"Kindle Fire HD 8.9";case/KFJWA/gi.test(n.Agent.source):return this.Agent.isKindleFire=!0,"Kindle Fire HD 8.9 4G";case/KFSOWI/gi.test(n.Agent.source):return this.Agent.isKindleFire=!0,"Kindle Fire HD 7";case/KFTHWI/gi.test(n.Agent.source):return this.Agent.isKindleFire=!0,"Kindle Fire HDX 7";case/KFTHWA/gi.test(n.Agent.source):return this.Agent.isKindleFire=!0,"Kindle Fire HDX 7 4G";case/KFAPWI/gi.test(n.Agent.source):return this.Agent.isKindleFire=!0,"Kindle Fire HDX 8.9";case/KFAPWA/gi.test(n.Agent.source):return this.Agent.isKindleFire=!0,"Kindle Fire HDX 8.9 4G";default:return!1}},this.testCaptiveNetwork=function(){var n=this;switch(!0){case/CaptiveNetwork/gi.test(n.Agent.source):return n.Agent.isCaptive=!0,n.Agent.isMac=!0,n.Agent.platform="Apple Mac","CaptiveNetwork";default:return!1}},this.testMobile=function(){var i=this;switch(!0){case i.Agent.isWindows:case i.Agent.isLinux:case i.Agent.isMac:case i.Agent.isChromeOS:i.Agent.isDesktop=!0;break;case i.Agent.isAndroid:case i.Agent.isSamsung:i.Agent.isMobile=!0,i.Agent.isDesktop=!1;break}switch(!0){case i.Agent.isiPad:case i.Agent.isiPod:case i.Agent.isiPhone:case i.Agent.isBada:case i.Agent.isBlackberry:case i.Agent.isAndroid:case i.Agent.isWindowsPhone:i.Agent.isMobile=!0,i.Agent.isDesktop=!1;break}/mobile/i.test(i.Agent.source)&&(i.Agent.isMobile=!0,i.Agent.isDesktop=!1)},this.testTablet=function(){var i=this;switch(!0){case i.Agent.isiPad:case i.Agent.isAndroidTablet:case i.Agent.isKindleFire:i.Agent.isTablet=!0;break}/tablet/i.test(i.Agent.source)&&(i.Agent.isTablet=!0)},this.testNginxGeoIP=function(i){var a=this;Object.keys(i).forEach(function(o){/^GEOIP/i.test(o)&&(a.Agent.geoIp[o]=i[o])})},this.testBot=function(){var i=this,a=Ac.exec(i.Agent.source.toLowerCase());a?i.Agent.isBot=a[1]:i.Agent.isAuthoritative||(i.Agent.isBot=/bot/i.test(i.Agent.source))},this.testSmartTV=function(){var i=this,a=new RegExp("smart-tv|smarttv|googletv|appletv|hbbtv|pov_tv|netcast.tv","gi").exec(i.Agent.source.toLowerCase());a&&(i.Agent.isSmartTV=a[1])},this.testAndroidTablet=function(){var i=this;i.Agent.isAndroid&&!/mobile/i.test(i.Agent.source)&&(i.Agent.isAndroidTablet=!0)},this.testTouchSupport=function(){var n=this;n.Agent.isTouchScreen="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0},this.getLaguage=function(){var n=this;n.Agent.language=(navigator.language||navigator.userLanguage||navigator.browserLanguage||navigator.systemLanguage||"").toLowerCase()},this.getColorDepth=function(){var n=this;n.Agent.colorDepth=screen.colorDepth||-1},this.getScreenResolution=function(){var n=this;n.Agent.resolution=[screen.availWidth,screen.availHeight]},this.getPixelDepth=function(){var n=this;n.Agent.pixelDepth=screen.pixelDepth||-1},this.getCPU=function(){var n=this;n.Agent.cpuCores=navigator.hardwareConcurrency||-1},this.reset=function(){var i=this;for(var a in i.DefaultAgent)i.DefaultAgent.hasOwnProperty(a)&&(i.Agent[a]=i.DefaultAgent[a]);return i},this.parse=function(i){i=i||navigator.userAgent;var a=new vo;return a.Agent.source=i.replace(/^\s*/,"").replace(/\s*$/,""),a.Agent.os=a.getOS(a.Agent.source),a.Agent.platform=a.getPlatform(a.Agent.source),a.Agent.browser=a.getBrowser(a.Agent.source),a.Agent.version=a.getBrowserVersion(a.Agent.source),a.testBot(),a.testSmartTV(),a.testMobile(),a.testAndroidTablet(),a.testTablet(),a.testCompatibilityMode(),a.testSilk(),a.testKindleFire(),a.testCaptiveNetwork(),a.testTouchSupport(),a.getLaguage(),a.getColorDepth(),a.getPixelDepth(),a.getScreenResolution(),a.getCPU(),a.Agent},this.get=function(n){var i="a",a=this.parse(),o=[];for(var s in this.options)this.options.hasOwnProperty(s)&&this.options[s]===!0&&o.push(a[s]);n&&o.push(n),!this.options.resolution&&a.isMobile&&o.push(a.resolution),i="b";var u=a.hashMD5(o.join(":")),l=[u.slice(0,8),u.slice(8,12),"4"+u.slice(12,15),i+u.slice(15,18),u.slice(20)];return l.join("-")},this.Agent=this.DefaultAgent,this};let pn;if(typeof navigator>"u")pn="nodejs_env";else{const t=new vo().parse(),e=[t.language,t.platform,t.os,t.cpuCores,t.colorDepth];pn=t.hashMD5(e.join(":"))}var wo=pn;const Sc="/socket.io/?EIO=3&transport=websocket",Pi=t=>bc.default("sha256").update(t).digest("hex"),rr=()=>{let t=new Uint8Array(24);return _c.default(t),t.join("")};class pt{constructor(e,r){this.plugin=e,this.timeout=r,this.uuid=null,this.socket=null,this.connected=!1,this.paired=!1,this.openRequests=[],this.pairingPromise=null,this.eventHandlers={},this.appkey=_t.getAppKey(),this.appkey||(this.appkey="appkey:"+rr())}addEventHandler(e,r){r||(r="app"),this.eventHandlers[r]=e}removeEventHandler(e){e||(e="app"),delete this.eventHandlers[e]}link(e=!0,r=null,n=null){return this.uuid=r,new Promise(async i=>{const a=()=>{this.socket.onmessage=E=>{if(E.data.indexOf("42/scatter")===-1)return!1;const[T,k]=JSON.parse(E.data.replace("42/scatter,",""));if(T!=="pong"){if(T==="ping")return this.socket.send('42/scatter,["pong"]');switch(T){case"paired":return h(k);case"rekey":return p();case"api":return b(k);case"event":return P(k)}}};const h=E=>{if(this.paired=E,this.paired){const T=_t.getAppKey(),k=this.appkey.indexOf("appkey:")>-1?Pi(this.appkey):this.appkey;(!T||T!==k)&&(_t.setAppKey(k),this.appkey=_t.getAppKey())}this.pairingPromise.resolve(E)},p=()=>{this.appkey="appkey:"+rr(),this.send("rekeyed",{data:{appkey:this.appkey,origin:this.getOrigin()},plugin:this.plugin})},b=E=>{try{E=JSON.parse(E)}catch{}const T=this.openRequests.find(d=>d.id===E.id);if(!T)return;this.openRequests=this.openRequests.filter(d=>d.id!==E.id),typeof E.result=="object"&&E.result!==null&&E.result.hasOwnProperty("isError")?T.reject(E.result):T.resolve(E.result)},P=({event:E,payload:T})=>{Object.keys(this.eventHandlers).length&&Object.keys(this.eventHandlers).map(k=>{this.eventHandlers[k](E,T)})}},o=(h,p)=>n||(p?`local.get-scatter.com:${h}`:`127.0.0.1:${h}`),s=await new Promise(async h=>{if(n)return h([50006]);const p=(d,v)=>fetch(d).then(B=>B.text()).then(B=>v(B==="scatter")).catch(()=>v(!1));let b=50005,P=[];const E=()=>(P.length?P:[50006,50005]).filter(d=>e?!0:!(d%2)).sort((d,v)=>v%2?d%2?0:-1:1);let T=!1;const k=(d=null)=>{T||(T=!0,d!==null&&P.push(d),h(E()))};await Promise.all([...new Array(5).keys()].map(async d=>{if(T)return;const v=b+d*1500;return await p("https://"+o(v+1,!0),B=>B?k(v+1):null),e&&await p("http://"+o(v,!1),B=>B?k(v):null),!0})),k()}),u=h=>new Promise(p=>{const b=!(h%2),P=o(h,b),E=b?"wss://":"ws://",T=new wc.default(`${E}${P}${Sc}`);T.onerror=()=>p(!1),T.onopen=()=>p(T)});let l=!1;for(let h=0;h<s.length;h++){if(l)continue;const p=await u(s[h]);if(p){l=!0,this.socket=p,this.send(),this.connected=!0,a(),this.pairingPromise=null,this.pair(!0).then(()=>i(!0));break}}})}isConnected(){return this.socket&&this.socket.readyState===1}isPaired(){return this.paired}disconnect(){return this.socket&&this.socket.close(),!0}sendApiRequest(e){return new Promise((r,n)=>{if(e.type==="identityFromPermissions"&&!this.paired)return r(!1);this.pair().then(()=>{if(!this.paired)return n({code:"not_paired",message:"The user did not allow this app to connect to their Scatter"});e.id=rr(),e.appkey=this.appkey,e.nonce=_t.getNonce()||0;const i=rr();e.nextNonce=Pi(i),_t.setNonce(i),e.hasOwnProperty("payload")&&!e.payload.hasOwnProperty("origin")&&(e.payload.origin=this.getOrigin()),this.openRequests.push(Object.assign(e,{resolve:r,reject:n})),this.send("api",{data:e,plugin:this.plugin})})})}pair(e=!1){return new Promise((r,n)=>{this.pairingPromise={resolve:r,reject:n},this.send("pair",{data:{appkey:this.appkey,origin:this.getOrigin(),passthrough:e},plugin:this.plugin})})}send(e=null,r=null){e===null&&r===null?this.socket.send("40/scatter"):this.socket.send("42/scatter,"+JSON.stringify([e,Object.assign(r,{device:wo,uuid:this.uuid})]))}getOrigin(){return pt.getOriginOrPlugin(this.plugin)}static getOriginOrPlugin(e){let r;return typeof location<"u"&&location.hasOwnProperty("hostname")&&location.hostname.length&&location.hostname!=="localhost"?r=location.hostname:r=e,r.substr(0,4)==="www."&&(r=r.replace("www.","")),r}}class bo extends ze{constructor(e,r){super("LocalSocket",dt),this.name="LocalSocket",this.context=e,this.holderFns=r}connect(e,r={}){return new Promise(n=>{if(!e||!e.length)throw new Error("You must specify a name for this connection");r=Object.assign({linkTimeout:3e3,allowHttp:!0},r),this.socketService=new pt(e,r.linkTimeout),this.socketService.link(r.allowHttp).then(async i=>i?(this.holderFns.get().isExtension=!1,this.holderFns.get().wallet||(this.holderFns.get().wallet=this.name),n(this.socketService)):n(!1))})}async runAfterInterfacing(){return this.holderFns.get().addEventHandler((e,r)=>this.eventHandler(e,r),"internal"),this.holderFns.get().identity=await this.holderFns.get().getIdentityFromPermissions(),!0}methods(){return yo.getMethods(this,()=>this.socketService)}async eventHandler(e,r){switch(e){case Ot.Disconnected:this.holderFns.get().identity=null;break;case Ot.LoggedOut:this.holderFns.get().identity=await this.holderFns.get().getIdentityFromPermissions();break}}}const Rc="https://relay.get-scatter.com:443",Tc="relaysock.get-scatter.com:443";class kc extends ze{constructor(e,r){super("RelaySocket",dt),this.name="RelaySocket",this.context=e,this.holderFns=r}connect(e,r={}){return new Promise(async n=>{if(!e||!e.length)throw new Error("You must specify a name for this connection");r=Object.assign({linkTimeout:3e3,allowHttp:!0},r);const i=await fetch(`${Rc}/app/connect/${wo}`).then(a=>a.status===200?a.json():null);if(!i)return n(!1);this.socketService=new pt(e,r.linkTimeout),this.socketService.link(r.allowHttp,i,Tc).then(async a=>a?(this.holderFns.get().isExtension=!1,this.holderFns.get().wallet||(this.holderFns.get().wallet=this.name),n(this.socketService)):n(!1))})}async runAfterInterfacing(){return this.holderFns.get().identity=await this.holderFns.get().getIdentityFromPermissions(),!0}methods(){return bo.getMethods(this)}async eventHandler(e,r){switch(e){case Ot.Disconnected:this.holderFns.get().identity=null;break;case Ot.LoggedOut:this.holderFns.get().identity=await this.holderFns.get().getIdentityFromPermissions();break}}}let yn=!1;typeof window<"u"&&typeof document<"u"&&(typeof window.scatter<"u"?yn=!0:document.addEventListener("scatterLoaded",()=>yn=!0));const _o=async(t=null,e=0)=>new Promise(r=>{if(t||(t=r),yn)return t(!0);if(e>5)return t(!1);setTimeout(()=>_o(t,e+1),100)});class Oc extends ze{constructor(e,r){super("InjectedWallet",dt),this.name="InjectedWallet",this.context=e,this.holderFns=r}async connect(){return new Promise(async e=>{await _o()&&(this.holderFns&&!this.holderFns.get().wallet&&(this.holderFns.get().wallet=this.name),e("injection"))})}async runBeforeInterfacing(){const e=this.context.network;if(e){const r=window.scatter.getIdentity.bind(window.scatter),n=window.scatter.useIdentity.bind(window.scatter);window.scatter.getIdentity=a=>r(a||{accounts:[e]}).then(o=>(this.holderFns.get().identity=o,n(o),o));const i=window.scatter.suggestNetwork.bind(window.scatter);window.scatter.suggestNetwork=a=>i(a||e)}return this.holderFns.get().wallet===this.name&&(window.scatter.wallet=this.name),this.holderFns.set(window.scatter),this.context=this.holderFns.get(),!0}async runAfterInterfacing(){return this.context.isExtension=!0,this.context.connect=this.connect,!0}methods(){return{}}}class Pc{constructor(){this.plugins=[]}loadPlugin(e){this.plugin(e.name)||this.plugins.push(e)}wallets(){return this.plugins.filter(e=>e.type===dt)}signatureProviders(){return this.plugins.filter(e=>e.type===Qt)}supportedBlockchains(){return this.signatureProviders().map(e=>name)}plugin(e){return this.plugins.find(r=>r.name===e)}async endorsedNetworks(){return await Promise.all(this.signatureProviders().map(async e=>await e.getEndorsedNetwork()))}}const mt=new Pc,Ot={Disconnected:"dced",LoggedOut:"logout"};let nr=null,rn=[],Oe={};class Cc{constructor(){this.identity=null,this.network=null,mt.loadPlugin(new kc(this,Oe)),mt.loadPlugin(new bo(this,Oe)),mt.loadPlugin(new xc(this,Oe)),mt.loadPlugin(new Oc(this,Oe))}loadPlugin(e){const r=()=>{if(!Oe.get().identity)throw new Error("No Identity")};if(!e.isValid())throw new Error(`${e.name} doesn't seem to be a valid ScatterJS plugin.`);mt.loadPlugin(e),e.type===Qt&&(this[e.name]=e.signatureProvider(r,()=>Oe.get().identity),this[e.name+"Hook"]=e.hookProvider,typeof e.multiHook=="function"&&(this[e.name+"MultiHook"]=e.multiHook),rn.push(e.setSocketService)),e.type===dt&&e.init(this,Oe,rn)}async connect(e,r){return new Promise(async n=>{r||(r={}),this.network=r.hasOwnProperty("network")?r.network:null;const i=mt.wallets();nr&&(nr.disconnect(),nr=null);let a=!1,o=[];for(let s=0;s<i.length;s++){if(a)return;const u=i[s];o.push(Promise.race([u.connect(e,r).then(async l=>{l&&(l!=="injection"&&(nr=l,rn.map(h=>h(l))),typeof u.runBeforeInterfacing=="function"&&await u.runBeforeInterfacing(),new cr(u.name,u.methods(),Oe.get()),typeof u.runAfterInterfacing=="function"&&await u.runAfterInterfacing(),cr.bindBasics(Oe.get()),a=!0,n(!0))}).catch(()=>!1),new Promise(l=>setTimeout(()=>l(!1),5e3))]))}await Promise.all(o),n(!1)})}}class Bc{constructor(e){this.scatter=e}plugins(...e){this.scatter.isExtension||e.map(r=>this.scatter.loadPlugin(r))}connect(...e){return this.scatter.connect(...e)}catchAll(...e){}}let Ae=new Proxy(new Bc(new Cc),{get(t,e){return typeof t[e]<"u"?t[e]:t.scatter[e]}});Oe.set=t=>Ae.scatter=t;Oe.get=()=>Ae.scatter;typeof window<"u"&&(window.ScatterJS=Ae);Ae.Plugin=ze;Ae.PluginTypes=lr;Ae.Blockchains=qe;Ae.Network=at;Ae.Token=Cr;Ae.SocketService=pt;Ae.EVENTS=Ot;Ae.WalletInterface=cr;Ae.WALLET_METHODS=X;let nn=pt;const Fc=(t,e)=>new Proxy(t,e);class mo extends ze{constructor(){super(qe.EOS,Qt)}setSocketService(e){nn=e}hookProvider(e,r=null){return e=at.fromJson(e),{requiredFields:{},getAvailableKeys:async()=>await nn.sendApiRequest({type:"identityFromPermissions",payload:{}}).then(n=>n?n.accounts.filter(i=>i.blockchain===qe.EOS).map(i=>i.publicKey):[]),sign:async n=>{const i=r?r():{};return n.serializedTransaction=Qr.Buffer.from(n.serializedTransaction).toString("hex"),new Promise(async(a,o)=>{nn.sendApiRequest({type:"requestSignature",payload:{transaction:n,blockchain:qe.EOS,network:e,requiredFields:i}}).then(s=>{a({signatures:s.signatures,serializedTransaction:Qr.Buffer.from(n.serializedTransaction,"hex")})}).catch(s=>o(s))})}}}multiHook(e,r){const n=this.eosHook(e);return Array.isArray(r)||(r=[r]),{getAvailableKeys:async()=>{try{const i=await n.getAvailableKeys();let a=[];return await Promise.all(r.map(async o=>(await o.getAvailableKeys().then(s=>{s.map(u=>a.push(u))}),!0))),i.concat(a)}catch(i){throw new Error(i)}},sign:async i=>{try{const a=Qr.Buffer.from(i.serializedTransaction,"hex"),o=async h=>({abis:i.abis,chainId:e.chainId,requiredKeys:await h.getAvailableKeys(),serializedTransaction:a}),s=h=>typeof h=="object"&&h.hasOwnProperty("signatures")?h.signatures:h,u=await n.sign(await o(n)).then(h=>s(h));let l=[];return await Promise.all(r.map(async h=>(await h.sign(await o(h)).then(p=>{s(p).map(b=>l.push(b))}),!0))),{signatures:u.concat(l),serializedTransaction:a}}catch(a){throw new Error(a)}}}}signatureProvider(...e){return e[0],(r,n,i={})=>{r=at.fromJson(r);let a={};const o=()=>a,s=this.hookProvider(r,o);return Fc(new n(Object.assign(i,{signatureProvider:s})),{get(u,l){return(...h)=>{if(typeof u[l]>"u")throw new Error(`${l} does not exist on the eosjs.Api() object.`);const p=h.find(b=>b.hasOwnProperty("requiredFields"));return a=p?p.requiredFields:{},u[l](...h)}}})}}}typeof window<"u"&&(window.ScatterEOS=mo);Be.Blockchains=qe;Be.EVENTS=Ot;Be.Network=at;Be.Plugin=ze;Be.PluginTypes=lr;var Dc=Be.ScatterEOS=mo,zt=Be.ScatterJS=Ae;Be.SocketService=pt;Be.WALLET_METHODS=X;Be.WalletInterface=cr;async function Nn(t){zt.plugins(new Dc);const e=new URL(t.chain.url),r=e.protocol.replace(":","")==="https"?"https":"http",n=zt.Network.fromJson({blockchain:t.chain.name,chainId:String(t.chain.id),host:e.hostname,port:e.port?Number(e.port):r==="https"?443:80,protocol:r});if(!await zt.connect(t.appName,{network:n}))throw new Error("Unable to connect with Scatter wallet");const a=new ws(n.fullhost());a.getRequiredKeys=async()=>[];const o=zt.eos(n,ys,{rpc:a});return{scatter:zt,connector:o}}async function Ic(t){if(!t.ui)throw new Error("No UI available");const{scatter:e}=await Nn(t),r=await e.login();if(!r||!r.accounts)throw new Error("Unable to retrieve account from Scatter");const n=r.accounts[0];let i;if(n.chainId)i=n.chainId;else if(n.blockchain&&Object.keys(qn).includes(n.blockchain.toUpperCase()))i=qn[n.blockchain.toUpperCase()].id;else throw new Error("Unknown chain");return{chain:Eo.from(i),permissionLevel:Ao.from(`${n.name}@${n.authority}`)}}async function Lc(t){if(t.session===void 0)throw new Error("Unknown session");const{scatter:e}=await Nn({appName:t.appName,chain:t.session.chain});await e.logout()}async function Uc(t,e){if(!e.ui)throw new Error("No UI available");const{scatter:r,connector:n}=await Nn(e),i=await r.checkLogin();if(!i||!i.accounts)throw new Error("Please login first");const a=jn.encode({object:t.transaction}),o=await n.deserializeTransactionWithActions(a.array),s=await n.transact(o,{broadcast:!1});if(!s.serializedTransaction)throw new So("User Canceled request");const u=jn.decode({data:s.serializedTransaction,type:Ro}),l=await To.create({transaction:u},e.esrOptions),h=await l.fetchAbis(e.abiCache),p=l.resolve(h,e.permissionLevel);return{signatures:s.signatures,resolved:p}}export{Nn as getScatter,Ic as handleLogin,Lc as handleLogout,Uc as handleSignatureRequest};
